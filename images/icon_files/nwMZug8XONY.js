/*!CK:1377339342!*//*1458528162,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["o7PEs"]); }

__d("TrendingEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TAG_IMPRESSION:"tag_impression",TAG_FEED_LOAD:"tag_feed_load",TAG_FEED_LONG_VIEW:"tag_feed_long_view",TAG_HIDE:"tag_hide",TOPIC_HEADER_TAPPED:"topic_header_tapped",HOVERCARD_LOAD:"hovercard_load",HOVERCARD_UNLOAD:"hovercard_unload",HOVERCARD_ARTICLE_CLICK:"hovercard_article_click",HOVERCARD_FEED_CLICK:"hovercard_feed_click",HOVERCARD_CONTEXT_CLICK:"hovercard_context_click",OBJECT_CLICK:"object_click",OBJECT_OUTBOUND_CLICK:"object_outbound_click",OBJECT_LIKE:"object_like",OBJECT_COMMENT:"object_comment",OBJECT_SHARE:"object_share",OBJECT_PAGE_LIKE:"object_page_like",OBJECT_FOLLOW:"object_follow",OBJECT_HIDE:"object_hide",PAGINATE:"paginate",TOPIC_SHARE:"topic_share",CATEGORY_HEADER_CLICKED:"category_header_clicked",HOVERCARD_VIDEO_PLAYED:"hovercard_video_played",CLICK_TAG_IMPRESSION:"click_tag_impression"};},null);
__d("TrendingLocation",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FBFEED_TOPIC_PIVOT:"ftp",FBFEED_TRENDING_TOPIC_PIVOT:"fttp",IOS_TRENDING_DASHBOARD_IN_BOOKMARK:"ios_trending_dashboard_in_bookmark",IOS_TRENDING_INTERSTITIAL:"ios_trending_interstitial",MSITE_PERMALINK:"mp",MSITE_QP:"mq",MSITE_HASHTAG_REDIRECTION:"mhr",MSITE_CARD_PIVOT:"mcp",MSITE_FEED_TOPIC_PIVOT:"mftp",MSITE_FEED_TRENDING_TOPIC_PIVOT:"mfttp",MSITE_NEWS_DASHBOARD:"mnd",MSITE_NEWS_MODULE:"mnm",MSITE_LIVE_EVENT:"mle",MSITE_PAGE_REDIRECTION:"mpr",MSITE_RELATED_TOPICS:"mrt",MSITE_ADS:"ma",MSITE_SEARCH_SPORT_MATCH_MODULE:"mssmm",WEB_FEED_TOPIC_PIVOT:"wftp",WEB_FEED_TRENDING_TOPIC_PIVOT:"wfttp",OLD_FEED_TOPIC_PIVOT:"oftp",OLD_FEED_TRENDING_TOPIC_PIVOT:"ofttp",WWW_PERMALINK:"wp",WWW_QP:"wq",WWW_HASHTAG_REDIRECTION:"whr",WWW_HIDDEN_RHC_TRENDING:"whrt",WWW_HOME_FEED_RHC_TRENDING:"whfrt",WWW_HOME_FEED_RHC_TRENDING_PLACES:"whfrtp",WWW_POST_LIKE_TOPIC_CHAINING:"wpltc",WWW_TOPIC_FEED_RHC_TRENDING:"wtfrt",WWW_POST_SEARCH_RHC_TRENDING:"wpsrt",WWW_PAGE_FEED_RHC_TRENDING:"wpfrt",WWW_BROWSE_RHC_TRENDING:"wbrt",WWW_BROWSE_LATEST_POSTS_TAB:"wblpt",WWW_WORLDCUP_RHC_TRENDING:"wwcrt",WWW_LIVE_EVENT:"wle",WWW_PAGE_REDIRECTION:"wpr",WWW_ADS:"wa",WWW_SEARCH_SPORT_MATCH_MODULE:"wssmm",WWW_NEWS:"wnews",UNKNOWN:"unknown",FBFEED_SENTIMENT_UNIT_PIVOT:"fsup",IOS_NEWS_FEED:"ios_news_feed",MTOUCH_NEWS_FEED:"mtouch_news_feed",ANDROID_NULL_STATE:"android_null_state",IOS_GRAPH_SEARCH_NULL_STATE:"ios_graph_search_null_state",MSITE_NEWS_NON_GS_NULL_STATE:"mnngns",MSITE_NEWS_NULL_STATE:"mnns",MSITE_LATEST_POSTS_TAB:"mlpt",WWW_NULL_STATE:"www_null_state",SEARCH_TRENDING_MODULE:"stm",IOS_TODAY_MAIN:"ios_today_main",IOS_TODAY_SEE_MORE:"ios_today_see_more",IOS_STORY_TOPIC_HEADER:"ios_story_topic_header",TOPIC_SHARE:"share",TOPIC_MOBILE_SHARE:"mobile_share"};},null);
__d('TrendingRHCLogger',['csx','cx','AsyncSignal','BanzaiScuba','CSS','Event','Parent','Run','TrendingRHCConfig'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k,l,m,n,o,p,q,r=3,s=false;function t(y,z,aa,ba){var ca=new (c('BanzaiScuba'))('trending_rhc',null,{sampleRate:c('TrendingRHCConfig').sample_rate});ca.addNormal('country',n);ca.addNormal('post_search_trending_feeds',c('TrendingRHCConfig').post_search_trending_feeds);ca.addNormal('event',z);ca.addNormal('position',y);ca.addNormal('qe_group',k);var da=y<=r?l:q;ca.addNormal('source',da);ca.addNormVector('categories',aa);ca.addNormal('topic_id',ba);ca.post();}function u(y,z){var aa=y.getAttribute('data-position');if(!aa)return;var ba=y.getAttribute('data-categories'),ca=ba?JSON.parse(ba):[],da=y.getAttribute('data-topicid');t(aa,z,ca,da);}function v(event){var y=null,z=event.getTarget(),aa=c('Parent').bySelector(event.getTarget(),"._2w2e");if(aa){z=aa;}else if(!c('CSS').matchesSelector(z,"._5my2")){y=c('Parent').bySelector(z,"._4_nl");z=c('Parent').bySelector(z,"._5my2");}if(!z||y||c('CSS').matchesSelector(event.getTarget(),"._19_3")||c('CSS').matchesSelector(event.getTarget(),"._4v8h"))return;u(z,'click');var ba=z.getAttribute('data-position');if(ba==='seemore'||ba==='trendingheader')s=true;}function w(){if(!j)return;new (c('AsyncSignal'))('/ajax/pubcontent/trending_rhc/log_hidden',{keys:JSON.stringify(j),source:q,scores:JSON.stringify(o),query_id:p}).send();j=null;}var x={init:function(y,z){l=z.source;k=z.qe_group;n=z.country;j=z.hidden_keys;m=z.query_id;o=z.hidden_scores;var aa=c('Event').listen(y,'click',v);c('Run').onLeave(function(){aa.remove();});},initSeeMore:function(y,z,aa,ba,ca){j=z;o=aa;p=ba;q=ca;var da=c('Event').listen(y,'click',v);if(s){w();}else s=false;c('Run').onLeave(function(){da.remove();});},logHovercardArticleClick:function(y,z){t(y,'hover_article_click',null,z);},logHovercardFeedClick:function(y,z){t(y,'hover_feed_click',null,z);},logHovercardShare:function(y,z){t(y,'topic_share',null,z);},logImpression:function(y){u(y,'imp');},getSource:function(){return l;},getQueryID:function(){return m;},getSeeMoreSource:function(){return q;},getSeeMoreQueryID:function(){return p;}};f.exports=x;},null);
__d('TrendingHideReasons',['fbt','immutable'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('immutable').OrderedMap,j=i({5:h._("I want to see something else"),1:h._("I don't care about this"),2:h._("I keep seeing this"),3:h._("It's offensive or inappropriate"),4:h._("Other")});f.exports=j;},null);
__d('TrendingTopicHideMenu.react',['cx','ix','fbt','Image.react','ImageBlock.react','InputLabel.react','LeftRight.react','Link.react','React','TrendingHideReasons','XUIRadioInput.react','XUIText.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'TrendingTopicHideMenu',propTypes:{topicId:k.number.isRequired,category:k.number.isRequired},render:function(){return (c('React').createElement(c('ImageBlock.react'),{className:"_4_nl",spacing:'none'},c('React').createElement(c('Image.react'),{className:"_19_0",src:i('/images/pubcontent/trending/grey_sparkline.png')}),c('React').createElement('div',null,this._renderTitle(),this._renderSubtitle(),this._renderPollSection())));},_renderTitle:function(){return (c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('XUIText.react'),{weight:'bold'},j._("Topic Hidden")),c('React').createElement(c('Link.react'),{className:"_4_nn"},j._("Undo"))));},_renderSubtitle:function(){return (c('React').createElement('div',{className:"_3-95"},j._("We'll try not to show you this topic again.")));},_renderPollSection:function(){return (c('React').createElement('form',{action:'#',className:"_3-94"},c('React').createElement('div',{className:"_3-94"},j._("Why did you hide it?")),c('TrendingHideReasons').map(function(m,n){return (c('React').createElement(c('InputLabel.react'),{key:n},c('React').createElement(c('XUIRadioInput.react'),{className:"_2p3m",name:'trending_hide_reason',value:n,'data-topicid':this.props.topicId}),c('React').createElement('label',null,m)));}.bind(this)).toArray()));}});f.exports=l;},null);
__d("TrendingCategoriesIconUnitCallback",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={register:function(j){h=j;},callback:function(j,k){h.setCategoryList(j,k);}};f.exports=i;},null);
__d("XPubcontentTrendingCategoriesFetchListController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/fetch_list\/",{category:{type:"Enum",required:true,enumType:0},source:{type:"String",required:true},topic_ids_seen:{type:"IntVector",required:true}});},null);
__d("XPubcontentTrendingReplaceTrendsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/trending_unit\/",{is_expanded:{type:"Bool",defaultValue:false}});},null);
__d('TrendingCategoriesIconUnit',['AsyncRequest','CSS','Event','Style','TrendingCategoriesIconUnitCallback','XPubcontentTrendingCategoriesFetchListController','XPubcontentTrendingReplaceTrendsController','enumerate','tidyEvent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TrendingCategoriesIconUnit1=i.categoryIconMap;this.$TrendingCategoriesIconUnit2=i.categoryListMap;this.$TrendingCategoriesIconUnit3=i.categoryHeaderMap;this.$TrendingCategoriesIconUnit4=i.loadingBar;this.$TrendingCategoriesIconUnit5=i.selectedCategoryId;this.$TrendingCategoriesIconUnit6=i.selectedCategoryId;this.$TrendingCategoriesIconUnit7=i.source;this.$TrendingCategoriesIconUnit8=i.enableIconSeeMore;this.$TrendingCategoriesIconUnit9=[];var j=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5];this.$TrendingCategoriesIconUnit10=j?j.getHeight():0;c('TrendingCategoriesIconUnitCallback').register(this);for(var k=c('enumerate')(this.$TrendingCategoriesIconUnit1),l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++];}else{m=k.next();if(m.done)break;n=m.value;}var o=n,p=o[1];this.$TrendingCategoriesIconUnit11(p);}this.$TrendingCategoriesIconUnit12(i.refreshSeconds,i.isExpanded);}h.prototype.setCategoryList=function(i,j){'use strict';this.$TrendingCategoriesIconUnit2[j]=i;if(j===this.$TrendingCategoriesIconUnit5){if(this.$TrendingCategoriesIconUnit4)c('CSS').hide(this.$TrendingCategoriesIconUnit4);this.$TrendingCategoriesIconUnit2[j].showItems();this.$TrendingCategoriesIconUnit10=this.$TrendingCategoriesIconUnit2[j].getHeight();}};h.prototype.$TrendingCategoriesIconUnit11=function(i){'use strict';var j=i.getCategoryId();c('tidyEvent')(c('Event').listen(i.getRoot(),'click',function(){var k=j===this.$TrendingCategoriesIconUnit6&&this.$TrendingCategoriesIconUnit8;if(k){if(j===this.$TrendingCategoriesIconUnit5)return;this.$TrendingCategoriesIconUnit2[j].fetchExtraItems();}if(j===this.$TrendingCategoriesIconUnit5)return;this.$TrendingCategoriesIconUnit1[this.$TrendingCategoriesIconUnit5].unselect();if(this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5]){this.$TrendingCategoriesIconUnit10=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].getHeight();this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].hideItems();}this.$TrendingCategoriesIconUnit1[j].select();this.$TrendingCategoriesIconUnit5=j;if(this.$TrendingCategoriesIconUnit2[j]){if(this.$TrendingCategoriesIconUnit4)c('CSS').hide(this.$TrendingCategoriesIconUnit4);this.$TrendingCategoriesIconUnit2[j].showItems();this.$TrendingCategoriesIconUnit10=this.$TrendingCategoriesIconUnit2[j].getHeight();return;}c('Style').set(this.$TrendingCategoriesIconUnit4,'height',String(this.$TrendingCategoriesIconUnit10));c('CSS').show(this.$TrendingCategoriesIconUnit4);if(this.$TrendingCategoriesIconUnit9[j])return;this.$TrendingCategoriesIconUnit9[j]=true;var l=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit6],m=l.getCategoryItemInfo(),n=c('XPubcontentTrendingCategoriesFetchListController').getURIBuilder().setEnum('category',j).setString('source',this.$TrendingCategoriesIconUnit7).setIntVector('topic_ids_seen',m.visibleTopicIds).getURI();new (c('AsyncRequest'))().setURI(n).send();}.bind(this)));};h.prototype.$TrendingCategoriesIconUnit12=function(i,j){'use strict';var k=i*1000;setTimeout(function(){var l=c('XPubcontentTrendingReplaceTrendsController').getURIBuilder().setBool('is_expanded',j).getURI();new (c('AsyncRequest'))(l).send();},k);};f.exports=h;},null);
__d("XPubcontentTrendingCategoriesInsertItemController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/hide_options\/",{num_removed_topics:{type:"Int",defaultValue:0},trending_topic_id:{type:"Int",required:true},topic_ids:{type:"IntVector",defaultValue:[]},category:{type:"Enum",required:true,enumType:0}});},null);
__d("XPubcontentTrendingHideConfirmController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/hide_confirm\/",{hidden_topic_id:{type:"Int",required:true},position:{type:"Int",defaultValue:0},reason:{type:"Int",required:true},source:{type:"String"},trqid:{type:"Int",defaultValue:-1}});},null);
__d('TrendingCategoriesRHCHide',['csx','cx','AsyncRequest','CSS','DOM','DOMQuery','Event','Parent','React','ReactDOM','TrendingRHCLogger','TrendingTopicHideMenu.react','URI','XPubcontentTrendingCategoriesInsertItemController','XPubcontentTrendingHideConfirmController','tidyEvent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=[],k=[],l=false,m=['webkitAnimationEnd','animationend','mozAnimationEnd','oAnimationEnd','MSAnimationEnd'];function n(q,r){var s=c('DOMQuery').scry(q,"._5my2"),t=s.filter(function(v){var w=Number(v.getAttribute('data-position'));return w>=r;}),u=[];t.forEach(function(v){var w=Number(v.getAttribute('data-position'));v.setAttribute('data-position',w-1);var x=c('DOMQuery').scry(v,"._7ge");x.forEach(function(y){var z=new (c('URI'))(y.getAttribute('href')).addQueryData('position',w-1);u.push({link:y,uri:z.toString()});});});u.forEach(function(v){var w=v.link;w.setAttribute('href',v.uri);});}function o(q,r,s){var t=c('DOMQuery').find(q,"^._2snq"),u=c('DOMQuery').find(q,"^._5my2"),v=c('DOM').create('div',{className:"_4_nj"}),w=Number(u.getAttribute('data-position'));n(t,w);j[s].showExtraItem();j[s].removeItem(u);c('DOM').insertBefore(u,v);m.forEach(function(event){v.addEventListener(event,function(){c('CSS').removeClass(v,"_4_nj");});});var x=c('XPubcontentTrendingHideConfirmController').getURIBuilder().setInt('reason',q.firstChild.value).setInt('hidden_topic_id',r).setInt('position',w);if(c('TrendingRHCLogger').getSource())x.setString('source',c('TrendingRHCLogger').getSource());if(c('TrendingRHCLogger').getQueryID())x.setInt('trqid',c('TrendingRHCLogger').getQueryID());var y=x.getURI();new (c('AsyncRequest'))().setURI(y).setRelativeTo(q).send();}var p={addCategoryList:function(q,r){j[r]=q;},confirmHide:function(q,r,s){var t=false;c('tidyEvent')(c('Event').listen(q,'click',function(){setTimeout(function(){if(t)return;t=true;o(q,r,s,false);},100);}));},onHideReasonClicked:function(q,r){var s=c('DOMQuery').find(q,'input[name="trending_hide_reason"]'),t=parseInt(s.getAttribute('data-topicid'),10);if(k[t])return;k[t]=true;setTimeout(function(){o(q,t,r);k[t]=false;},100);},listenForHide:function(q,r,s){c('tidyEvent')(c('Event').listen(q,'click',function(){var t=c('DOMQuery').find(q,"^._5my2"),u=c('DOMQuery').find(t,"._4_nl"),v=c('DOMQuery').find(t,"._4_nm");c('CSS').hide(v);c('CSS').show(u);if(!l){if(j[s]==null)return;l=true;var w=j[s].getCategoryItemInfo(),x=w.visibleTopicIds.concat(w.hiddenTopicIds,w.removedTopicIds),y=w.removedTopicIds.length,z=c('XPubcontentTrendingCategoriesInsertItemController').getURIBuilder().setInt('trending_topic_id',r).setIntVector('topic_ids',x).setInt('num_removed_topics',y).setEnum('category',s).getURI();new (c('AsyncRequest'))().setURI(z).setRelativeTo(q).setHandler(function(){l=false;}).send();}}));},onHideClicked:function(q,r){var s=parseInt(q.getAttribute('data-topicid'),10),t=c('DOMQuery').find(q,"^._5my2"),u=c('DOM').scry(t,"._4_nl"),v=c('DOMQuery').find(t,"._4_nm");c('CSS').hide(v);if(u.length){u.map(c('CSS').show);}else{var w=c('DOM').create('div');c('ReactDOM').render(c('React').createElement(c('TrendingTopicHideMenu.react'),{topicId:s,category:r}),w);c('DOM').appendContent(t,w);}if(!l){if(j[r]==null)return;l=true;var x=j[r].getCategoryItemInfo(),y=x.visibleTopicIds.concat(x.hiddenTopicIds,x.removedTopicIds),z=x.removedTopicIds.length,aa=c('XPubcontentTrendingCategoriesInsertItemController').getURIBuilder().setInt('trending_topic_id',s).setIntVector('topic_ids',y).setInt('num_removed_topics',z).setEnum('category',r).getURI();new (c('AsyncRequest'))().setURI(aa).setRelativeTo(q).setHandler(function(){l=false;}).send();}},listenForUndo:function(q){var r=c('DOMQuery').find(q,"._4_nn");c('tidyEvent')(c('Event').listen(r,'click',function(){var s=c('DOMQuery').find(q,"^._5my2 ._4_nm");c('CSS').hide(q);c('CSS').show(s);}));},onHideMenuUndoClicked:function(q,r){var s=c('DOMQuery').find(q,"^._4_nl"),t=c('DOMQuery').find(s,"^._5my2 ._4_nm");c('CSS').hide(s);c('CSS').show(t);},hideSeeMoreLink:function(q,r){var s=j[r].getCategoryItemInfo();if(s.hiddenTopicIds.length!==0)return;var t=c('Parent').bySelector(q,"._5my7"),u=c('DOMQuery').scry(t,"a._5my9");if(u&&u.length===1&&c('CSS').shown(u[0]))c('CSS').addClass(u[0],"_4_nk");}};f.exports=p;},null);
__d('TrendingCategoryCloseButton.react',['cx','fbt','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'TrendingCategoryCloseButton',render:function(){var k=i._("Hide Trending Item");return (c('React').createElement('button',{disabled:this.props.reviewertool,title:k,'aria-label':k,type:'submit',value:'1',className:"_19_3"},c('React').createElement('span',{className:"_4v8h",'data-topicid':this.props.item_key})));}});f.exports=j;},null);
__d('TrendingCategoryIcon',['cx','BanzaiLogger','CSS','TrendingEvent'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){'use strict';this.$TrendingCategoryIcon1=j;this.$TrendingCategoryIcon2=k.iconElement;this.$TrendingCategoryIcon3=k.nub;this.$TrendingCategoryIcon4=k.unselectedClass;this.$TrendingCategoryIcon5=k.selectedClass;this.$TrendingCategoryIcon6=k.categoryId;this.$TrendingCategoryIcon7=k.categoryLoggingOffset;this.$TrendingCategoryIcon8=parseInt(k.queryId,10);this.$TrendingCategoryIcon9=k.source;}i.prototype.getRoot=function(){'use strict';return this.$TrendingCategoryIcon1;};i.prototype.getCategoryId=function(){'use strict';return this.$TrendingCategoryIcon6;};i.prototype.select=function(){'use strict';c('CSS').addClass(this.$TrendingCategoryIcon1,"_5nns");c('CSS').addClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon5);c('CSS').removeClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon4);c('CSS').show(this.$TrendingCategoryIcon3);this.$TrendingCategoryIcon10();};i.prototype.unselect=function(){'use strict';c('CSS').removeClass(this.$TrendingCategoryIcon1,"_5nns");c('CSS').addClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon4);c('CSS').removeClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon5);c('CSS').hide(this.$TrendingCategoryIcon3);};i.prototype.$TrendingCategoryIcon10=function(){'use strict';var j={trending_event:c('TrendingEvent').CATEGORY_HEADER_CLICKED,trending_location:this.$TrendingCategoryIcon9,trending_positions:[this.$TrendingCategoryIcon7],query_id:this.$TrendingCategoryIcon8,tagids:[]};c('BanzaiLogger').log('TrendingEventLoggerConfig',j);};f.exports=i;},null);
__d("XPubcontentTrendingCategoriesImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/log_impression\/",{topic_ids_by_position:{type:"IntToIntMap",required:true},source:{type:"String",required:true},query_id:{type:"Int",required:true}});},null);
__d("XPubcontentTrendingCategoriesSeeMoreController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/see_more\/",{topic_ids_seen:{type:"IntVector",defaultValue:[]},num_topics_to_add:{type:"Int",required:true},num_removed_topics:{type:"Int",defaultValue:0},category:{type:"Enum",required:true,enumType:0}});},null);
__d('TrendingCategoryList',['csx','cx','AsyncRequest','CSS','DOM','Event','Parent','TrendingCategoriesRHCHide','TrendingLocation','XPubcontentTrendingCategoriesImpressionLoggingController','XPubcontentTrendingCategoriesSeeMoreController','getStyleProperty','tidyEvent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=['webkitAnimationEnd','animationend','mozAnimationEnd','oAnimationEnd','MSAnimationEnd'];function k(l,m,n,o,p){'use strict';this.$TrendingCategoryList1=l;this.$TrendingCategoryList2=m;this.$TrendingCategoryList3=o;this.$TrendingCategoryList4=p;this.$TrendingCategoryList5=n.category;this.$TrendingCategoryList6=n.rowsAfterSeeMore;this.$TrendingCategoryList9=n.source;this.$TrendingCategoryList7=n.queryId;this.$TrendingCategoryList8=false;c('TrendingCategoriesRHCHide').addCategoryList(this,this.$TrendingCategoryList5);if(n.useDelegateListener)this.$TrendingCategoryList10();this.$TrendingCategoryList11();}k.prototype.showItems=function(){'use strict';c('CSS').show(this.$TrendingCategoryList1);var l=this.getCategoryItemInfo();this.$TrendingCategoryList12(l.visibleTopicIds,l.visiblePositions,this.$TrendingCategoryList9);};k.prototype.hideItems=function(){'use strict';c('CSS').hide(this.$TrendingCategoryList1);};k.prototype.getHeight=function(){'use strict';return c('getStyleProperty')(this.$TrendingCategoryList1,'height');};k.prototype.getCategoryItemInfo=function(){'use strict';var l=[],m=[],n=[],o=[],p=[];c('DOM').scry(this.$TrendingCategoryList1,"._5my2").forEach(function(q){if(c('CSS').matchesSelector(q,"._5my9")||c('CSS').matchesSelector(q,"._5otw"))return;var r=Number(q.getAttribute('data-topicid')),s=Number(q.getAttribute('data-position'));if(c('CSS').matchesSelector(q,"._338c")){p.push(r);}else if(c('CSS').matchesSelector(q,"._5my1")){n.push(r);o.push(s);}else{l.push(r);m.push(s);}});return {visibleTopicIds:l,visiblePositions:m,hiddenTopicIds:n,hiddenPositions:o,removedTopicIds:p};};k.prototype.showExtraItem=function(){var l=this;'use strict';var m=c('DOM').scry(this.$TrendingCategoryList1,"._5my1");if(m.length===0)return;var n=Number.MAX_VALUE,o=null;m.forEach(function(p){var q=parseInt(p.getAttribute('data-position'),10);if(q<n){o=p;n=q;}});if(o!==null)(function(){var p=o;c('CSS').removeClass(p,"_5my1");c('CSS').addClass(p,"_4_ni");c('CSS').show(p);j.forEach(function(event){p.addEventListener(event,function(){c('CSS').removeClass(p,"_4_ni");});});l.$TrendingCategoryList12([Number(p.getAttribute('data-topicid'))],[Number(p.getAttribute('data-position'))],c('TrendingLocation').WWW_HIDDEN_RHC_TRENDING);})();};k.prototype.removeItem=function(l){'use strict';c('CSS').addClass(l,"_338c");c('CSS').hide(l);};k.prototype.fetchExtraItems=function(){'use strict';if(this.$TrendingCategoryList8)return;this.$TrendingCategoryList8=true;if(this.$TrendingCategoryList2!==null)c('CSS').hide(this.$TrendingCategoryList2);var l=this.getCategoryItemInfo(),m=this.$TrendingCategoryList6-l.hiddenTopicIds.length;if(m<=0){this.$TrendingCategoryList13();return;}var n=c('DOM').find(this.$TrendingCategoryList1,"._30_w");c('CSS').show(n);var o=l.visibleTopicIds.concat(l.hiddenTopicIds,l.removedTopicIds),p=c('XPubcontentTrendingCategoriesSeeMoreController').getURIBuilder().setIntVector('topic_ids_seen',o).setInt('num_topics_to_add',m).setInt('num_removed_topics',l.removedTopicIds.length).setEnum('category',this.$TrendingCategoryList5).getURI();new (c('AsyncRequest'))().setURI(p).setRelativeTo(this.$TrendingCategoryList1).setHandler(function(q){c('CSS').hide(n);this.$TrendingCategoryList13();if(this.$TrendingCategoryList3)this.$TrendingCategoryList14();}.bind(this)).send();};k.prototype.$TrendingCategoryList10=function(){'use strict';c('tidyEvent')(c('Event').listen(this.$TrendingCategoryList1,'click',function(event){var l=event.getTarget();if(c('CSS').matchesSelector(l,"._19_3")){var m=c('DOM').find(l,"._4v8h");c('TrendingCategoriesRHCHide').onHideClicked(m,this.$TrendingCategoryList5);return;}else if(c('CSS').matchesSelector(l,"._4v8h")){c('TrendingCategoriesRHCHide').onHideClicked(l,this.$TrendingCategoryList5);return;}var n=c('Parent').bySelector(l,"._2p3m");if(n){c('TrendingCategoriesRHCHide').onHideReasonClicked(n,this.$TrendingCategoryList5);return;}var o=c('Parent').bySelector(l,"._4_nn");if(o){c('TrendingCategoriesRHCHide').onHideMenuUndoClicked(o,this.$TrendingCategoryList5);return;}}.bind(this)));};k.prototype.$TrendingCategoryList14=function(){'use strict';c('CSS').hide(this.$TrendingCategoryList3);c('CSS').show(this.$TrendingCategoryList4);};k.prototype.$TrendingCategoryList11=function(){'use strict';if(this.$TrendingCategoryList2==null)return;c('tidyEvent')(c('Event').listen(this.$TrendingCategoryList2,'click',function(){c('CSS').hide(this.$TrendingCategoryList2);this.fetchExtraItems();}.bind(this)));};k.prototype.$TrendingCategoryList13=function(){'use strict';var l=c('DOM').scry(this.$TrendingCategoryList1,"._5my1");if(l.length===0)return;var m=Math.min(this.$TrendingCategoryList6,l.length),n=[],o=[];for(var p=0;p<m;p++){c('CSS').show(l[p]);c('CSS').removeClass(l[p],"_5my1");n.push(Number(l[p].getAttribute('data-topicid')));o.push(Number(l[p].getAttribute('data-position')));}this.$TrendingCategoryList12(n,o,c('TrendingLocation').WWW_HIDDEN_RHC_TRENDING);};k.prototype.$TrendingCategoryList12=function(l,m,n){'use strict';if(l.length===0)return;var o={};for(var p=0;p<l.length;p++)o[m[p]]=l[p];var q=c('XPubcontentTrendingCategoriesImpressionLoggingController').getURIBuilder().setIntToIntMap('topic_ids_by_position',o).setString('source',n).setInt('query_id',this.$TrendingCategoryList7).getURI();new (c('AsyncRequest'))(q).send();};f.exports=k;},null);