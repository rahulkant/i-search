/*!CK:548883044!*//*1459219102,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["2fCub"]); }

__d("MNCommerceLoggerEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",APP_ID_FETCH_FAILURE:"app_id_fetch_failure",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",SHIPMENT_NOTIF_READY:"shipment_notif_ready",SHIPMENT_NOTIF_SENT:"shipment_notif_sent",ETA_NOTIF_READY:"eta_notif_ready",ETA_NOTIF_SENT:"eta_notif_sent",DELIVERED_NOTIF_READY:"delivered_notif_ready",DELIVERED_NOTIF_SENT:"delivered_notif_sent",OUT_FOR_DELIVERY_NOTIF_READY:"out_for_delivery_notif_ready",OUT_FOR_DELIVERY_NOTIF_SENT:"out_for_delivery_notif_sent",DELAYED_NOTIF_READY:"delayed_notif_ready",DELAYED_NOTIF_SENT:"delayed_notif_sent",IN_TRANSIT_NOTIF_READY:"in_transit_notif_ready",IN_TRANSIT_NOTIF_SENT:"in_transit_notif_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",PLUGIN_MESSAGE_US_CLICK:"plugin_message_us_click",SIMPLE_LINK_PLUGIN_IMPRESSION:"simple_link_plugin_impression",SIMPLE_LINK_PLUGIN_UNCHECKED:"simple_link_plugin_unchecked",SIMPLE_LINK_PLUGIN_LINKED:"simple_link_plugin_linked",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",SEND_BLOCK_ALL_LOG_MESSAGE_EXCEPTION:"send_block_all_log_message_exception",SEND_UNBLOCK_ALL_LOG_MESSAGE_EXCEPTION:"send_unblock_all_log_message_exception",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",NOT_YOU_CLICKED:"not_you_clicked",PRODUCT_SUBSCRIPTION_CLICKED:"product_subscription_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",NOW_IN_STOCK:"nowinstock",NOTIFY_ME:"notifyme",PROMOTIONAL_MESSAGE:"promotionalmessage",RETAIL_CANCELLATIONS:"retailcancellations",RETAIL_RECEIPTS:"retailreceipts",UPDATE_RECEIPTS:"updatereceipts",RETAIL_SHIPMENTS:"retailshipments",RETAIL_UPDATE_RECEIPTS:"retailupdatereceipts",AIRLINE_ITINERARY:"airlineitinerary",AIRLINE_REMINDER:"airlinereminder",AIRLINE_CHECKIN:"airlinecheckin",AIRLINE_UPDATE:"airlineupdate",AIRLINE_BOARDINGPASS:"airlineboardingpass",BILL_PAYMENT_REQUEST:"billpaymentrequest",SIMPLE_LINK_WITH_STATE:"simplelinkwithstate",BUSINESS_MESSAGE:"businessmessage",MARK_SPAM:"spam",PROMOTION_CREATION_ATTEMPTED:"promotion_creation_attempted",PROMOTION_ENT_CREATED:"promotion_ent_created",PROMOTION_SCHEDULED:"promotion_scheduled",PROMOTION_KILLED:"promotion_killed",PROMOTION_USER_ATTEMPTED:"promotion_user_attempted",PROMOTION_USER_GK_FAILED:"promotion_user_gk_failed",PROMOTION_USER_GK_PASSED:"promotion_user_gk_passed",PROMOTION_USER_ALREADY_LINKED:"promotion_user_already_linked",PROMOTION_USER_NOT_LINKED:"promotion_user_not_linked",PROMOTION_USER_PREVIOUSLY_UNLINKED:"promotion_user_previously_unlinked",PROMOTION_USER_BLOCKED_PROMOTION:"promotion_user_blocked_promotion",PROMOTION_USER_SEND_MESSAGE_EXCEPTION:"promotion_user_send_message_exception",PROMOTION_ATOMIC_MESSAGE_SENT:"promotion_atomic_message_sent",PROMOTION_LOG_MESSAGE_SENT:"promotion_log_message_sent",PROMOTION_ROBOTEXT_SENT:"promotion_robotext_sent",PROMOTION_ATTACHMENT_SENT:"promotion_attachment_sent",PROMOTION_ASYNC_JOB_ERROR:"promotion_async_job_error",USER_CONTROL_BLOCKED_ALL:"user_control_blocked_all",USER_CONTROL_BLOCKED_PROMOTION:"user_control_blocked_promotion",USER_CONTROL_UNBLOCKED_ALL:"user_control_unblocked_all",USER_CONTROL_UNBLOCKED_PROMOTION:"user_control_unblocked_promotion",M_SUGGESTION_CALL:"m_suggestion_call",M_SUGGESTION_ENT_CREATED:"m_suggestion_ent_created",M_SUGGESTION_LINK_IF_NECESSARY:"m_suggestion_link_if_necessary",M_SUGGESTION_SEND_MESSAGE:"m_suggestion_send_message",GEN_CANCELLATION_ENT:"gen_cancellation_ent",CANCELLATION_NOTIFICATION_READY:"cancellation_notification_ready",CANCELLATION_NOTIFICATION_SENT:"cancellation_notification_sent",LIVECHAT_HISTORY_USER_FETCH_FAILURE:"livechat_history_user_fetch_failure",LIVECHAT_HISTORY_PAGE_FETCH_FAILURE:"livechat_history_page_fetch_failure",LIVECHAT_HISTORY_API_SUCCESS:"livechat_history_api_success",LIVECHAT_HISTORY_API_FAILURE:"livechat_history_api_failure",ECOMMERCE_EVENT_CALL:"ecommerce_event_call",ECOMMERCE_EVENT_DATA_VALIDATED:"ecommerce_event_data_validated",ECOMMERCE_EVENT_SECURITY_CHECKED:"ecommerce_event_security_checked",ECOMMERCE_EVENT_MESSAGE_SENT:"ecommerce_event_message_sent",ECOMMERCE_EVENT_INVALID_SENDER:"ecommerce_event_invalid_sender",ECOMMERCE_EVENT_MULTIPLE_WELCOME_MESSAGE_NOT_ALLOWED:"ecommerce_event_multiple_welcome_message_not_allowed",ECOMMERCE_EVENT_NO_OPT_IN:"ecommerce_event_no_opt_in",ECOMMERCE_EVENT_HANDLER_EXCEPTION:"ecommerce_event_handler_exception",PROMOTION_CTA_CLICKED:"promotion_cta_clicked",LINK_CLICK:"link_click"};},null);
__d("PUWUploaders",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={HTML5:"html5",FLASH:"flash"};},null);
__d('BUISwitch.react',['cx','fbt','Event','Keys','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'BUISwitch',propTypes:{animate:j.bool,disabled:j.bool,onToggle:j.func,showLabel:j.bool,value:j.bool.isRequired},getDefaultProps:function(){return {animate:true};},render:function(){return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:"_128j"+(this.props.value?' '+"_128k":'')+(!this.props.value?' '+"_128l":'')+(this.props.disabled?' '+"_128m":'')+(this.props.animate?' '+"_128n":''),role:'checkbox','aria-checked':this.props.value?'true':'false'}),c('React').createElement('div',{className:"_128o",onClick:this._onClick,onKeyDown:this._onKeyDown,onMouseDown:this._preventFocus,tabIndex:this.props.disabled?'-1':'0'},c('React').createElement('div',{className:"_128p"})),this._renderLabel()));},_renderLabel:function(){if(!this.props.showLabel)return null;return (c('React').createElement('span',{className:"_128q"},this.props.value?i._("ON"):i._("OFF")));},_onClick:function(event){if(this.props.disabled)return;this.props.onToggle&&this.props.onToggle(!this.props.value);},_onKeyDown:function(event){if(this.props.disabled)return;var l=c('Event').getKeyCode(event);if(l===c('Keys').RETURN||l===c('Keys').SPACE)this.props.onToggle&&this.props.onToggle(!this.props.value);},_preventFocus:function(event){event.preventDefault();}});f.exports=k;},null);
__d('AutoPager.react',['DOM','Event','OnVisible','Parent','React','ReactDOM','SubscriptionsHandler','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'AutoPager',propTypes:{className:h.string,onEnterBuffer:h.number.isRequired,onVisible:h.func.isRequired,scrollableAreaClass:h.string},componentDidMount:function(){if(this.props.scrollableAreaClass){this.scrollableArea=c('Parent').byClass(c('ReactDOM').findDOMNode(this),this.props.scrollableAreaClass);var j=c('DOM').find(this.scrollableArea,'.uiScrollableAreaWrap');}else j=window;this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(c('Event').listen(j,'scroll',c('throttle')(this.onScroll,100)));},componentWillUnmount:function(){this.getViewportListener().remove();this.subscriptions.release();},getViewportListener:function(){if(!this.onEnterViewportListener)this.onEnterViewportListener=new (c('OnVisible'))(c('ReactDOM').findDOMNode(this),function(){return this.props.onVisible();}.bind(this),false,this.props.onEnterBuffer,false,this.scrollableArea);return this.onEnterViewportListener;},onScroll:function(){this.getViewportListener().reset();},render:function(){return c('React').createElement('div',{className:this.props.className});}});f.exports=i;},null);
__d('ResizeListener',['EventListener','SubscriptionList','requestAnimationFrame'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=void 0,i=false,j=new (c('SubscriptionList'))(function(){h=c('EventListener').listen(window,'resize',k);},function(){h.remove();});function k(){if(!i){i=true;c('requestAnimationFrame')(function(){j.fireCallbacks();i=false;});}}f.exports=j;},null);
__d('ScrollablePhotoViewStateCore',['emptyFunction','SubscriptionsHandler'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$ScrollablePhotoViewStateCore1=i.photoStore;this.$ScrollablePhotoViewStateCore2=i.viewer;this.$ScrollablePhotoViewStateCore3=i.setToken;this.$ScrollablePhotoViewStateCore4=i.updateCallback;this.$ScrollablePhotoViewStateCore5=i.subscribeUpdatePhotos;this.$ScrollablePhotoViewStateCore6=i.fetchInitData;this.$ScrollablePhotoViewStateCore7=i.initBatchSize;this.$ScrollablePhotoViewStateCore8=i.pageBatchSize;this.$ScrollablePhotoViewStateCore9=new (c('SubscriptionsHandler'))();}h.prototype.initViewState=function(){'use strict';this.$ScrollablePhotoViewStateCore9.addSubscriptions(this.$ScrollablePhotoViewStateCore5(this.updateData.bind(this)));if(this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)){var i=this.$ScrollablePhotoViewStateCore1.getAvailableRange(this.$ScrollablePhotoViewStateCore3).length;if(i>=this.$ScrollablePhotoViewStateCore7||!this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3))this.syncState();return;}this.$ScrollablePhotoViewStateCore6(this.$ScrollablePhotoViewStateCore3);};h.prototype.hasNextPage=function(){'use strict';return (this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)&&this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3));};h.prototype.fetchToIndex=function(i){'use strict';var j=this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),k=i-j;if(k<=0)return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,j,k,c('emptyFunction'));};h.prototype.fetchMore=function(i){'use strict';if(!this.hasNextPage())return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),this.$ScrollablePhotoViewStateCore8,i||c('emptyFunction'));};h.prototype.destroy=function(){'use strict';this.$ScrollablePhotoViewStateCore9.release();};h.prototype.updateData=function(i){'use strict';if(i.set_id!=this.$ScrollablePhotoViewStateCore3)return;var j=i.query_results&&i.query_results.result_type;if(j=='init'){this.$ScrollablePhotoViewStateCore1.executePostCreate(this.$ScrollablePhotoViewStateCore3,function(){this.syncState();}.bind(this));}else this.syncState();};f.exports=h;},null);
__d('AsyncUploadQueue',['AsyncUploadBase'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AsyncUploadBase'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._pending=[];this._waiting=[];}j.prototype.enqueue=function(k,l,m){'use strict';return this._add(this._waiting.push.bind(this._waiting),k,l,m);};j.prototype.prepend=function(k,l,m){'use strict';return this._add(this._waiting.unshift.bind(this._waiting),k,l,m);};j.prototype._add=function(k,l,m,n){'use strict';var o=babelHelpers['extends']({},this._data,n),p=this._createFileUpload(l,m,o);k(p);this._processQueue();return p;};j.prototype.dequeue=function(k){'use strict';this._abort(k);};f.exports=j;},null);
__d('Waiter',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$Waiter1=i;this.$Waiter2=0;this.$Waiter3=false;}h.prototype.wait=function(i){'use strict';var j=this,k=false;this.$Waiter4();return function(){if(k)return;for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];i&&i.apply(this,m);j.$Waiter5();k=true;};};h.prototype.go=function(){'use strict';this.$Waiter3=true;this.$Waiter6();return this;};h.prototype.$Waiter4=function(){'use strict';this.$Waiter2++;};h.prototype.$Waiter6=function(){'use strict';if(!this.$Waiter2&&this.$Waiter3)this.$Waiter1();};h.prototype.$Waiter5=function(){'use strict';this.$Waiter2--;this.$Waiter6();};f.exports=h;},null);
__d('SavedResponsesListView.react',['cx','React','SavedResponsesListItem.react','SavedResponsesUtils','XUISpinner.react'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){if(this.props.isLoadingResponses)return (c('React').createElement('div',{className:"_e19"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var m=this.props.searchQuery.trim().toLowerCase(),n=function(p){return (p.message.toLowerCase().indexOf(m)!==-1||(p.title||'').toLowerCase().indexOf(m)!==-1);},o=c('SavedResponsesUtils').sortSavedResponses(this.props.responses,this.props.sortingKey);return (c('React').createElement('ul',{className:this.props.shouldAdjustRightMargin?"_e1a":''},o.filter(n).map(function(p){return (c('React').createElement(c('SavedResponsesListItem.react'),{key:p.id,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,response:p,tokens:this.props.supportedMacros}));}.bind(this))));};l.propTypes={isLoadingResponses:k.bool.isRequired,onResponseHover:k.func,onResponseSelected:k.func.isRequired,onResponseUnhover:k.func,pageID:k.string.isRequired,responses:k.array.isRequired,searchQuery:k.string.isRequired,shouldAdjustRightMargin:k.bool};f.exports=l;},null);
__d('PagesManagerMessagingThreadTitle.react',['cx','fbt','ix','ContextualDialogArrow','ContextualLayerAutoFlip','Image.react','InlineBlock.react','LeftRight.react','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadTitle.react','PagesManagerMessagingBatchActionMenu.react','PagesMessengerThreadUtils','PagesMessagingActionPlacement','MercuryParticipantListRenderer','XUIPopoverButton.react','React'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);this.state={href:'',userName:null,imageSource:null,menuShown:false};}m.prototype.$PagesManagerMessagingThreadTitle1=function(n){'use strict';if(n&&n.other_user_fbid){var o=c('MercuryIDs').getParticipantIDFromUserID(n.other_user_fbid);c('MercuryParticipants').get(o,function(p){var q=new (c('MercuryParticipantListRenderer'))().renderParticipantList([p]);this.setState({userName:q,href:p.href,imageSource:p.image_src});}.bind(this));}};m.prototype.componentWillMount=function(){'use strict';this.$PagesManagerMessagingThreadTitle1(this.props.thread);};m.prototype.componentWillReceiveProps=function(n){'use strict';this.$PagesManagerMessagingThreadTitle1(n.thread);};m.prototype.$PagesManagerMessagingThreadTitle2=function(){'use strict';if(this.props.updatedUI){return (c('React').createElement('div',null,this.state.imageSource?c('React').createElement(c('Image.react'),{className:"_3stv",src:this.state.imageSource}):c('React').createElement('div',{className:"_3stv"}),c('React').createElement(c('InlineBlock.react'),{className:"_3ak8 _3-9a"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:false}),c('React').createElement(c('Link.react'),{href:this.state.href?this.state.href:'',target:'_blank'},i._("View Profile")))));}else return (c('React').createElement(c('MercuryThreadTitle.react'),{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:false}));};m.prototype.render=function(){'use strict';if(this.props.thread===null||this.props.thread===undefined)return c('React').createElement('div',{className:"_174o"});var n=c('PagesMessengerThreadUtils').getBatchActionMenuParam(this.props.thread);n.showMarkRead=false;n.showMarkUnread=false;n.showHideContextCard=this.props.isContextCardEnabled&&!this.props.isContextCardHidden;n.showShowContextCard=this.props.isContextCardEnabled&&this.props.isContextCardHidden;var o=!this.props.updatedUI?c('React').createElement(c('Image.react'),{className:"_3lq_",onClick:function(event){return event.stopPropagation();},src:j('/images/mobile/chrome/ui/divebar/settings_gear.png')}):c('React').createElement(c('XUIPopoverButton.react'),{label:i._("Actions")});return (c('React').createElement(c('LeftRight.react'),{className:(!this.props.updatedUI?"_174o":'')+(this.props.updatedUI?' '+"_3stw":'')},this.$PagesManagerMessagingThreadTitle2(),c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),{alignh:'right',layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],onHide:function(){this.setState({menuShown:false});}.bind(this),onShow:function(){this.setState({menuShown:true});}.bind(this),pageID:this.props.pageID,inlineActionParam:n,placement:c('PagesMessagingActionPlacement').THREAD_TITLE_BAR,selectedRows:[this.props.thread&&this.props.thread.thread_id],showBanFromPage:this.props.isBanFromPageEnabled,showBatchAction:true,userID:this.props.thread?this.props.thread.other_user_fbid:null,userName:this.state?this.state.userName:null},o)));};f.exports=m;},null);
__d('PagesManagerNavigationUnit',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.$PagesManagerNavigationUnit1=j;}i.prototype.getDisplayTitle=function(){h(0);};i.prototype.getKey=function(){return this.$PagesManagerNavigationUnit1;};i.prototype.getNotificationCount=function(j,k){return 0;};f.exports=i;},null);
__d('fetchInitPhotoViewState',['AsyncRequest'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){new (c('AsyncRequest'))(i).setData({set:j}).send();}f.exports=h;},null);
__d('subscribeToArbiterUpdatePhotos',['Arbiter'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return c('Arbiter').subscribe('update-photos',function(j,k){i(k);});}f.exports=h;},null);
__d('DragDropFilePicker',['DragDropTarget','mixin','ArbiterMixin','FilePickerEvent','FileSelectionContainer','createArrayFromMixed','SelectionSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$DragDropFilePicker1=new (c('DragDropTarget'))(k);if(l.onDocumentDragEnterCallback)this.$DragDropFilePicker1.setOnDocumentDragEnterCallback(l.onDocumentDragEnterCallback);if(l.onDocumentDragLeaveCallback)this.$DragDropFilePicker1.setOnDocumentDragLeaveCallback(l.onDocumentDragLeaveCallback);if(l.onDragEnterCallback)this.$DragDropFilePicker1.setOnDragEnterCallback(l.onDragEnterCallback);if(l.onDragLeaveCallback)this.$DragDropFilePicker1.setOnDragLeaveCallback(l.onDragLeaveCallback);this.$DragDropFilePicker1.setOnFilesDropCallback(function(m){var n=c('createArrayFromMixed')(m).filter(function(o){return !l.isFileValid||l.isFileValid(o);}).map(function(o){return new (c('FileSelectionContainer'))(o);});if(n.length>0){this.inform(c('FilePickerEvent').SELECTED,{sender:this,source:c('SelectionSource').FILE,selections:n});}else l.onDocumentDragLeaveCallback.call(null);}.bind(this));this.$DragDropFilePicker1.enable();}j.prototype.disable=function(){'use strict';this.$DragDropFilePicker1.disable();};f.exports=j;},null);
__d('ExistingPhotoSelectionContainer',['BaseSelectionContainer'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('BaseSelectionContainer'));i=h&&h.prototype;function j(k,l,m){'use strict';i.constructor.call(this);this.$ExistingPhotoSelectionContainer1=k;this.$ExistingPhotoSelectionContainer2=l;this.$ExistingPhotoSelectionContainer3=m;}j.prototype.getExistingImageID=function(){'use strict';return this.$ExistingPhotoSelectionContainer1;};j.prototype.getSrc=function(){'use strict';return this.$ExistingPhotoSelectionContainer2;};j.prototype.getSource=function(){'use strict';return this.$ExistingPhotoSelectionContainer3;};j.prototype.hasPlaceholderUI=function(){'use strict';return true;};f.exports=j;},null);
__d('ExistingPhotoPicker',['ArbiterMixin','mixin','FilePickerEvent','ExistingPhotoSelectionContainer'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$ExistingPhotoPicker1=k;}j.prototype.begin=function(){'use strict';this.inform(c('FilePickerEvent').BEGIN);};j.prototype.select=function(k,l){'use strict';this.inform(c('FilePickerEvent').SELECTED,{sender:this,selections:[new (c('ExistingPhotoSelectionContainer'))(k,l,this.$ExistingPhotoPicker1)]});};f.exports=j;},null);
__d('OmnipickerDispatcher',['Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('Dispatcher_DEPRECATED'))();},null);
__d('OmnipickerActions',['OmnipickerDispatcher','clamp','keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({APP_INITIALIZED:null,FILE_PICKER_SELECT_STARTED:null,FILE_PICKER_SELECTED:null,FILE_PICKER_SELECT_CANCELED:null,EXISTING_PHOTOS_FETCHED:null,PANEL_INITIALIZED:null,PHOTO_SELECTED_OPTIMISTICALLY:null,PHOTO_SOURCE_SELECTED:null,RESIZE_FAILED:null,RESIZE_STARTED:null,RESIZE_SUCCEEDED:null,SELECTION_CHANGED:null,UPLOAD_CANCELED:null,UPLOAD_FAILED:null,UPLOAD_FINISHED:null,UPLOAD_PROGRESSED:null,UPLOAD_QUEUED:null,UPLOAD_STARTED:null}),i={types:h,appInitialized:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.APP_INITIALIZED,appID:j,logger:k,initialSource:l});},panelInitialized:function(j,k){c('OmnipickerDispatcher').dispatch({type:h.PANEL_INITIALIZED,appID:j,source:k});},photoSourceSelected:function(j,k){c('OmnipickerDispatcher').dispatch({type:h.PHOTO_SOURCE_SELECTED,appID:j,source:k});},filePickerSelectStarted:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECT_STARTED,appID:j,method:k,ref:l});},filePickerSelected:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECTED,appID:j,method:k,ref:l});},filePickerSelectCancelled:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.FILE_PICKER_SELECT_CANCELED,appID:j,method:k,ref:l});},resizeFailed:function(j,k,l,m){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_FAILED,appID:j,dt:k,bytes:l,errorCode:m});},resizeStarted:function(j){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_STARTED,appID:j});},resizeSucceeded:function(j,k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.RESIZE_SUCCEEDED,appID:j,dt:k,bytes:l,originalSize:m,customTags:n});},uploadQueued:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_QUEUED,appID:j,source:k,ids:l.map(function(m){return m.getSelectionContainerID();}),volume:l.length});},selectionChanged:function(j,k,l,m){c('OmnipickerDispatcher').dispatch({type:h.SELECTION_CHANGED,appID:j,source:k,id:l,checked:m});},uploadStart:function(j,k,l,m){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_STARTED,appID:j,source:k,id:l,bytes:m});},uploadProgress:function(j,k,l,m){var n=c('clamp')(m.bytesTransferred/m.file.size*100,0,100);c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_PROGRESSED,appID:j,source:k,id:l,progress:n});},uploadDone:function(j,k,l,m,n,o){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_FINISHED,appID:j,source:k,id:l,src:m,fbid:n,retriesNeeded:o});},uploadFailed:function(j,k,l,m,n){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_FAILED,appID:j,source:k,id:l,retriesNeeded:m,errorCode:n});},existingPhotosFetched:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.EXISTING_PHOTOS_FETCHED,appID:j,photos:l.map(function(m){return {source:k,id:m.id,src:m.image.uri};})});},optimisticSelect:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.PHOTO_SELECTED_OPTIMISTICALLY,appID:j,source:k,id:l});},cancelUpload:function(j,k,l){c('OmnipickerDispatcher').dispatch({type:h.UPLOAD_CANCELED,appID:j,source:k,id:l});}};f.exports=i;},null);
__d('OmnipickerDialogRenderer',['DOM','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this.$OmnipickerDialogRenderer1=i;this.$OmnipickerDialogRenderer2=i.props.$OmnipickerDialogRenderer2;if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c('DOM').create('div');c('DOM').appendContent(document.body,this.$OmnipickerDialogRenderer2);}}h.prototype.show=function(){if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c('DOM').create('div');c('DOM').appendContent(document.body,this.$OmnipickerDialogRenderer2);}c('ReactDOM').render(this.$OmnipickerDialogRenderer1,this.$OmnipickerDialogRenderer2);};h.prototype.hide=function(){c('ReactDOM').unmountComponentAtNode(this.$OmnipickerDialogRenderer2);c('DOM').remove(this.$OmnipickerDialogRenderer2);this.$OmnipickerDialogRenderer2=null;};h.prototype.isShowing=function(){return !!this.$OmnipickerDialogRenderer2;};f.exports=h;},null);
__d('OmnipickerUploadController',['OmnipickerActions','SelectionSource'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$OmnipickerUploadController1={};}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadController1[i]={};};h.prototype.registerAdapter=function(i,j,k){this.$OmnipickerUploadController1[i][k]=j;var l=c('SelectionSource').toPhotoSourceType(k);j.subscribe('maxReached',function(){});j.subscribe('resize_start',this.$OmnipickerUploadController2.bind(this,i));j.subscribe('resize_done',this.$OmnipickerUploadController3.bind(this,i));j.subscribe('resize_hires_start',function(){});j.subscribe('upload_start',this.$OmnipickerUploadController4.bind(this,i,l));j.subscribe('upload_progress',this.$OmnipickerUploadController5.bind(this,i,l));j.subscribe('upload_done',this.$OmnipickerUploadController6.bind(this,i,l));j.subscribe('upload_failed',this.$OmnipickerUploadController7.bind(this,i,l));j.subscribe('finished',function(){});};h.prototype.uploadSelections=function(i,j,k,l){if(!k.every(function(o){return o.getSource()==j;}))throw "Selections' source must be "+j;var m=this.$OmnipickerUploadController1[i][j],n=c('SelectionSource').toPhotoSourceType(j);if(!m){k.forEach(function(o){var p=o.getExistingImageID(),q=o.getSrc();c('OmnipickerActions').uploadDone(i,n,p,q,p,0);});return;}if(!k[0].hasPlaceholderUI())c('OmnipickerActions').uploadQueued(i,n,k);m.uploadSelections(k,l);};h.prototype.cancelUpload=function(i,j,k){c('OmnipickerActions').cancelUpload(i,j,k);};h.prototype.$OmnipickerUploadController2=function(i,event,j){c('OmnipickerActions').resizeStarted(i);};h.prototype.$OmnipickerUploadController3=function(i,event,j){var k=j.scubaData.scuba_ints,l=k.timeResizing||k.dt,m=k.resizedSize;if(j.error){c('OmnipickerActions').resizeFailed(i,l,m,j.error.message);}else c('OmnipickerActions').resizeSucceeded(i,l,m,k.originalSize,{skipped_resizing:j.scubaData.scuba_tags.skippedResizing});};h.prototype.$OmnipickerUploadController4=function(i,j,event,k){c('OmnipickerActions').uploadStart(i,j,k.uploadID,k.size);};h.prototype.$OmnipickerUploadController5=function(i,j,event,k){c('OmnipickerActions').uploadProgress(i,j,k.uploadID,k);};h.prototype.$OmnipickerUploadController6=function(i,j,event,k){c('OmnipickerActions').uploadDone(i,j,k.uploadID,k.response.src,k.response.fbid,k.retriesNeeded);};h.prototype.$OmnipickerUploadController7=function(i,j,event,k){c('OmnipickerActions').uploadFailed(i,j,k.uploadID,k.retriesNeeded,k.response_error);};f.exports=new h();},null);
__d('OmnipickerUploadSession',['FilePickerEvent','OmnipickerActions','OmnipickerUploadController','PhotoSourceTypes','SubscriptionsHandler'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$OmnipickerUploadSession1={};}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadSession1[i]={pickersData:[]};};h.prototype.addPicker=function(i,j,k,l){var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(j.subscribe(c('FilePickerEvent').SELECT_START,function(n,o){c('OmnipickerActions').filePickerSelectStarted(i,l,k);}),j.subscribe(c('FilePickerEvent').SELECTED,function(n,o){if(o.selections&&o.selections.length>0){c('OmnipickerActions').filePickerSelected(i,l,k);var p=o.selections[0].getSource();c('OmnipickerUploadController').uploadSelections(i,p,o.selections);}}),j.subscribe(c('FilePickerEvent').SELECT_CANCELED,function(n,o){c('OmnipickerActions').filePickerSelectCancelled(i,l,k);}));this.$OmnipickerUploadSession1[i].pickersData.push({picker:j,subscriptions:m});};h.prototype.removePicker=function(i,j){var k=this.$OmnipickerUploadSession1[i].pickersData;k.forEach(function(l,m){if(l.picker===j){l.subscriptions.release();k.splice(m,1);}});};h.prototype.cancelUpload=function(i,j,k){if(j!==c('PhotoSourceTypes').COMPUTER)throw 'Can only cancel '+c('PhotoSourceTypes').COMPUTER+' uploads. '+'Actual source: '+j;c('OmnipickerUploadController').cancelUpload(i,j,k);};f.exports=new h();},null);
__d('OmnipickerWaterfallLogger',['PhotosUploadWaterfallXMixin','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('PhotosUploadWaterfallXMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$OmnipickerWaterfallLogger1=k;this.$OmnipickerWaterfallLogger2=l;}j.prototype.getWaterfallAppName=function(){'use strict';return this.$OmnipickerWaterfallLogger1;};j.prototype.getWaterfallID=function(){'use strict';return this.$OmnipickerWaterfallLogger2;};f.exports=j;},null);
__d('OmnipickerLoggerStore',['invariant','OmnipickerActions','FluxStore','OmnipickerDispatcher','PUWSteps'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('OmnipickerActions').types;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerLoggerStore1={};}l.prototype.__onDispatch=function(m){if(m.type===k.APP_INITIALIZED){!m.logger?h(0):void 0;this.$OmnipickerLoggerStore1[m.appID]=m.logger;return;}var n=this.$OmnipickerLoggerStore1[m.appID];!n?h(0):void 0;switch(m.type){case k.FILE_PICKER_SELECT_STARTED:case k.FILE_PICKER_SELECTED:case k.FILE_PICKER_SELECT_CANCELED:this.$OmnipickerLoggerStore2(m,n);break;case k.RESIZE_STARTED:n.logStep(c('PUWSteps').CLIENT_UPLOAD_BEGIN);n.logStep(c('PUWSteps').CLIENT_PROCESS_BEGIN);break;case k.RESIZE_SUCCEEDED:n.logStep(c('PUWSteps').CLIENT_PROCESS_SUCCESS,{dt:m.dt,bytes:m.bytes,media_data_size:m.originalSize,custom_tags:m.customTags});break;case k.RESIZE_FAILED:n.logStep(c('PUWSteps').CLIENT_PROCESS_FAIL,{dt:m.dt,bytes:m.bytes,error_code:m.errorCode});break;case k.UPLOAD_STARTED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_BEGIN,{bytes:m.bytes,ref:m.source});break;case k.UPLOAD_FINISHED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_SUCCESS,{auto_retry_count:m.retriesNeeded,ref:m.source});n.logStep(c('PUWSteps').CLIENT_UPLOAD_SUCCESS,{fbid:m.fbid,ref:m.source});break;case k.UPLOAD_FAILED:n.logStep(c('PUWSteps').CLIENT_UPLOAD_FAIL,{auto_retry_count:m.retriesNeeded,error_code:m.errorCode,ref:m.source});break;case k.UPLOAD_QUEUED:n.logStep(c('PUWSteps').CLIENT_TRANSFER_BATCH_BEGIN,{ref:m.source,volume:m.volume});break;default:}};l.prototype.$OmnipickerLoggerStore2=function(m,n){var o;switch(m.type){case k.FILE_PICKER_SELECT_STARTED:o=c('PUWSteps').CLIENT_SELECT_BEGIN;break;case k.FILE_PICKER_SELECTED:o=c('PUWSteps').CLIENT_SELECT_SUCCESS;break;case k.FILE_PICKER_SELECT_CANCELED:o=c('PUWSteps').CLIENT_SELECT_CANCEL;break;default:h(0);}var p=m.method,q=m.ref;n.logStep(o,{method:p,ref:q});};f.exports=new l(c('OmnipickerDispatcher'));},null);
__d('OmnipickerPanelList.react',['cx','ix','Image.react','OmnipickerActions','PhotoSourceTypes','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'OmnipickerPanelList',propTypes:{appID:j.string.isRequired,photoData:j.object.isRequired,doneSelecting:j.bool.isRequired,selectedSourceType:j.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired},componentWillMount:function(){c('React').Children.forEach(this.props.children,function(l){if(!l)return;var m=this.props.appID;c('OmnipickerActions').panelInitialized(m,l.props.sourceType);}.bind(this));},render:function(){var l=null;if(this.props.doneSelecting)l=c('React').createElement('div',{className:"_5e8d"},c('React').createElement('div',{className:"_5e8e"},c('React').createElement(c('Image.react'),{className:"_5e8o",src:i('/images/photos/omnipicker/mountain_sun.png')})));var m;if(this.props.children.length){m=this.props.children.find(function(n){if(!n)return false;return n.props.sourceType===this.props.selectedSourceType;}.bind(this));}else m=this.props.children;m=c('React').cloneElement(m,{photoData:this.props.photoData,appID:this.props.appID});return (c('React').createElement('div',null,l,c('React').createElement('div',{className:"_5gfy"},m)));}});f.exports=k;},null);
__d('OmnipickerPhotoSourceStore',['OmnipickerActions','FluxStore','OmnipickerDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('OmnipickerActions').types;h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$OmnipickerPhotoSourceStore1={};}k.prototype.__onDispatch=function(l){switch(l.type){case j.APP_INITIALIZED:this.$OmnipickerPhotoSourceStore1[l.appID]={currentSource:l.initialSource};break;case j.PHOTO_SOURCE_SELECTED:this.$OmnipickerPhotoSourceStore1[l.appID].currentSource=l.source;this.__emitChange();break;default:return;}};k.prototype.getCurrentSource=function(l){return this.$OmnipickerPhotoSourceStore1[l].currentSource;};f.exports=new k(c('OmnipickerDispatcher'));},null);
__d('OmnipickerPhotoUploadState',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({NOT_STARTED:null,UPLOADING:null,DONE:null,FAILED:null});f.exports=h;},null);
__d('OmnipickerPhotoStore',['invariant','OmnipickerActions','FluxStore','OmnipickerDispatcher','OmnipickerPhotoUploadState'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('OmnipickerActions').types;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerPhotoStore1={};}l.prototype.__onDispatch=function(m){!m.appID?h(0):void 0;var n=this.$OmnipickerPhotoStore1[m.appID];if(n){var o=n.deletedPhotos;if(o&&o[m.id])return;}switch(m.type){case k.APP_INITIALIZED:this.$OmnipickerPhotoStore2(m);return;case k.PANEL_INITIALIZED:this.$OmnipickerPhotoStore3(m);return;case k.EXISTING_PHOTOS_FETCHED:this.$OmnipickerPhotoStore4(m);break;case k.PHOTO_SELECTED_OPTIMISTICALLY:this.$OmnipickerPhotoStore5(m);break;case k.SELECTION_CHANGED:this.$OmnipickerPhotoStore6(m);break;case k.UPLOAD_CANCELED:this.$OmnipickerPhotoStore7(m);break;case k.UPLOAD_FAILED:this.$OmnipickerPhotoStore8(m);break;case k.UPLOAD_FINISHED:this.$OmnipickerPhotoStore9(m);break;case k.UPLOAD_PROGRESSED:this.$OmnipickerPhotoStore10(m);break;case k.UPLOAD_QUEUED:this.$OmnipickerPhotoStore11(m);break;case k.UPLOAD_STARTED:this.$OmnipickerPhotoStore12(m);break;default:return;}this.__emitChange();};l.prototype.getState=function(m){var n=this.$OmnipickerPhotoStore1[m];return {numPhotosSelected:this.$OmnipickerPhotoStore13(n).length,photosOptimisticallyUploading:n.photosOptimisticallyUploading,photosWaitingForUpload:n.photosWaitingForUpload,photoData:n.photos};};l.prototype.getSelectedPhotos=function(m){var n=this.$OmnipickerPhotoStore1[m];return this.$OmnipickerPhotoStore13(n,n.uploadOrder).filter(function(o){return o.fbid!=='';});};l.prototype.$OmnipickerPhotoStore13=function(m,n){var o=n||m.photos,p=[];Object.keys(m.photos).forEach(function(q){var r=Array.isArray(o[q])?o[q]:Object.keys(o[q]);r.forEach(function(s){var t=this.$OmnipickerPhotoStore14(m,q,s);if(t.checked)if(t)p.push(t);}.bind(this));}.bind(this));return p;};l.prototype.$OmnipickerPhotoStore14=function(m,n,o){var p=m.photos;!p[n]?h(0):void 0;var q=p[n][o];!q?h(0):void 0;return q;};l.prototype.$OmnipickerPhotoStore15=function(m){this.$OmnipickerPhotoStore16(m,['source','id']);return this.$OmnipickerPhotoStore14(this.$OmnipickerPhotoStore1[m.appID],m.source,m.id);};l.prototype.$OmnipickerPhotoStore17=function(m,n){!m.hasOwnProperty(n)?h(0):void 0;!(m[n]!==undefined&&m[n]!==null)?h(0):void 0;};l.prototype.$OmnipickerPhotoStore16=function(m,n){n.push('appID');n.forEach(function(o){return this.$OmnipickerPhotoStore17(m,o);}.bind(this));};l.prototype.$OmnipickerPhotoStore18=function(m,n,o){var p=m.photos;!p[n]?h(0):void 0;!!p[n][o]?h(0):void 0;m.uploadOrder[n].push(o);return p[n][o]={id:o,checked:false,fbid:'',progress:0,src:'',uploadState:c('OmnipickerPhotoUploadState').NOT_STARTED};};l.prototype.$OmnipickerPhotoStore19=function(m,n){m.photosWaitingForUpload[n.id]=true;};l.prototype.$OmnipickerPhotoStore2=function(m){var n=m.appID;!!this.$OmnipickerPhotoStore1[n]?h(0):void 0;this.$OmnipickerPhotoStore1[n]={deletedPhotos:{},photos:{},photosWaitingForUpload:{},photosOptimisticallyUploading:{},uploadOrder:{}};};l.prototype.$OmnipickerPhotoStore5=function(m){var n=this.$OmnipickerPhotoStore15(m);n.checked=true;var o=this.$OmnipickerPhotoStore1[m.appID];o.photosOptimisticallyUploading[m.id]=true;};l.prototype.$OmnipickerPhotoStore6=function(m){this.$OmnipickerPhotoStore16(m,['checked']);var n=this.$OmnipickerPhotoStore15(m);n.checked=m.checked;};l.prototype.$OmnipickerPhotoStore3=function(m){this.$OmnipickerPhotoStore16(m,['source']);var n=this.$OmnipickerPhotoStore1[m.appID];n.photos[m.source]={};n.uploadOrder[m.source]=[];};l.prototype.$OmnipickerPhotoStore20=function(m,n,o,p){if(p===c('OmnipickerPhotoUploadState').FAILED||m.photosOptimisticallyUploading[o])return;n.checked=true;};l.prototype.$OmnipickerPhotoStore21=function(m,n,o,p){n.uploadState=p;delete m.photosWaitingForUpload[o];delete m.photosOptimisticallyUploading[o];};l.prototype.$OmnipickerPhotoStore22=function(m,n,o){var p=n.id;delete m.photos[o][p];delete m.photosWaitingForUpload[p];delete m.photosOptimisticallyUploading[p];var q=m.uploadOrder[o].indexOf(p);m.uploadOrder[o].splice(q,1);m.deletedPhotos[p]=true;};l.prototype.$OmnipickerPhotoStore4=function(m){this.$OmnipickerPhotoStore17(m,'photos');var n=this.$OmnipickerPhotoStore1[m.appID];m.photos.forEach(function(o){var p=o.source,q=o.id,r=o.src,s=this.$OmnipickerPhotoStore18(n,p,q);s.src=r;}.bind(this));};l.prototype.$OmnipickerPhotoStore7=function(m){var n=this.$OmnipickerPhotoStore15(m);this.$OmnipickerPhotoStore22(this.$OmnipickerPhotoStore1[m.appID],n,m.source);};l.prototype.$OmnipickerPhotoStore8=function(m){var n=this.$OmnipickerPhotoStore1[m.appID];this.$OmnipickerPhotoStore21(n,this.$OmnipickerPhotoStore15(m),m.id,c('OmnipickerPhotoUploadState').FAILED);};l.prototype.$OmnipickerPhotoStore9=function(m){this.$OmnipickerPhotoStore16(m,['src','fbid']);var n=m.appID,o=m.id,p=m.src,q=m.fbid,r=this.$OmnipickerPhotoStore1[n],s=this.$OmnipickerPhotoStore15(m),t=c('OmnipickerPhotoUploadState').DONE;this.$OmnipickerPhotoStore20(r,s,o,t);this.$OmnipickerPhotoStore21(r,s,o,t);s.src=p;s.fbid=q;};l.prototype.$OmnipickerPhotoStore10=function(m){this.$OmnipickerPhotoStore17(m,'progress');var n=this.$OmnipickerPhotoStore15(m);n.progress=100;};l.prototype.$OmnipickerPhotoStore12=function(m){var n=this.$OmnipickerPhotoStore15(m);n.uploadState=c('OmnipickerPhotoUploadState').UPLOADING;};l.prototype.$OmnipickerPhotoStore11=function(m){this.$OmnipickerPhotoStore16(m,['source','ids']);var n=m.source,o=this.$OmnipickerPhotoStore1[m.appID],p=m.ids;p.forEach(function(q){return this.$OmnipickerPhotoStore19(o,this.$OmnipickerPhotoStore18(o,n,q));}.bind(this));};f.exports=new l(c('OmnipickerDispatcher'));},null);
__d('Omnipicker.react',['invariant','ClientIDs','OmnipickerActions','OmnipickerPanelList.react','OmnipickerPhotoSourceStore','OmnipickerPhotoStore','OmnipickerUploadController','OmnipickerUploadSession','OmnipickerWaterfallLogger','React','SubscriptionsHandler','Waiter','OmnipickerLoggerStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('OmnipickerLoggerStore');c('OmnipickerPhotoSourceStore');c('OmnipickerPhotoStore');var i=c('React').PropTypes,j=c('React').createClass({displayName:'Omnipicker',propTypes:{doneSelecting:i.bool.isRequired,logger:i.instanceOf(c('OmnipickerWaterfallLogger')).isRequired,onDoneSelecting:i.func.isRequired,onPhotosChange:i.func},getDefaultProps:function(){return {doneSelecting:false};},getInitialState:function(){return {numPhotosSelected:0,numPhotosUploading:0,photoData:{}};},componentWillMount:function(){var k='Omnipicker_ID_'+c('ClientIDs').getNewClientID();c('OmnipickerUploadController').registerOmnipicker(k);c('OmnipickerUploadSession').registerOmnipicker(k);var l=[];c('React').Children.forEach(this.props.children,function(o){if(o.type===c('OmnipickerPanelList.react'))l.push(c('React').cloneElement(o,{appID:k}));});!(l.length===1)?h(0):void 0;var m=l[0],n=null;c('React').Children.forEach(m.props.children,function(o){if(!o)return;if(!n||o.props.isSelected)n=o.props.sourceType;if(o.type.getAdapter)c('OmnipickerUploadController').registerAdapter(k,o.type.getAdapter(this.props.logger,o.props.config),o.props.selectionSource);}.bind(this));!!!n?h(0):void 0;this.setState({appID:k,sourceType:n});c('OmnipickerActions').appInitialized(k,this.props.logger,n);},componentDidMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('OmnipickerPhotoStore').addListener(this.handlePhotosChangeEvent),c('OmnipickerPhotoSourceStore').addListener(this.handleSourceChangeEvent));this._onDoneSelectingWaiter=new (c('Waiter'))(function(){this.props.onDoneSelecting(c('OmnipickerPhotoStore').getSelectedPhotos(this.state.appID),this.state.sourceType);}.bind(this));},componentWillUnmount:function(){this._subscriptions.release();},componentDidUpdate:function(){if(this.props.doneSelecting)this._onDoneSelectingWaiter.go();},handlePhotosChangeEvent:function(){var k=c('OmnipickerPhotoStore').getState(this.state.appID),l=Object.keys(k.photosWaitingForUpload).length,m=Object.keys(k.photosOptimisticallyUploading).length;if(m>0){if(!this._optimisticLock)this._optimisticLock=this._onDoneSelectingWaiter.wait();}else if(this._optimisticLock){this._optimisticLock.call(this);this._optimisticLock=null;}this.setState({numPhotosSelected:k.numPhotosSelected,numPhotosUploading:l,photoData:k.photoData});this.props.onPhotosChange&&this.props.onPhotosChange(k.numPhotosSelected,l);},handleSourceChangeEvent:function(){this.setState({sourceType:c('OmnipickerPhotoSourceStore').getCurrentSource(this.state.appID)});},render:function(){var k=c('React').Children.map(this.props.children,function(l){var m={selectedSourceType:this.state.sourceType,appID:this.state.appID};if(l.type===c('OmnipickerPanelList.react'))Object.assign(m,{photoData:this.state.photoData[this.state.sourceType]||{},doneSelecting:this.props.doneSelecting});return c('React').cloneElement(l,m);}.bind(this));return c('React').createElement('div',null,k);}});f.exports=j;},null);
__d('OmnipickerDialog.react',['cx','fbt','DOM','Event','Keys','Link.react','OmnipickerConfig','React','ReactLayeredComponentMixin','SubscriptionsHandler','XUICloseButton.react','XUIDialog.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'OmnipickerDialog',mixins:[c('ReactLayeredComponentMixin')],propTypes:{onCancel:j.func.isRequired,title:j.string.isRequired},getInitialState:function(){return {doneSelecting:false,numPhotosSelected:0,numPhotosUploading:0,uploadProgress:0};},componentDidMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(document,'keydown',this.handleKeyDownEvent));},componentWillUnmount:function(){this._subscriptions.release();},getButtonLabel:function(){var l=this.state.numPhotosSelected;if(l===1)return i._("Use Photo");if(l>1)return i._("Use Photos ({number})",[i.param('number',l)]);return i._("Use Photos");},handleUsePhotos:function(){this.setState({doneSelecting:true});},handleKeyDownEvent:function(event){if(c('Event').getKeyCode(event)===c('Keys').ESC)this.props.onCancel();},handlePhotosChange:function(l,m){this.setState({numPhotosSelected:l,numPhotosUploading:m});},renderLayers:function(){var l=this.state.doneSelecting||this.state.numPhotosSelected<1||this.state.numPhotosUploading>0,m=null;if(c('OmnipickerConfig').FEEDBACK_GROUP_PATH)m=c('React').createElement('div',{className:"_2srv"},c('React').createElement(c('Link.react'),{href:c('OmnipickerConfig').FEEDBACK_GROUP_PATH,target:'_blank'},'Omnipicker Feedback Group'));var n=c('React').Children.only(this.props.children);n=c('React').cloneElement(n,{onPhotosChange:this.handlePhotosChange,doneSelecting:this.state.doneSelecting});return {dialog:c('React').createElement(c('XUIDialog.react'),{shown:true,layerHideOnBlur:false,width:c('OmnipickerConfig').DIALOG_WIDTH},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('React').createElement('span',null,this.props.title),c('React').createElement(c('XUICloseButton.react'),{className:"_51-t",label:i._("Close"),onClick:this.props.onCancel})),n,c('React').createElement('div',{className:"_3bnc"},c('React').createElement(c('XUIDialogFooter.react'),{className:"_3bnd",leftContent:m},c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Cancel"),onClick:this.props.onCancel,size:'xlarge'}),c('React').createElement(c('XUIDialogButton.react'),{className:"_3bne",use:'confirm',action:'confirm',size:'xlarge',disabled:l,label:this.getButtonLabel(),onClick:this.handleUsePhotos}))))};},render:function(){return c('React').createElement('div',null);}});f.exports=k;},null);
__d('OmnipickerPanelMixin.react',['PhotoSourceTypes','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i={propTypes:{appID:h.string.isRequired,photoData:h.object.isRequired,sourceType:h.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,selectionSource:h.string.isRequired}};f.exports=i;},null);
__d('OmnipickerPhoto.react',['cx','fbt','Event','Image.react','OmnipickerActions','OmnipickerPhotoUploadState','OmnipickerUploadSession','PhotoSourceTypes','ProgressBar.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=20000,l=c('React').createClass({displayName:'OmnipickerPhoto',propTypes:{appID:j.string.isRequired,checked:j.bool,id:j.string.isRequired,onPhotoSelected:j.func,photoSourceType:j.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,progress:j.number,showUploadProgress:j.bool,src:j.string,supportsCancel:j.bool,uploadState:j.oneOf([c('OmnipickerPhotoUploadState').NOT_STARTED,c('OmnipickerPhotoUploadState').UPLOADING,c('OmnipickerPhotoUploadState').DONE,c('OmnipickerPhotoUploadState').FAILED]).isRequired},getDefaultProps:function(){return {checked:false,progress:0,showUploadProgress:true,supportsCancel:false};},getInitialState:function(){return {canCancel:false};},componentDidMount:function(){if(this.props.supportsCancel&&this.props.uploadState===c('OmnipickerPhotoUploadState').UPLOADING)this.setCancelTimeout();},componentWillReceiveProps:function(m){if(this.props.supportsCancel){var n=this.props.uploadState!==m.uploadState||this.props.progress!==m.progress;if(n){this.clearCancelTimeout();if(m.uploadState===c('OmnipickerPhotoUploadState').UPLOADING)this.setCancelTimeout();}}},componentWillUnmount:function(){this.clearCancelTimeout();},render:function(){return (c('React').createElement('div',{className:"_47pv",onDragStart:this.onDragStart,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.getImage(),this.getSelection(),this.getCancelOverlay(),this.getFailedOverlay(),this.getProgressBar()));},onDragStart:function(event){c('Event').kill(event);},onMouseDown:function(){},onMouseUp:function(){var m=true;if(!this.props.checked&&this.props.onPhotoSelected)m=this.props.onPhotoSelected.call(null,this.props.id);if(m)c('OmnipickerActions').selectionChanged(this.props.appID,this.props.photoSourceType,this.props.id,!this.props.checked);},getImage:function(){if(!this.props.src)return null;return (c('React').createElement(c('Image.react'),{src:this.props.src,className:"_2dh3"}));},getSelection:function(){if(!this.props.checked)return null;return c('React').createElement('div',{className:"_2dh3 _1cyy"});},getCancelOverlay:function(){if(this.props.uploadState!==c('OmnipickerPhotoUploadState').UPLOADING||!this.state.canCancel)return null;return (c('React').createElement('div',{className:"_5goe"},c('React').createElement('div',{className:"_5gof _1cu0",onClick:this.onCancel},i._("Cancel Upload"))));},getFailedOverlay:function(){if(this.props.uploadState!==c('OmnipickerPhotoUploadState').FAILED)return null;return (c('React').createElement('div',{className:"_5goe"},c('React').createElement('div',{className:"_5gof"},i._("Upload Failed"))));},getProgressBar:function(){if(!this.props.showUploadProgress||this.props.uploadState!==c('OmnipickerPhotoUploadState').UPLOADING)return null;var m=null;if(this.props.progress<100){m=c('React').createElement(c('ProgressBar.react'),{value:this.props.progress,min:0,max:100});}else m=c('React').createElement('div',{className:"_1t2c"});return (c('React').createElement('div',{className:"_1cyx"},m));},onCancel:function(){c('OmnipickerUploadSession').cancelUpload(this.props.appID,this.props.photoSourceType,this.props.id);},setCancelTimeout:function(){this.cancelTimeout=setTimeout(function(){this.setState({canCancel:true});}.bind(this),k);},clearCancelTimeout:function(){if(this.cancelTimeout){clearTimeout(this.cancelTimeout);this.cancelTimeout=null;}}});f.exports=l;},null);
__d('OmnipickerPhotoGrid.react',['cx','AutoPager.react','OmnipickerPhoto.react','PhotoSourceTypes','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=300,k=c('React').createClass({displayName:'OmnipickerPhotoGrid',propTypes:{appID:i.string.isRequired,onPhotoSelected:i.func,onScrollPositionThresholdReached:i.func,photos:i.object.isRequired,photoSourceType:i.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired,showUploadProgress:i.bool,supportsCancel:i.bool},getDefaultProps:function(){return {showUploadProgress:true,supportsCancel:false};},render:function(){return (c('React').createElement('div',{className:"_xhf"},c('React').createElement('div',{className:"uiScrollableAreaWrap _1-nf"},this.getPhotos(),this.getAutoPager())));},getPhotos:function(){return Object.keys(this.props.photos).map(function(l){var m=this.props.photos[l];return (c('React').createElement(c('OmnipickerPhoto.react'),{appID:this.props.appID,checked:m.checked,id:m.id,key:m.id,onPhotoSelected:this.props.onPhotoSelected,photoSourceType:this.props.photoSourceType,progress:m.progress,showUploadProgress:this.props.showUploadProgress,src:m.src,supportsCancel:this.props.supportsCancel,uploadState:m.uploadState}));}.bind(this));},getAutoPager:function(){if(!this.props.onScrollPositionThresholdReached)return null;return (c('React').createElement(c('AutoPager.react'),{className:"_4qgs",onEnterBuffer:j,onVisible:this.props.onScrollPositionThresholdReached,scrollableAreaClass:"_xhf"}));}});f.exports=k;},null);
__d('OmnipickerExistingPhotosPanelMixin.react',['cx','invariant','ExistingPhotoPicker','OmnipickerActions','OmnipickerPanelMixin.react','OmnipickerPhotoGrid.react','OmnipickerUploadSession','PhotoStore','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k={mixins:[c('OmnipickerPanelMixin.react')],propTypes:{initBatchSize:j.number,pageBatchSize:j.number,puwMethod:j.string.isRequired,setID:j.string.isRequired},componentWillMount:function(){!(typeof this.getViewState==='function')?i(0):void 0;this.picker=new (c('ExistingPhotoPicker'))(this.props.selectionSource);c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,this.props.sourceType,this.props.puwMethod);},componentDidMount:function(){this.getViewState().initViewState();this.picker.begin();},componentWillUnmount:function(){this.getViewState().destroy();c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},render:function(){return (c('React').createElement('div',null,this.getThrobber(),this.getPhotoGrid()));},onViewStateChanged:function(l){c('OmnipickerActions').existingPhotosFetched(this.props.appID,this.props.sourceType,l.media.filter(function(m){return !this.props.photoData[m.id];}.bind(this)));},onPhotoSelected:function(l){this.picker.select(l,this.props.photoData[l].src);return false;},getPhotoGrid:function(){if(!c('PhotoStore').hasBeenCreated(this.props.setID))return null;var l=null;if(!c('PhotoStore').hasBeenCreated(this.props.setID)||c('PhotoStore').hasNextPage(this.props.setID))l=function(){this.getViewState().fetchMore();}.bind(this);return (c('React').createElement(c('OmnipickerPhotoGrid.react'),{appID:this.props.appID,onPhotoSelected:this.onPhotoSelected,onScrollPositionThresholdReached:l,photos:this.props.photoData,photoSourceType:this.props.sourceType,showUploadProgress:false}));},getThrobber:function(){if(c('PhotoStore').hasBeenCreated(this.props.setID))return null;return c('React').createElement('div',{className:"_j0-"});}};f.exports=k;},null);
__d('OmnipickerExistingPhotosViewState',['PhotoStore','ScrollablePhotoViewStateCore','URI','subscribeToArbiterUpdatePhotos','fetchInitPhotoViewState'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();function j(l,m){c('fetchInitPhotoViewState')(l,m);}h=babelHelpers.inherits(k,c('ScrollablePhotoViewStateCore'));i=h&&h.prototype;function k(l,m,n,o,p,q){'use strict';i.constructor.call(this,{fetchInitData:j.bind(null,p),initBatchSize:n,pageBatchSize:o,photoStore:c('PhotoStore'),setToken:m,subscribeUpdatePhotos:c('subscribeToArbiterUpdatePhotos'),updateCallback:q,viewer:l});this.$OmnipickerExistingPhotosViewState1=n;this.$OmnipickerExistingPhotosViewState2=m;this.$OmnipickerExistingPhotosViewState3=q;}k.prototype.syncState=function(){'use strict';this.$OmnipickerExistingPhotosViewState3({media:c('PhotoStore').getItemsInAvailableRange(this.$OmnipickerExistingPhotosViewState2),hasNextPage:c('PhotoStore').hasNextPage(this.$OmnipickerExistingPhotosViewState2)});};f.exports=k;},null);
__d('OmnipickerSelector.react',['cx','OmnipickerActions','PhotoSourceTypes','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'OmnipickerSelector',propTypes:{appID:i.string.isRequired,iconClass:i.string.isRequired,isSelected:i.bool.isRequired,sourceType:i.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired},onClick:function(){c('OmnipickerActions').photoSourceSelected(this.props.appID,this.props.sourceType);},render:function(){return (c('React').createElement('li',{className:"_1ys7"},c('React').createElement('div',{className:"_1ys8"+(this.props.isSelected?' '+"selected":''),onClick:this.onClick},c('React').createElement('div',{className:"_1ys9"},c('React').createElement('span',{className:c('joinClasses')("_1ysb",this.props.iconClass)}),c('React').createElement('span',{className:"_1ysc"},this.props.children)))));}});f.exports=j;},null);
__d('OmnipickerSelectorList.react',['cx','PhotoSourceTypes','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'OmnipickerSelectorList',propTypes:{appID:i.string.isRequired,selectedSourceType:i.oneOf(Object.keys(c('PhotoSourceTypes'))).isRequired},render:function(){var k=c('React').Children.map(this.props.children,function(l){if(!l)return;return c('React').cloneElement(l,{isSelected:l.props.sourceType===this.props.selectedSourceType,appID:this.props.appID});}.bind(this));return (c('React').createElement('div',{className:"_1n6_"},c('React').createElement('ul',null,k)));}});f.exports=j;},null);
__d('ComputerPanelActionState',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({NEUTRAL:null,DROP:null});f.exports=h;},null);
__d('OmnipickerHTML5FilePickerFactory',['fbt','HTML5FilePicker','PUWApplications','PUWMethods','PUWUploaders'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={create:function(j){return new (c('HTML5FilePicker'))(j,{accept:'image/*',fallbackFunction:function(){},multiple:true,qn:'todo',waterfallApp:c('PUWApplications').WEB_OMNIPICKER,waterfallUploader:c('PUWUploaders').HTML5,waterfallMethod:c('PUWMethods').FILE_SELECTOR,title:h._("Choose files to upload")});}};f.exports=i;},null);
__d('HTML5FilePickerButton.react',['fbt','OmnipickerHTML5FilePickerFactory','OmnipickerUploadSession','React','ReactDOM','PhotoSourceTypes','PUWMethods','XUIButton.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'HTML5FilePickerButton',propTypes:{appID:i.string.isRequired},componentDidMount:function(){this.picker=c('OmnipickerHTML5FilePickerFactory').create(c('ReactDOM').findDOMNode(this.refs.fileButton));c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,c('PhotoSourceTypes').COMPUTER,c('PUWMethods').FILE_SELECTOR);},componentWillUnmount:function(){c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},render:function(){var k=h._("Select Files");return (c('React').createElement(c('XUIButton.react'),{ref:'fileButton',href:'#',size:'xlarge',label:k}));}});f.exports=j;},null);
__d('DragDropInstructions.react',['cx','fbt','ComputerPanelActionState','HTML5FilePickerButton.react','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'DragDropInstructions',propTypes:{actionState:j.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:j.string.isRequired,isOverlay:j.bool},renderInstructions:function(){switch(this.props.actionState){case c('ComputerPanelActionState').DROP:return (c('React').createElement('div',null,c('React').createElement('div',{className:"_39ld"},c('React').createElement('div',{className:"_4zwj"})),c('React').createElement('div',{className:"_4zwc"},i._("Drop photos here"))));case c('ComputerPanelActionState').NEUTRAL:return (c('React').createElement('div',null,c('React').createElement('div',null,c('React').createElement('div',{className:"_39ld"},c('React').createElement('div',{className:"_4zwd"})),c('React').createElement('div',{className:"_4zwc"},i._("Drag photos here"))),c('React').createElement('div',{className:"_4zwi"},c('React').createElement('span',{className:"_4zwe"}),i._("or"),c('React').createElement('span',{className:"_4zwe"})),c('React').createElement('div',{className:"_4zwf"},c('React').createElement(c('HTML5FilePickerButton.react'),{appID:this.props.appID}))));}},renderOverlay:function(){return (c('React').createElement('div',{className:"_4zwg"},c('React').createElement('div',{className:"_4zwh"},this.renderInstructions())));},render:function(){if(this.props.isOverlay)return this.renderOverlay();return this.renderInstructions();}});f.exports=k;},null);
__d('EmptyPanel.react',['cx','DragDropInstructions.react','React','ComputerPanelActionState'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'EmptyPanel',propTypes:{actionState:i.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:i.string.isRequired},render:function(){var k="_2gyt"+(this.props.actionState===c('ComputerPanelActionState').NEUTRAL?' '+"_2gyu":'')+(this.props.actionState===c('ComputerPanelActionState').DROP?' '+"_2gyw":'');return (c('React').createElement('div',{className:k},c('React').createElement('div',{className:"_2gyv"},c('React').createElement(c('DragDropInstructions.react'),{actionState:this.props.actionState,appID:this.props.appID}))));}});f.exports=j;},null);
__d('HTML5UploadAdapter',['AsyncUploadQueue','ArbiterMixin','PhotosUploadWaterfall','PhotosUploadWaterfallMixin','PhotosMimeType','JpegResizer','performanceNow','URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){this._config=babelHelpers['extends']({maxRetries:0,retryTimeout:250,uri:null,qn:null,postParams:{}},i);this._uploads={};this._numProcessing=0;this._activeUploadCount=0;this._uploadQueue=new (c('AsyncUploadQueue'))(this._config.uri);this._uploadQueue.setAllowCrossOrigin(true);this._uploadQueue.setLimit(i.maxParallel);this._uploadQueue.subscribe('start',this._handleStart.bind(this));this._uploadQueue.subscribe('failure',this._handleFailure.bind(this));this._uploadQueue.subscribe('success',this._handleSuccess.bind(this));this._uploadQueue.subscribe('progress',this._handleProgress.bind(this));this._uploadQueue.subscribe('success_after_abort',this._handleCanceledPhotoUploadedAnyway.bind(this));this._jpegResizer=new (c('JpegResizer'))(i.maxParallel);if(i.hasOwnProperty('useHighQuality'))this._jpegResizer.setHighQuality(i.useHighQuality);this._uploadQueue.setPreprocessHandler(this._resizeUpload.bind(this));}Object.assign(h,{isSupported:function(){return c('AsyncUploadQueue').isSupported()&&c('JpegResizer').isSupported();},MAX_WIDTH:2048,MAX_HEIGHT:2048});Object.assign(h.prototype,c('ArbiterMixin'),c('PhotosUploadWaterfallMixin'),{getUploaderApp:function(){return c('PhotosUploadWaterfall').APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallSource:function(){return this._config.ref;},uploadFiles:function(i,j){i.forEach(function(k){this._enqueueUpload(k,babelHelpers['extends']({},this._config.postParams,j));}.bind(this));},uploadSelections:function(i,j){var k=i.map(function(l){var m=l.getFile();m.uploadID=l.getSelectionContainerID();return m;});this.uploadFiles(k,j);},setHiRes:function(i){if(this._config.hasOwnProperty('useHighQuality'))this._jpegResizer.setHighQuality(i);},setNumSelected:function(i){},markDeleted:function(i){},addPostParam:function(i,j){this._config.postParams=this._config.postParams||{};this._config.postParams[i]=j;},cancelIndividualUpload:function(i){var j=this._getUpload(i);if(j){this._uploadQueue.dequeue(j);this._removeUpload(j);}},cancelAllUploads:function(){for(var i in this._uploads){var j=this._getUpload(i);this._uploadQueue.dequeue(j);this._removeUpload(j);}},getActiveUploadCount:function(){return this._activeUploadCount;},_getUpload:function(i){if(i&&this._uploads[i]){return this._uploads[i];}else return null;},_removeUpload:function(i){if(!this._uploads[i.getFile().uploadID])return;delete this._uploads[i.getFile().uploadID];if(!i.isWaiting())this._activeUploadCount--;},_handleStart:function(i,j){this._activeUploadCount++;this.inform('upload_start',{uploadID:j.getFile().uploadID,retry:!!j.getFile()._retryCount,file:j.getFile(),size:j.getFile().size});},_handleFailure:function(i,j){var k=Math.pow(2,j.getFile()._retryCount);this._removeUpload(j);if(j.getFile()._retryCount++<this._config.maxRetries){setTimeout(this._enqueueUpload.bind(this,j.getFile(),babelHelpers['extends']({},this._config.postParams,{retry:j.getFile()._retryCount})),this._config.retryTimeout*k);this.logWaterfallStep(c('PhotosUploadWaterfall').RETRY_UPLOAD,{code:j.getResponse().getError()});this.inform('upload_retry',{uploadID:j.getFile().uploadID,file:j.getFile(),response:j.getResponse(),retry:j.getFile()._retryCount});}else this.inform('upload_failed',{uploadID:j.getFile().uploadID,file:j.getFile(),response:j.getResponse()});return false;},_handleSuccess:function(i,j){this._removeUpload(j);var k=j.getResponse(),l=k.payload;if(l.metadata)l=l.metadata;this.inform('upload_done',{uploadID:j.getFile().uploadID,response:l[0],hiRes:true,retriesNeeded:j.getFile()._retryCount});},_handleProgress:function(i,j){this.inform('upload_progress',{file:j.getFile(),uploadID:j.getFile().uploadID,bytesTransferred:j.getProgressEvent().loaded});},_resizeUpload:function(i,j){var k=i.getFile();if(!c('PhotosMimeType').isJpeg(k.type))return j(i);this.inform('resize_start',{uploadID:k.uploadID});var l=c('performanceNow')();this._jpegResizer.resizeBlob(k,function(m,n,o){if(m)this.logWaterfallStep(c('PhotosUploadWaterfall').CLIENT_ERROR,{code:c('PhotosUploadWaterfall').CERROR_RESIZING_FAILED,meta:{message:m.message}});var p=m||o;this.inform('resize_done',{uploadID:k.uploadID,scubaData:{scuba_tags:{skippedResizing:+p},scuba_ints:{timeResizing:c('performanceNow')()-l,originalSize:k.size,resizedSize:n&&n.size}},error:m});if(!p){n.uploadID=k.uploadID;n.name=k.name;i.setFile(n);}j(i);}.bind(this));},_handleCanceledPhotoUploadedAnyway:function(i,j){this.inform('canceled_photo_uploaded',j.payload[0].fbid);},_enqueueUpload:function(i,j){j=babelHelpers['extends']({},j,{uploader:'html5'});i._retryCount=i._retryCount||0;this._uploads[i.uploadID]=i._retryCount?this._uploadQueue.prepend(i.fileName,i,j):this._uploadQueue.enqueue(i.fileName,i,j);}});f.exports=h;},null);
__d('PhotoPanel.react',['cx','fbt','ComputerPanelActionState','DragDropInstructions.react','HTML5FilePickerButton.react','OmnipickerPhotoGrid.react','PhotoSourceTypes','React','ReactDOM','Scroll'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'PhotoPanel',propTypes:{actionState:j.oneOf(Object.keys(c('ComputerPanelActionState'))).isRequired,appID:j.string.isRequired,photoData:j.object.isRequired},getInitialState:function(){return {photoCount:0};},componentWillReceiveProps:function(l){var m=Object.keys(l.photoData).length;this.setState({photoCount:m});},componentDidUpdate:function(l,m){if(this.state.photoCount>m.photoCount){var n=c('ReactDOM').findDOMNode(this.refs.pickerBox);c('Scroll').setTop(n,n.scrollHeight);}},renderInstructions:function(){return (c('React').createElement('div',{className:"_1-nd"},c('React').createElement('div',null,c('React').createElement('div',{className:"_4zwc"},i._("Drag more photos"))),c('React').createElement('div',{className:"_4zwi"},c('React').createElement('span',{className:"_4zwe"}),i._("or"),c('React').createElement('span',{className:"_4zwe"})),c('React').createElement('div',{className:"_4zwf"},c('React').createElement(c('HTML5FilePickerButton.react'),{appID:this.props.appID}))));},renderDragAndDropInstructions:function(){if(this.props.actionState!==c('ComputerPanelActionState').NEUTRAL)return (c('React').createElement(c('DragDropInstructions.react'),{actionState:this.props.actionState,appID:this.props.appID,isOverlay:true}));},renderPhotoGrid:function(){return (c('React').createElement(c('OmnipickerPhotoGrid.react'),{appID:this.props.appID,photos:this.props.photoData,photoSourceType:c('PhotoSourceTypes').COMPUTER,supportsCancel:true}));},render:function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1x-l"},c('React').createElement('div',{className:"_1-ne _1-nf",ref:'pickerBox'},this.renderPhotoGrid(),this.renderInstructions())),this.renderDragAndDropInstructions()));}});f.exports=k;},null);
__d('ComputerPanel.react',['ComputerPanelActionState','DragDropFilePicker','EmptyPanel.react','FilePickerEvent','HTML5UploadAdapter','React','OmnipickerConfig','OmnipickerPanelMixin.react','OmnipickerUploadSession','PhotosMimeType','PhotoPanel.react','PhotoSourceTypes','PUWMethods','PUWUploaders','SelectionSource'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ComputerPanel',mixins:[c('OmnipickerPanelMixin.react')],statics:{getAdapter:function(i,j){var k=c('OmnipickerConfig').FILE_UPLOAD_URI;if(j&&j.fileUploadURI)k=j.fileUploadURI;return new (c('HTML5UploadAdapter'))({uri:k,maxRetries:c('OmnipickerConfig').HTML5_UPLOADER_MAX_RETRIES,maxParallel:c('OmnipickerConfig').HTML5_UPLOADER_MAX_PARALLEL,postParams:{},qn:i.getWaterfallID(),waterfallApp:i.getWaterfallAppName(),waterfallUploader:c('PUWUploaders').HTML5});}},getDefaultProps:function(){return {selectionSource:c('SelectionSource').FILE,sourceType:c('PhotoSourceTypes').COMPUTER};},getInitialState:function(){return {actionState:c('ComputerPanelActionState').NEUTRAL};},componentDidMount:function(){this.picker=new (c('DragDropFilePicker'))(document.documentElement,{onDocumentDragEnterCallback:function(){this.setState({actionState:c('ComputerPanelActionState').DROP});}.bind(this),onDocumentDragLeaveCallback:function(){this.setState({actionState:c('ComputerPanelActionState').NEUTRAL});}.bind(this),isFileValid:function(i){return c('PhotosMimeType').isImage(i.type);}});c('OmnipickerUploadSession').addPicker(this.props.appID,this.picker,c('PhotoSourceTypes').COMPUTER,c('PUWMethods').DRAGDROP);this.picker.subscribe(c('FilePickerEvent').SELECTED,this.onFilesDropped);},componentWillUnmount:function(){this.picker.disable();c('OmnipickerUploadSession').removePicker(this.props.appID,this.picker);},onFilesDropped:function(i){this.setState({actionState:c('ComputerPanelActionState').NEUTRAL});},renderEmptyPanel:function(){return (c('React').createElement(c('EmptyPanel.react'),{actionState:this.state.actionState,appID:this.props.appID}));},renderPhotoPanel:function(){return (c('React').createElement(c('PhotoPanel.react'),{actionState:this.state.actionState,appID:this.props.appID,photoData:this.props.photoData}));},render:function(){var i=Object.keys(this.props.photoData).length,j=i===0?this.renderEmptyPanel():this.renderPhotoPanel();return c('React').createElement('div',null,j);}});f.exports=h;},null);
__d("XPagesManagerPostedPhotosController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/content_tab\/posted_photos\/",{set:{type:"String",required:true},size:{type:"Int",required:true}});},null);
__d('OmnipickerPagePostedPhotosPanel.react',['ActorURI','OmnipickerConfig','OmnipickerExistingPhotosPanelMixin.react','OmnipickerExistingPhotosViewState','PhotoSourceTypes','PUWMethods','React','SelectionSource','XPagesManagerPostedPhotosController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'OmnipickerPagePostedPhotosPanel',mixins:[c('OmnipickerExistingPhotosPanelMixin.react')],_viewState:null,propTypes:{pageID:h.string.isRequired},getDefaultProps:function(){return {initBatchSize:20,pageBatchSize:16,puwMethod:c('PUWMethods').RECENT_PHOTOS,selectionSource:c('SelectionSource').PAGES_POSTED_PHOTOS,setID:c('OmnipickerConfig').POSTED_PHOTOS_SET_ID,sourceType:c('PhotoSourceTypes').PAGES_POSTED_PHOTOS};},componentWillMount:function(){var j=c('ActorURI').create(c('XPagesManagerPostedPhotosController').getURIBuilder().setString('set',this.props.setID).setInt('size',this.props.initBatchSize).getURI(),this.props.pageID);this._viewState=new (c('OmnipickerExistingPhotosViewState'))(this,this.props.setID,this.props.initBatchSize,this.props.pageBatchSize,j,this.onViewStateChanged);},getViewState:function(){return this._viewState;}});f.exports=i;},null);
__d('OmnipickerComputerSelector.react',['cx','fbt','OmnipickerSelector.react','PhotoSourceTypes','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'OmnipickerComputerSelector',propTypes:{labelText:j.string},getDefaultProps:function(){return {sourceType:c('PhotoSourceTypes').COMPUTER,labelText:i._("Computer")};},render:function(){return (c('React').createElement(c('OmnipickerSelector.react'),babelHelpers['extends']({iconClass:"_5o68"},this.props),this.props.labelText));}});f.exports=k;},null);
__d('OmnipickerPagePostedPhotosSelector.react',['cx','fbt','OmnipickerSelector.react','PhotoSourceTypes','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'OmnipickerPagePostedPhotosSelector',propTypes:{labelText:j.string},getDefaultProps:function(){return {sourceType:c('PhotoSourceTypes').PAGES_POSTED_PHOTOS,labelText:i._("Page Photos")};},render:function(){return (c('React').createElement(c('OmnipickerSelector.react'),babelHelpers['extends']({iconClass:"_2_y4"},this.props),this.props.labelText));}});f.exports=k;},null);
__d('StickersDispatcher',['Dispatcher_DEPRECATED','StickerConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=Object.assign(new (c('Dispatcher_DEPRECATED'))(),{_handleUpdate:function(i,j){var k=babelHelpers['extends']({payloadSource:i},j);this.dispatch(k);},handleUpdateFromViewActions:function(i){this._handleUpdate(c('StickerConstants').PayloadSource.VIEW_ACTION,i);}});f.exports=h;},null);