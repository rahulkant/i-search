/*!CK:3025736772!*//*1456572582,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["1byz+"]); }

__d('TrendingHovercard',['csx','Banzai','CSS','DOM','Hovercard','LitestandEllipsis','LitestandShareAttachment','Parent','TrendingEvent','$'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=100,j={},k={getLinksCurrentPosition:function(l){var m=c('Parent').bySelector(c('$')(l),"._5my2");if(!m)return 0;return Number(m.getAttribute('data-position'));},registerSubtitleHack:function(l,m){var n=c('DOM').scry(l,"._6m7")[0];if(!n)return;c('$')(m).onmouseover=function(){var o=function(){var p=c('LitestandShareAttachment').getNumDescriptionLines(l);if(p&&p>0){c('CSS').show(n);c('LitestandEllipsis').add(n,p*c('LitestandShareAttachment').getDescriptionLineHeight());c('$')(m).onmouseover=null;}};setTimeout(o,c('Hovercard').getHideDelay()+i);setTimeout(o,c('Hovercard').getLoadingDelay()+i);};},setDialog:function(l,m,n){var o=[m.subscribe('show',function(){c('Banzai').post('trending_hovercard',babelHelpers['extends']({},n,{trending_event:c('TrendingEvent').HOVERCARD_LOAD}));j[l]=Date.now();}),m.subscribe('hide',function(){if(j.hasOwnProperty(l)){var p=Date.now()-j[l];if(p<0)p=0;c('Banzai').post('trending_hovercard',babelHelpers['extends']({},n,{time_spent:p,trending_event:c('TrendingEvent').HOVERCARD_UNLOAD}));delete j[l];}}),m.subscribe('destroy',function(){o.forEach(function(p){return p.unsubscribe();});o=null;})];c('Hovercard').setDialog(l,m);}};f.exports=k;},null);
__d('TrendingHovercardLogger',['TrendingHovercard','TrendingRHCLogger','XPubcontentTrendingHovercardLoggingController','AsyncRequest'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m,n){var o=c('XPubcontentTrendingHovercardLoggingController').getURIBuilder().setInt('topic_id',l).setString('source',m).setInt('position',k).setInt('query_id',n).setString('event',j).getURI();new (c('AsyncRequest'))().setURI(o).send();}var i={registerArticleForClickEvent:function(j,k,l,m,n){j.onclick=function(){var o=String(c('TrendingHovercard').getLinksCurrentPosition(n));if(o>0)c('TrendingRHCLogger').logHovercardArticleClick(o,k);h('hovercard_article_click',o,k,l,m);};},registerFeedLinkForClickEvent:function(j,k,l,m,n){j.onclick=function(){var o=String(c('TrendingHovercard').getLinksCurrentPosition(n));if(o>0)c('TrendingRHCLogger').logHovercardFeedClick(o,k);h('hovercard_feed_click',o,k,l,m);};},registerHovercardForClickEvent:function(j,k,l,m,n){j.onclick=function(){var o=String(c('TrendingHovercard').getLinksCurrentPosition(n));if(o>0)c('TrendingRHCLogger').logHovercardFeedClick(o,k);h('hovercard_context_click',o,k,l,m);};},registerShareForClickEvent:function(j,k,l,m,n){j.onclick=function(){var o=String(c('TrendingHovercard').getLinksCurrentPosition(n));if(o>0)c('TrendingRHCLogger').logHovercardShare(o,k);h('topic_share',o,k,l,m);};},registerPlayOfHovercardVideoEvent:function(j,k,l,m,n){j.addListener('beginPlayback',function(){h('hovercard_video_played',k,l,m,n);});}};f.exports=i;},null);