/*!CK:1262120983!*//*1459218576,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["pJuQI"]); }

__d("PUWApplications",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_PRODUCT_PHOTO_OMNIPICKER:"web_product_photo_omnipicker",WEB_PAGES_MESSENGER:"web_pages_messenger",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",WEB_REACT_COMPOSER:"web_react_composer",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};},null);
__d("PUWSteps",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d('AdsPagerConstants',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({ADD_PAGE:null,PAGE_TRANSITION:null,REQUEST_PAGE:null}),i=c('keyMirror')({VIEW_ACTION:null,SERVER_ACTION:null});f.exports={ActionTypes:h,PayloadSources:i};},null);
/**
 * @generated SignedSource<<623c7cbcff19956af736c3d064fc689d>>
 *
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 * !! This file is a check-in of a static_upstream project!      !!
 * !!                                                            !!
 * !! You should not modify this file directly. Instead:         !!
 * !! 1) Use `fjs use-upstream` to temporarily replace this with !!
 * !!    the latest version from upstream.                       !!
 * !! 2) Make your changes, test them, etc.                      !!
 * !! 3) Use `fjs push-upstream` to copy your changes back to    !!
 * !!    static_upstream.                                        !!
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 *
 * Copyright (C) 2010 by Johannes Baagoe <baagoe@baagoe.org>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @providesModule Alea
 * @preserve-header
 */__d('Alea',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){var j=4022871197,k=function(l){l=l.toString();for(var m=0;m<l.length;m++){j+=l.charCodeAt(m);var o=.02519603282416938*j;j=o>>>0;o-=j;o*=j;j=o>>>0;o-=j;j+=o*4294967296;}return (j>>>0)*2.3283064365386963e-10;};k.version='Mash 0.9';return k;}function i(){return function(j){var k=0,l=0,m=0,n=1;if(j.length===0)j=[new Date()];var o=new h();k=o(' ');l=o(' ');m=o(' ');for(var p=0;p<j.length;p++){k-=o(j[p]);if(k<0)k+=1;l-=o(j[p]);if(l<0)l+=1;m-=o(j[p]);if(m<0)m+=1;}o=null;var q=function(){var r=2091639*k+n*2.3283064365386963e-10;k=l;l=m;m=r-(n=r|0);return m;};q.version='Alea 0.9';q.args=j;return q;}(Array.prototype.slice.call(arguments));}f.exports=i;},null);
__d('Random',['ServerNonce','Alea'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=4294967296,i=c('ServerNonce').ServerNonce,j=c('Alea')(i),k={random:function(){if(typeof window!=='undefined'&&typeof Uint32Array!=='undefined'){var l=new Uint32Array(1);if(window.crypto&&window.crypto.getRandomValues){return window.crypto.getRandomValues(l)[0]/h;}else if(window.msCrypto&&window.msCrypto.getRandomValues)return window.msCrypto.getRandomValues(l)[0]/h;}return j();},uint32:function(){return Math.floor(this.random()*h);}};f.exports=k;},null);
__d('UFIOrderingModeSelector.react',['cx','ix','BanzaiLogger','InlineBlock.react','Link.react','React','Image.react','Random','ReactXUIMenu','PopoverMenu.react','UFIConfig'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('ReactXUIMenu').SelectableMenu,l=c('ReactXUIMenu').SelectableItem,m=c('React').createClass({displayName:'UFIOrderingModeSelector',propTypes:{onOrderChanged:j.func,feedback:j.shape({orderingmodes:j.array.isRequired,commentstargetfbid:j.string.isRequired,ownerid:j.string.isRequired}).isRequired},getInitialState:function(){var n=null;this.props.feedback.orderingmodes.map(function(o){if(o.selected)n=o;});return {selectedMode:n};},onMenuItemClick:function(n,o){var p=o.item.getValue();if(this.props.feedback.orderingmodes&&c('UFIConfig').logChangeOrderingModeUsageSampleRate>c('Random').random())c('BanzaiLogger').log('CommentsOrderingModeSelectorUsageLoggerConfig',{start_order:this.state.selectedMode.value,end_order:p,post_fbid:this.props.feedback.commentstargetfbid,post_owner_fbid:this.props.feedback.ownerid,available_orders:this.props.feedback.orderingmodes.map(function(q){return q.value;})});this.props.feedback.orderingmodes.map(function(q){if(q.value===p)this.setState({selectedMode:q});}.bind(this));this.props.onOrderChanged(p);},render:function(){var n=c('React').createElement(k,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.feedback.orderingmodes.map(function(o){return (c('React').createElement(l,{key:o.value,value:o.value,label:o.name,selected:o.value===this.state.selectedMode.value},c('React').createElement('div',{className:"_3scm"},c('React').createElement('div',{className:"_3scn"},o.name),c('React').createElement('div',{className:"_3sco"},o.description))));}.bind(this)));return (c('React').createElement('div',{className:"_3scp"},c('React').createElement(c('InlineBlock.react'),null,c('React').createElement(c('PopoverMenu.react'),{className:"_3scs",menu:n,alignh:'right'},c('React').createElement(c('Link.react'),null,this.state.selectedMode.name,c('React').createElement(c('Image.react'),{className:"_3sct",src:i('/images/ui/xhp/link/more/down_caret.gif')}))))));}});f.exports=m;},null);
__d('PhotosUploadWaterfallXMixin',['invariant','AsyncSignal','Banzai','Map','PhotosUploadWaterfallXConfig','Set','randomInt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=new (c('Map'))();function j(l,m){var n={};l.client_time=Math.round(Date.now()/1000);if(c('PhotosUploadWaterfallXConfig').retryBanzai){n.retry=true;l.nonce=c('randomInt')(4294967296);}c('Banzai').post(c('PhotosUploadWaterfallXConfig').banzaiRoute,l,n);if(m)setTimeout(m,0);}function k(l,m){if(c('PhotosUploadWaterfallXConfig').useBanzai){j(l,m);}else{var n=new (c('AsyncSignal'))(c('PhotosUploadWaterfallXConfig').loggingEndpoint,{data:JSON.stringify(l)}).setHandler(m);if(c('PhotosUploadWaterfallXConfig').timeout)n.setTimeout(10*1000);n.send();}}f.exports={logStep:function(l,m,n){var o=this.getWaterfallID&&this.getWaterfallID(),p=this.getWaterfallAppName&&this.getWaterfallAppName();if(!o||!p)return;k(babelHelpers['extends']({step:l,qn:o,uploader:p,ref:this.getWaterfallSource&&this.getWaterfallSource()},m),n);},logPUWStep:function(l,m,n,o,p,q,r){if(q&&q.logOncePerSession){if(!i.has(m))i.set(m,new (c('Set'))());if(i.get(m).has(l))return;i.get(m).add(l);}k(Object.assign({step:l,qn:m,uploader:n,ref:o},p),r);}};},null);
__d('TickerController',['invariant','Arbiter','AsyncSignal','Bootloader','CSS','DOM','Parent','UIPagelet','Vector','$','emptyFunction','ge'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=1,j=2,k=3,l=4,m=15000,n=null,o={},p={},q={setActiveInstance:function(r){n=r;},getActiveInstance:function(){return n;},clearRHCplaceholder:function(){o.pagelet_rhc_ticker=null;},registerInstance:function(r,s){!r?h(0):void 0;p[r]=s;q.setActiveInstance(s);},getInstance:function(r){if(!r)return null;var s=c('Parent').byClass(c('$')(r),'fbFeedTicker');return p[s.id]||null;},isLoaded:function(r){var s=o[r.id];return !s||s.status==k;},show:function(r,s){s=s||c('emptyFunction');for(var t in p){var u=c('ge')(t);if(!u||u.parentNode.id==r.id)continue;q.hide(u.parentNode);}q._doPositionChange(r);c('CSS').show(r);var v=o[r.id];if(v&&v.status==i){var w=(c('Vector').getElementDimensions(r).y||0)>0,x=r.id==='pagelet_rhc_ticker'&&!c('CSS').hasClass(r,'hidden_rhc_ticker');if(w||x){var y=c('DOM').scry(r,'.tickerPlaceholderSpinner')[0];y&&c('CSS').show(y);q._fetchTickerForPlaceholder(r,s);}else c('Arbiter').subscribe('Ticker/resized',function(){if(v.status==i)q._fetchTickerForPlaceholder(r,s);});}else{var z=c('DOM').scry(r,'.fbFeedTicker')[0],aa=q.getInstance(z);n=aa;aa&&aa._poll();o[r.id]={status:l,callback:s};s();}c('Arbiter').inform('ticker/show',{node:r,callback:s});},_doPositionChange:function(r){if(c('CSS').shown(r))return;new (c('AsyncSignal'))('/common/ods_endpoint.php',{k:'ticker.render.switch.'+r.id}).send();},hide:function(r){var s=c('DOM').scry(r,'.fbFeedTicker')[0],t=q.getInstance(s);t&&t.hideActiveStory();c('CSS').hide(r);},hideStoriesByClass:function(r){for(var s in p)c('DOM').scry(c('$')(s),r).forEach(c('CSS').hide);},hideStory:function(r){var s=q.getInstance(r);s&&s.hideStory(r);},replaceStory:function(r,s){var t=c('DOM').scry(document.body,'div.fbFeedTickerStory'),u=q.getInstance(t[0]);if(!u)return;var v=u._findStoryById(r);u.handleRemoveStory();c('CSS').hide(v);c('DOM').insertAfter(v,s);s.setAttribute('data-story-id',v.getAttribute('id'));var w=setTimeout(function(){return q.removeMarkup(s,v);},m);s.setAttribute('data-timeout-token',w);},removeMarkup:function(r,s){c('Bootloader').loadModules(["Animation"],function(t){c('CSS').addClass(r,'removedStoryMarkup');new t(r).to('height',0).duration(500).ondone(function(){c('DOM').remove(r);}).go();});},undoHideStory:function(r){var s=q.getInstance(r);s&&s.undoHideStory(r);},insertStoriesAtBottom:function(r){n.insertStoriesAtBottom(r);},_fetchTickerForPlaceholder:function(r,s){var t={handler:function(){o[r.id].status=k;s();}};c('UIPagelet').loadFromEndpoint('TickerEntStoryPagelet',r.id,o[r.id].pageletData,t);o[r.id].status=j;},registerStoryDialog:function(r,s){c('Arbiter').subscribe('ticker/init',function(){var t=c('ge')(r),u=q.getInstance(t);u&&u.registerStoryDialog(t,s);},c('Arbiter').SUBSCRIBE_ALL);},registerPlaceholder:function(r,s){var t=o[r];o[r]={status:i,pageletData:s};if(t&&t.status==l){q.show(c('$')(r));t.callback();}}};f.exports=q;},null);
__d('TickerRightColumnController',['Arbiter','CSS','DOM','Event','NavigationMessage','Run','Style','SubscriptionsHandler','TickerController','Vector','ge','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;function i(){var n=c('ge')('pagelet_rhc_ticker');n&&c('TickerController').show(n,k);}function j(){var n=c('ge')('pagelet_rhc_ticker');n&&c('TickerController').hide(n);}function k(){var n=c('ge')('pagelet_rhc_ticker'),o=c('DOM').scry(n,'.ticker_container')[0],p=c('DOM').scry(n,'.ticker_stream')[0],q=c('ge')('rightCol');if(!n||!o||!p||!q)return;c('Style').set(o,'height','0');var r=75,s=c('Vector').getViewportDimensions().y,t=c('Vector').getElementDimensions(q).y,u=s-t-r,v=c('Vector').getElementDimensions(p).y,w=Math.max(Math.min(u,v,h.tickerMaxHeight||425),h.tickerMinHeight||225);c('Style').set(o,'height',w+'px');}function l(n){var o=c('ge')('pagelet_reminders'),p=c('ge')('pagelet_rhc_ticker'),q=o&&c('DOM').scry(o,'div.tickerToggleWrapper')[0],r=p&&c('DOM').scry(p,'div.tickerToggleWrapper')[0];q&&c('CSS').conditionClass(q,'displayedTickerToggleWrapper',!n);r&&c('CSS').conditionClass(r,'displayedTickerToggleWrapper',n);p&&c('CSS').conditionClass(p,'hidden_rhc_ticker',!n);if(n){k();var s=c('ge')('fbTickerClosedEd');s&&c('CSS').hide(s);}}var m={init:function(n){h=n;var o=new (c('SubscriptionsHandler'))();if(h.enableSidebar)o.addSubscriptions(c('Arbiter').subscribe('sidebar/visibility',function(q,r){if(r){j();}else i();}),c('Arbiter').subscribe('minisidebar/show',i),c('Arbiter').subscribe('LitestandClassicRHC/loaded',k),c('Event').listen(window,'scroll',c('throttle')(function(){var q=c('DOM').scry(c('ge')('pagelet_rhc_ticker'),'.fbFeedTicker')[0],r=c('TickerController').getInstance(q);r&&r.handleRemoveStory();})));if(!c('CSS').hasClass(document.documentElement,'sidebarMode')){i();}else if(h.enableSidebar)j();var p=function(){o.release();};c('Arbiter').subscribeOnce(c('NavigationMessage').NAVIGATION_BEGIN,p);c('Run').onLeave(p);},initRHCTickerHider:function(n){c('Event').listen(n,'click',this.hideRHCTicker);},showRHCTicker:function(){l(true);},hideRHCTicker:function(){l(false);}};f.exports=m;},null);
__d('LitestandStream',['csx','cx','CSS','LitestandStoryInsertionStatus','ViewportBounds','getElementPosition','nullthrows'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k,l,m={init:function(n,o,p,q){j=p;k=n;l=q;},getStoriesSelector:function(){return "._5jmm";},getStreamRoot:function(){return k;},getSectionID:function(){return j;},getStoryID:function(){return l;},isStory:function(n){return c('CSS').matchesSelector(n,"._5jmm");},canInsertNewerStories:function(){if(c('ViewportBounds').getTop()>c('getElementPosition')(m.getStreamRoot()).y)return false;return c('LitestandStoryInsertionStatus').canInsert();},getFeedStreamID:function(){return parseInt(c('nullthrows')(k).id.split('feed_stream_')[1],16)%1e+08;}};f.exports=m;},null);
__d('DOMClone',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={shallowClone:function(j){return i(j,false);},deepClone:function(j){return i(j,true);}};function i(j,k){var l=j.cloneNode(k);if(typeof l.__FB_TOKEN!=='undefined')delete l.__FB_TOKEN;return l;}f.exports=h;},null);
__d('FileInput',['cx','ArbiterMixin','DOM','DOMClone','Event','Focus','Keys','UserAgent_DEPRECATED','mixin'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('UserAgent_DEPRECATED').ie();i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n,o){'use strict';j.constructor.call(this);this.container=m;this.control=n;var p=c('DOM').scry(this.container,'a')[0];p&&p.removeAttribute('href');var q=c('DOM').create('div',{className:"_3jk"},o);c('DOM').appendContent(this.control,q);this._boundHandleChange=this._handleChange.bind(this);if(k)this._boundHandleIEKeyDown=this._handleIEKeyDown.bind(this);this._setInputElement(o);}l.prototype.getValue=function(){'use strict';return this.input.value;};l.prototype.getInput=function(){'use strict';return this.input;};l.prototype.getContainer=function(){'use strict';return this.container;};l.prototype.getControl=function(){'use strict';return this.control;};l.prototype.clear=function(){'use strict';if(k){var m=c('DOMClone').deepClone(this.input);c('DOM').replace(this.input,m);this._setInputElement(m);}else this.input.value='';};l.prototype.destroy=function(){'use strict';this._focus.remove();this._focus=null;this._listener.remove();this._listener=null;if(k){this._IEKeyDownListener.remove();this._IEKeyDownListener=null;}this.container=null;this.control=null;this.input=null;};l.prototype._setInputElement=function(m){'use strict';this.input=m;this._focus&&this._focus.remove();this._focus=c('Focus').relocate(m,this.control);this._listener&&this._listener.remove();this._listener=c('Event').listen(m,'change',this._boundHandleChange);if(k){this._IEKeyDownListener&&this._IEKeyDownListener.remove();this._IEKeyDownListener=c('Event').listen(m,'keydown',this._boundHandleIEKeyDown);}};l.prototype._handleChange=function(event){'use strict';this.inform('change',event);if(this.input){var m=this.input.form;if(m&&k<9)c('Event').fire(m,'change',event);}};l.prototype._handleIEKeyDown=function(event){'use strict';if(event.keyCode===c('Keys').RETURN){event.preventDefault();var m=document.createEvent('MouseEvents');m.initEvent('click',true,true);this.input.dispatchEvent(m);}};f.exports=l;},null);
__d("PhotosUploadID",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1024,i={getNewID:function(){return (h++).toString();}};f.exports=i;},null);
__d("XPhotosWaterfallBatchLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/photos\/logging\/waterfall\/batch\/",{});},null);
__d('PhotosUploadWaterfall',['AsyncRequest','AsyncSignal','Banzai','PhotosUploadWaterfallXConfig','XPhotosWaterfallBatchLoggingController','emptyFunction','randomInt','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[],i={APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_SENT:99,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,POST_BUTTON_CLICKED:110,POST_BUTTON_ERROR:111,PHOTO_DELETED:114,PUBLISH_CLIENT_SUCCESS:115,PHOTO_ROTATED:117,SAVE_DRAFT_BUTTON_CLICKED:123,RECOVERY_START_ON_CLIENT:124,CHANGE_PHOTO_QUALITY_SETTING:126,TAG_ADDED:127,TAG_REMOVED:128,TAB_BUTTON_CLICKED:129,EDITABLE_PHOTO_FETCH_START:106,EDITABLE_PHOTO_FETCH_SUCCESS:107,EDITABLE_PHOTO_FETCH_FAILURE:108,EDITABLE_PHOTO_FETCH_DELAY:116,CANCEL_INDIVIDUAL_UPLOAD:109,MISSING_OVERLAY_NODE:118,PUBLISH_RETRY_FAILURE:119,MISSING_UPLOAD_STATE:120,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_HTML5:130,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',_checkRequiredFields:function(k){},sendBanzai:function(k,l){this._checkRequiredFields(k);var m={};k.scuba_ints=k.scuba_ints||{};k.scuba_ints.client_time=Math.round(Date.now()/1000);if(c('PhotosUploadWaterfallXConfig').retryBanzai){m.retry=true;k.scuba_ints.nonce=c('randomInt')(4294967296);}c('Banzai').post(c('PhotosUploadWaterfallXConfig').deprecatedBanzaiRoute,k,m);if(l)setTimeout(l,0);},sendSignal:function(k,l){this._checkRequiredFields(k);if(c('PhotosUploadWaterfallXConfig').useBanzai){this.sendBanzai(k,l);}else if(c('PhotosUploadWaterfallXConfig').reduceLoggingRequests){this.queueLog(k,l);}else{var m=new (c('AsyncSignal'))('/ajax/photos/waterfall.php',{data:JSON.stringify(k)}).setHandler(l);if(c('PhotosUploadWaterfallXConfig').timeout)m.setTimeout(10*1000);m.send();}},queueLog:function(k,l){h.push(k);if(!!l){this.flushQueue(l);}else j();},flushQueue:function(k){var l=JSON.stringify(h);h=[];var m=c('XPhotosWaterfallBatchLoggingController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setData({logs:l}).setFinallyHandler(k||c('emptyFunction')).setTimeoutHandler(10*1000,k||c('emptyFunction')).send();}},j=c('throttle')(i.flushQueue,c('PhotosUploadWaterfallXConfig').batchInterval*1000);f.exports=i;},null);