/*!CK:111282674!*//*1457424762,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["iDXeR"]); }

__d('ControlledReferer',['URI','UserAgent','lowerFacebookDomain'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={useFacebookReferer:function(i,j,k){var l=false;function m(){if(l)return;var o=i.contentWindow.location.pathname;if(o!=='/intern/common/referer_frame.php'&&o!=='/common/referer_frame.php')return;l=true;i.contentWindow.document.body.style.margin=0;j();}var n;if(!c('lowerFacebookDomain').isValidDocumentDomain()){n='/intern/common/referer_frame.php';}else if(c('UserAgent').isBrowser('Opera')){n='/common/referer_frame.php';}else if(new (c('URI'))(window.location.href).isSecure()){n='https://staticxx.facebook.com/common/referer_frame.php';}else n='http://staticxx.facebook.com/common/referer_frame.php';if(k)n+='?fb_source='+k;i.onload=m;i.src=n;},useFacebookRefererHtml:function(i,j,k){h.useFacebookReferer(i,function(){i.contentWindow.document.body.innerHTML=j;},k);}};f.exports=h;},null);
__d('TrackingPixel',['Arbiter','ControlledReferer','NonBlockingIFrame','WebSpeedExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_iframe:undefined,loadWithNoReferrer:function(i){if(!h._iframe)if(c('WebSpeedExperiments').non_blocking_logger){h._iframe=true;c('NonBlockingIFrame').loadIFrame().then(function(k){h._iframe=k;c('ControlledReferer').useFacebookReferer(k,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT);},null);}).done();}else{var j=document.createElement('iframe');j.frameborder=0;j.width=j.height=1;j.style.position='absolute';j.style.top='-10px';c('ControlledReferer').useFacebookReferer(j,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT);},null);document.body.appendChild(j);h._iframe=j;}c('Arbiter').subscribe('TrackingPixel/iframeIsLoaded',function(){var k=h._iframe.contentWindow,l=new k.Image();l.src=i;});}};f.exports=h;},null);
__d('ExternalTrackingTag',['AsyncSignal','TrackingPixel','Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={listenForElementClick:function(i,j,k,l,m){c('Event').listen(i,'click',function(){h.sendRequest(j,k,l,m);});},sendRequest:function(i,j,k,l){if(!i)return;new (c('AsyncSignal'))('/ads/external_tracking_tag/',{href:i,tracking_tag_id:j,adgroup_id:k,ad_id:l}).send();c('TrackingPixel').loadWithNoReferrer(i);}};f.exports=h;},null);
__d('FeedAdsClickLogger',['Arbiter','AsyncRequest','Banzai','BanzaiODS','collectDataAttributes','DOM','ge','LitestandMessages','LitestandStream','Parent','TrackingNodes','ExternalTrackingTag','URI','isFacebookURI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='ssinfeed',i={},j=false,k=[];function l(){'use strict';}l.prototype.init=function(m){'use strict';c('Arbiter').subscribe("ClickRefAction/new",this.onNewUserAction.bind(this));if(m.append_tracking_data_to_links){this.appendTrackingDataToLinks();c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));c('Arbiter').subscribe('FeedAdsClickLogger/refreshTrackingData',this.appendTrackingDataToLinks.bind(this),c('Arbiter').SUBSCRIBE_NEW);}};l.prototype.getStories=function(){'use strict';var m=c('LitestandStream').getStreamRoot();if(m){return c('DOM').scry(m,c('LitestandStream').getStoriesSelector());}else{var n=c('ge')('home_stream');if(n)return c('DOM').scry(n,'.uiStreamStory');}return [];};l.prototype.appendTrackingDataToLinks=function(){'use strict';var m=this.getStories();for(var n=0;n<m.length;n++){var o=m[n];if(o in k)continue;var p=o.getAttribute('data-ft');if(!p||p.indexOf('ei')===-1&&p.indexOf('mei')===-1)continue;var q=c('DOM').scry(o,'a');for(var r=0;r<q.length;r++){var s=q[r];if(s.getAttribute('ajaxify')!=null)continue;if(s.getAttribute('rel')!=null)continue;var t=s.getAttribute('href');if(!t||t.charAt(0)==='#')continue;var u=new (c('URI'))(s);if(c('isFacebookURI')(u)===false)continue;if(u.isLinkshimURI()===true)continue;var v=c('collectDataAttributes')(s,['ft']).ft,w=u.getQueryData();w.ft=v;w.__md__=0;u.setQueryData(w);s.setAttribute('href',u.toString());s.setAttribute('onmousedown',"this.href = this.href.replace('__md__=0', '__md__=1');");}k.push(o);}};l.prototype.getHref=function(m){'use strict';return (m.getAttribute&&(m.getAttribute('ajaxify')||m.getAttribute('data-endpoint'))||m.action||m.href);};l.prototype.sendLogRequest=function(m,n){'use strict';var o=m.ei||m.ai;if(!o&&m.mei)o=m.mf_story_key;if(m!==null&&typeof o==="string"){var p=false;if(m.tn){var q=c('TrackingNodes').parseTrackingNodeString(m.tn);for(var r=0;r<q.length;r++){var s=q[r][0];switch(s){case c('TrackingNodes').types.LIKE_LINK:case c('TrackingNodes').types.UNLIKE_LINK:case c('TrackingNodes').types.COMMENT:case c('TrackingNodes').types.COMMENT_LINK:case c('TrackingNodes').types.ADD_COMMENT_BOX:case c('TrackingNodes').types.MULTI_ATTACHMENT_VIDEO:return;case c('TrackingNodes').types.XBUTTON:case c('TrackingNodes').types.HIDE_LINK:case c('TrackingNodes').types.REPORT_SPAM_LINK:case c('TrackingNodes').types.HIDE_ALL_LINK:case c('TrackingNodes').types.DROPDOWN_BUTTON:case c('TrackingNodes').types.UNHIDE_LINK:return;case c('TrackingNodes').types.RELATED_SHARE_ARTICLE:case c('TrackingNodes').types.RELATED_SHARE_VIDEO:return;case c('TrackingNodes').types.ATTACHMENT:case c('TrackingNodes').types.USER_MESSAGE:p=true;break;}}}var t=Date.now(),u=500;m.duplicate_click=!!i[o]&&t-i[o]<u;i[o]=t;if(c('Banzai').isEnabled('ssinfeed')){c('Banzai').post(h,m,{delay:0,retry:c('Banzai').isEnabled('ssinfeed_retry')});}else{var v=new (c('AsyncRequest'))('/ajax/ssinfeed/end/').setData(m).setAllowCrossPageTransition(true).setMethod('POST');v.send();}var w=m.href;if(new (c('URI'))(w).isLinkshimURI()&&new (c('URI'))(w).getQueryData())w=new (c('URI'))(w).getQueryData().u;if(p&&!m.duplicate_click&&n!==null&&n.url&&w&&c('isFacebookURI')(new (c('URI'))(w))===false){c('ExternalTrackingTag').sendRequest(n.url,n.tag_id,n.adgroup_id);c('BanzaiODS').bumpEntityKey('external_tracking_tags','request_sent');}}};l.prototype.onNewUserAction=function(m,n){'use strict';if(!n.node)return;var o=this.getHref(n.node),p=c('Parent').byTag(n.node,'input')||c('Parent').byTag(n.node,'button');if(!o&&p&&p.type=="submit"&&p.getAttribute&&p.getAttribute('data-ft'))o="#";var q,r;if(o&&n.event&&(n.event.type==='click'||n.event.type==='contextmenu')){q=c('collectDataAttributes')(n.node,['ft']);q.ft.href=o;q.ft.mouse_type=n.event.type;r=c('collectDataAttributes')(n.node,['external-tracking-tags']);this.sendLogRequest(q.ft,r['external-tracking-tags']);}};f.exports.init=function(m){if(j===false){new l().init(m);j=true;}};},null);
__d('CalendarHomepageReminders',['Arbiter','UIPagelet','emptyFunction','ge'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='EVENT_ACTION',i={register:function(){c('Arbiter').subscribe(h,function(){if(c('ge')('pagelet_reminders'))c('UIPagelet').loadFromEndpoint('RemindersPagelet','pagelet_reminders');});i.register=c('emptyFunction');}};f.exports=i;},null);
__d("XEventReminderImpressionLoggerAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/events\/ajax\/reminder\/impression\/",{acontext:{type:"StringToStringMap",required:true},data:{type:"StringToStringMap"}});},null);
__d('EventReminderController',['Arbiter','AsyncRequest','DOM','DOMQuery','Event','Scroll','ScrollableArea','XEventReminderImpressionLoggerAsyncController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={registerReminder:function(i,j){this._firstOpen=true;var k=i.getDialog(),l=c('ScrollableArea').getInstance(c('DOMQuery').scry(k.getRoot(),'.uiScrollableArea')[0]),m=null;if(l){m=c('DOM').find(l.getElement(),'div.uiScrollableAreaWrap');l.subscribe('scroll',function(){return (c('Arbiter').inform('EventReminderDialog/scroll',{rect:m.getBoundingClientRect(),scrollTop:c('Scroll').getTop(m)}));});}c('Event').listen(i.getRoot(),'click',function(event){event.preventDefault();});k.subscribe('show',function(){var n=c('XEventReminderImpressionLoggerAsyncController').getURIBuilder().setStringToStringMap('acontext',j).setStringToStringMap('data',{first_open:this._firstOpen}).getURI();new (c('AsyncRequest'))(n).send();this._firstOpen=false;var o={};if(m)o={rect:m.getBoundingClientRect()};c('Arbiter').inform('EventReminderDialog/show',o);}.bind(this));k.subscribe('hide',function(){return c('Arbiter').inform('EventReminderDialog/hide');});}};f.exports=h;},null);
__d('FlexibleScrollableArea',['DataStore','DOM','DOMDimensions','Event','Parent','Run','Style','Vector','throttle'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=30,i=100;function j(k,l,m,n,o){'use strict';this._element=k;this._tight=l;this._measureFrom=m;this._minHeight=n;this._margin=o;c('DataStore').set(this._element,'FlexibleScrollableArea',this);c('Run').onLeave(this.cleanup.bind(this));this._listener=c('Event').listen(window,'resize',c('throttle')(this.poke,i,this));this.poke();}j.prototype.poke=function(){'use strict';var k=c('DOM').find(this._element,'.uiScrollableAreaBody'),l=c('Vector').getElementDimensions(k).y+c('DOMDimensions').measureElementBox(k,'height',true,true,true),m;if(this._tight){var n=this.getMaxHeight();if(l<n+h)n+=h;m=Math.max(Math.min(l,n),this._minHeight);}else m=Math.max(this.getMaxHeight(),this._minHeight);c('Style').set(this._element,'height',m+'px');};j.prototype.getMaxHeight=function(){'use strict';if(this._measureFrom==='bottom'){var k=c('Vector').getViewportDimensions().y,l=c('Vector').getElementPosition(this._element,'viewport').y,m=k-l;return m-this._margin;}var n=c('Vector').getElementPosition(this._element,'viewport').y+c('Vector').getElementDimensions(this._element).y;return n-this._margin;};j.prototype.cleanup=function(){'use strict';this._listener&&this._listener.remove();};j.getInstance=function(k){'use strict';var l=c('Parent').byClass(k,'flexibleScrollableArea');return l?c('DataStore').get(l,'FlexibleScrollableArea'):null;};f.exports=j;},null);
__d('LoadRecommendations',['Event','AsyncRequest'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={loadOnClick:function(i){c('Event').listen(i,'click',function(){new (c('AsyncRequest'))().setURI('/ajax/pages/reminder/recommendations').send();});}};f.exports=h;},null);
__d('ReminderStory',['AsyncRequest','Arbiter','DOMQuery','Event','FlexibleScrollableArea','LayerAutoFocus','ScrollableArea','SubscriptionsHandler','UIPagelet','getActiveElement'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m,n){'use strict';this.$ReminderStory1=false;this.$ReminderStory2=j;this.$ReminderStory3=i;c('Event').listen(i,'click',function(event){if(k&&c('DOMQuery').contains(k,event.target))return;j.show();if(l)new (c('AsyncRequest'))('/growth/reminder/logging.php').setData({context_data:l,first_click:!this.$ReminderStory1}).send();this.$ReminderStory1=true;}.bind(this));if(m)j.subscribeOnce('show',function(){c('UIPagelet').loadFromEndpoint(m,j.getContent(),n);});j.disableBehavior(c('LayerAutoFocus'));j.subscribe('aftershow',function(){var o=j.getRoot(),p=c('DOMQuery').scry(o,'#SuggestBelowInvite')[0];if(p)new (c('AsyncRequest'))('/ajax/pages/reminder/recommendations').send();var q=j.hide.bind(j);this.$ReminderStory4=new (c('SubscriptionsHandler'))();this.$ReminderStory4.addSubscriptions(c('Event').listen(window,'resize',q),c('Event').listen(window,'scroll',q));var r=c('DOMQuery').scry(o,'.inlineReplyTextArea');r[0]&&r[0].focus();var s=c('DOMQuery').scry(o,'.jewelItemNew'),t=[];s.forEach(function(x){var y=s[x].getAttribute('id');if(y&&y.endsWith('_1_req'))t=t.concat(y.replace('_1_req',''));});if(t.length>0)new (c('AsyncRequest'))('/friends/requests/log_impressions').setData({ids:t.join(','),ref:'reminder_box'}).send();var u=c('ScrollableArea').getInstance(c('DOMQuery').scry(j.getRoot(),'.uiScrollableArea')[0]),v=c('FlexibleScrollableArea').getInstance(c('DOMQuery').scry(j.getRoot(),'.flexibleScrollableArea')[0]),w=function(){if(v)v.poke();if(u){u.poke();c('Event').fire(c('DOMQuery').scry(j.getRoot(),'.scrollable')[0],'scroll');}};w();c('Arbiter').subscribe('reflow',function(){var x=c('DOMQuery').scry(o,'.fbRemindersBirthdayList');if(r&&x)for(var y=0;y<r.length;++y)if(r[y]==c('getActiveElement')()&&c('DOMQuery').contains(x[0],r[y]))w();});}.bind(this));j.subscribe('beforehide',function(){if(this.$ReminderStory4){this.$ReminderStory4.release();this.$ReminderStory4=null;}}.bind(this));}h.prototype.getDialog=function(){'use strict';return this.$ReminderStory2;};h.prototype.getRoot=function(){'use strict';return this.$ReminderStory3;};f.exports=h;},null);