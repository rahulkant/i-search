/*!CK:750583603!*//*1459132646,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["zdyVi"]); }

__d('HashtagParser',['URLMatcher','getHashtagRegex'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=100,i=30,j=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function k(ca){var da=x(ca),ea=0,fa=0;return m(ca).map(function(ga){while(ea<da.length){var ha=da[ea],ia=ha.offset-fa;if(ia<ga.offset){fa+=ha.token.length-ha.name.length;ea++;}else break;}return {marker:ga.marker,tag:ga.hashtag,rawOffset:ga.offset+fa,offset:ga.offset};});}function l(ca){return n(ca,s(ca));}function m(ca){var da=z(ca);return n(da,o(ca,da));}function n(ca,da){return q(ca).slice(0,i).filter(function(ea){var fa=u(ea.offset,ea.hashtag.length,da);return !fa&&ea.hashtag.length<=h;});}function o(ca,da){return t(r(ca),s(da));}var p=c('getHashtagRegex')();function q(ca){var da=[];ca.replace(p,function(ea,fa,ga,ha,ia){da.push({marker:ga,hashtag:ha,offset:ia+fa.length});});return da;}function r(ca){return aa(ca).map(function(da){return [da.offset,da.name.length];});}function s(ca){var da=[],ea,fa=0;while(ea=c('URLMatcher').permissiveMatch(ca)){var ga=ca.indexOf(ea);da.push([fa+ga,ea.length]);ca=ca.substring(ga+ea.length);fa+=ga+ea.length;}return da;}function t(ca,da){var ea=[],fa=0,ga=0,ha=0;while(fa<ca.length&&ga<da.length)if(ca[fa][0]>da[ga][0]){ea[ha++]=da[ga++];}else ea[ha++]=ca[fa++];return ea.concat(ca.slice(fa),da.slice(ga));}function u(ca,da,ea){if(!ea)return false;var fa=w(ea,ca);return v(ca,da,ea,fa)||v(ca,da,ea,fa+1);}function v(ca,da,ea,fa){if(!ea[fa])return false;var ga=ea[fa][0],ha=ea[fa][1];return !(ca+da-1<ga||ca>ga+ha-1);}function w(ca,da){var ea=0,fa=ca.length-1;while(ea<=fa){var ga=Math.floor((ea+fa)/2),ha=ca[ga][0];if(ha==da){return ga;}else if(ha<da){ea=ga+1;}else fa=ga-1;}return fa;}function x(ca){var da=[];ca.replace(j,function(ea,fa,ga,ha,ia){da.push({token:ea,id:fa,type:ga,name:ha,offset:ia});});return da;}function y(ca){return ca?ca.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function z(ca){return ca.replace(j,function(da,ea,fa,ga,ha){return y(ga);});}function aa(ca){var da=0,ea=0;return x(ca).map(function(fa){var ga=ca.indexOf(fa.token,ea);ea=ga+1;ga-=da;var ha=y(fa.name);da+=fa.token.length-ha.length;if(ga>=0)return {id:fa.id,name:ha,type:fa.type,offset:ga};});}var ba={};ba.parse=k;ba.parseWithoutMentions=l;f.exports=ba;},null);
__d('FacebarResultStoreUtils',['FacebarGlobalOptions','FacebarJSConstants'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getQueryFeatures:function(i){var j={};if(c('FacebarGlobalOptions').enableBootstrapRanking){if(i.raw_text)j.FEATURE_QUERY_LENGTH=i.raw_text.length;if(i.tokens){j.FEATURE_QUERY_TOKENS=i.tokens.length;j.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var k=0;k<i.tokens.length;k++)j.FEATURE_QUERY_TOKEN_LENGTH_SUM+=i.tokens[k].length;}}return j;},addFeatures:function(i,j,k,l,m,n){if(!i.features)return;i.features={FEATURE_QUERY_LENGTH:l.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:l.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:l.FEATURE_QUERY_TOKEN_LENGTH_SUM};i.features.FEATURE_IS_EXACT_NAME_MATCH=m;i.features.FEATURE_IS_STOP_WORD_MATCH=n;if(j&&j.length>0){var o=j.split(' ').length,p=0;for(var q=0;q<i.termMatches.length;++q)if(j.search(i.termMatches[q])>=0)p++;i.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=p/o;}if(k.tokens&&k.tokens.length>0){var r=j.search(k.tokens[0]);i.features.FEATURE_FIRST_TERM_MATCH_POSITION=r;i.features.FEATURE_FIRST_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[0].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[0])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});i.features.FEATURE_IN_ORDER_MATCH=1;if(k.tokens.length>1){r=j.search(k.tokens[1]);i.features.FEATURE_SECOND_TERM_MATCH_POSITION=r;i.features.FEATURE_SECOND_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[1].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[1])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});if(i.features.FEATURE_SECOND_TERM_MATCH_TOKEN<i.features.FEATURE_FIRST_TERM_MATCH_POSITION)i.features.FEATURE_IN_ORDER_MATCH=0;}}return i;},processEntityResult:function(i,j,k,l,m,n,o,p,q){var r={semantic:j.toString(),structure:[{type:i===c('FacebarJSConstants').keywordType?i:'ent:'+i,text:k,uid:j}],type:i,cost:l,cache_id_length:0,features:[]};r.tuid=JSON.stringify({semantic:r.semantic,structure:r.structure});if(c('FacebarGlobalOptions').enableBootstrapRanking){r.termMatches=o[j.toString()];r=this.addFeatures(r,k.toLowerCase(),m,n,p,q);}return r;},getRawTextFromStructured:function(i){var j=i.map(function(k){return k.getText();});return j.join('');},getTextFromResult:function(i){var j=i.structure,k='';j.forEach(function(l){k+=l.text;});return k;}};f.exports=h;},null);
__d('HashtagSearchResultUtils',['fbt','FacebarResultStoreUtils','HashtagParser','HashtagSearchResultConfig','URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={getHashtagFromQuery:function(j){var k=c('HashtagParser').parse(j);if(k&&k.length===1&&k[0].offset===0)return k[0].tag;return false;},makeTypeaheadResult:function(j){var k=h._("Hashtag");return {category:k,path:new (c('URI'))('/hashtag/'+j).toString(),photo:c('HashtagSearchResultConfig').image_url,rankType:null,replace_results:c('HashtagSearchResultConfig').boost_result?true:false,scaled_score:1,score:0,text:'#'+j,type:'hashtag_exact',uid:'hashtag:'+j};},makeFacebarEntry:function(j){var k=h._("Hashtag");return {category:k,path:new (c('URI'))('/hashtag/'+j).toString(),photo:c('HashtagSearchResultConfig').image_url,replace_results:c('HashtagSearchResultConfig').boost_result?true:false,text:'#'+j,type:'hashtag_exact',uid:'hashtag:'+j};},makeFacebarResult:function(j){var k=c('FacebarResultStoreUtils').processEntityResult('hashtag_exact','hashtag:'+j,'#'+j,c('HashtagSearchResultConfig').hashtag_cost);k.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+j}],remTokens:[],suffix:''};k.tags={hashtag:'hashtag'};return k;}};f.exports=i;},null);
__d('SearchBootstrapCache',['AsyncRequest','AsyncResponse','CacheStorage','SearchBootstrapCacheConstants'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1,i={get:function(j,k,l,m,n){var o=this.getKey(j,k,l),p=this.getStorage(),q=p.get(o),r=c('SearchBootstrapCacheConstants')[k.type]||3600000;if(q==null||Date.now()-q.timestamp>r){n(l,j,k);}else{var s=new (c('AsyncRequest'))();s.getData=function(){return q.requestData;};var t=new (c('AsyncResponse'))(s,q.payload);m(t,k);}},set:function(j,k,l){var m=j.getRequest().getData();this.getStorage().set(this.getKey(m,k,l),{timestamp:Date.now(),payload:j.payload,requestData:m});},getKey:function(j,k,l){return JSON.stringify({filter:j.filter,context:j.context,viewer:j.viewer,lazy:j.lazy,token:j.token,type:k.type,bootstrapEndpoint:l});},getStorage:function(){return new (c('CacheStorage'))('localstorage','_SearchBootstrapCache_'+h);}};f.exports=i;},null);
__d('SearchSingleState',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l,m,n){return {classNames:'grammar',groupIndex:0,indexInGroup:k,path:l,text:m,type:'grammar',uid:n};}var j={getSuggestions:function(k,l,m){if(m==='ent:user'){return this.getSuggestionsForUser(k,l);}else if(m==='ent:page'){return this.getSuggestionsForPage(k,l);}else if(m==='ent:app'){return this.getSuggestionsForApp(k,l);}else if(m==='ent:group')return this.getSuggestionsForGroup(k,l);},getSuggestionsForUser:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {full name}",[h.param('full name',l)]),'photos_of_user'),i(1,'/search/'+k+'/friends',h._("friends of {full name}",[h.param('full name',l)]),'friends_of_user'),i(2,'/search/'+k+'/pages-liked',h._("favorite pages of {full name}",[h.param('full name',l)]),'pages_liked_user'),i(3,'/search/str/'+l+'/users-named',h._("find all people named \"{full name}\"",[h.param('full name',l)]),'people_named_text')];},getSuggestionsForPage:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {name of page}",[h.param('name of page',l)]),'photos_of_page'),i(1,'/search/'+k+'/likers',h._("people who like {name of page}",[h.param('name of page',l)]),'page_likers'),i(2,'/search/str/'+l+'/pages-named',h._("find all pages named \"{name of page}\"",[h.param('name of page',l)]),'pages_named_text')];},getSuggestionsForGroup:function(k,l){return [i(0,'/search/'+k+'/members',h._("{name of group} members",[h.param('name of group',l)]),'members_of_group'),i(1,'/search/'+k+'/photos-in',h._("photos in {name of groups}",[h.param('name of groups',l)]),'photos_in_group'),i(2,'/search/'+k+'/creators',h._("{name of group} creators",[h.param('name of group',l)]),'creators_of_group'),i(3,'/search/'+k+'/admins',h._("{name of group} administrators",[h.param('name of group',l)]),'admins_of_group')];},getSuggestionsForApp:function(k,l){return [i(0,'/search/'+k+'/apps-similar-to',h._("apps similar to {name of app}",[h.param('name of app',l)]),'similar_apps'),i(1,'/search/'+k+'/app-users',h._("people who use {name of app}",[h.param('name of app',l)]),'app_users'),i(2,'/search/str/'+l+'/pages-named',h._("find all apps named \"{name of page}\"",[h.param('name of page',l)]),'apps_named_text')];}};f.exports=j;},null);
__d('SearchDataSource',['errorCode','Event','Arbiter','AsyncResponse','DataSource','HashtagSearchResultUtils','createArrayFromMixed','PageTransitionsRegistrar','SearchBootstrapCache','SearchSingleState','UnicodeCJK','FacebarJSConstants','Map','SearchRegion','debounce'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=100,l='/typeahead/search/facebar/nullstate/';i=babelHelpers.inherits(m,c('DataSource'));j=i&&i.prototype;function m(n){'use strict';n.headerflags=new (c('Map'))();if(c('SearchRegion').sgp_fork_at_webi)n.headerflags.set('X-FB-Replay-Search-Region','SGP');if(c('SearchRegion').sgp_fork_at_proxygen)n.headerflags.set('X-FB-ForkingType','edge-sgp-search');j.constructor.call(this,n);this._token=n.token||'';this._lazyonload=n.lazyonload===false?false:true;this._extraTypes=n.extraTypes;this._buckets=n.buckets;this._noMultiFetch=n.noMultiFetch||false;this._nullStateConfig=n.nullStateConfig||{};var o=n.maxResults||8;this._numResults={min:3,max:o};this.recordingRoute=n.recordingRoute||'non_banzai';this._enabledHashtag=n.enabledHashtag||false;this.logBackendQueriesWindow=n.logBackendQueriesWindow||25;this._genTime=n.genTime;this._bootstrapError=false;this._hasKeywordBootstrap=n.hasKeywordBootstrap||false;this._addJoinedTermsMatching=n.addJoinedTermsMatching||false;this._useBootstrapCache=n.useBootstrapCache||false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:n.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:n.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:n.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:n.cjkDropLatinInCjTokens});}m.prototype.init=function(){'use strict';j.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();var n=c('debounce')(this._updateMaxResults,k,this,true);c('Event').listen(window,'resize',n);if(this._nullStateConfig.prefetchNullState)this.fetchNullState('');if(this._nullStateConfig.singleState)c('Arbiter').subscribe('page_transition',this.handlePageTransition.bind(this));if(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)c('Arbiter').subscribe('search/updateNullState',this.updateNullState.bind(this));if(this._nullStateConfig.recent)c('Arbiter').subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};m.prototype.refreshRecentSearches=function(){'use strict';this.nullStateData=null;};m.prototype.handlePageTransition=function(){'use strict';this.nullStateParams={};};m.prototype.updateNullState=function(event,n){'use strict';this.nullStateParams=n;this.fetchNullState();};m.prototype.markResultsAsNullState=function(n){'use strict';if(n)for(var o=n,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;s.isNullState=true;}};m.prototype.markResultsAsSingleState=function(n){'use strict';if(n)for(var o=n,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;s.isSingleState=true;}};m.prototype.fetchNullState=function(n){'use strict';this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var o=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=n||'';o=this._fetchDataForSingleState();this.markResultsAsNullState(o);}else{o=this._fetchDataForNullState();this.markResultsAsSingleState(o);}if(o)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:o,isAsync:false,nullState:true});};m.prototype._fetchDataForSingleState=function(){'use strict';if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(l,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var n=c('SearchSingleState').getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!n)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:n,profileID:this.nullStateParams.uid};return n;};m.prototype._shouldRefreshNullState=function(){'use strict';if(!this._nullStateConfig.recent)return false;var n=window.location.href;if(!n)return false;if(n.contains('allactivity')&&n.contains('log_filter=search'))return true;return false;};m.prototype._fetchDataForNullState=function(){'use strict';if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout(function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}.bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(l,{value:""},{nullState:true,value:''});}return null;};m.prototype.dirty=function(){'use strict';j.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};m.prototype.asyncErrorHandler=function(n,o){'use strict';if(o.nullState)this.fetchingNullState=false;if(o.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:n,fetch_context:o});if(window.Dialog&&window.Dialog.getCurrent()==null&&n.getError()==1400003)c('AsyncResponse').verboseErrorHandler(n);};m.prototype.fetch=function(n,o,p){'use strict';p=p||{};p.fetch_start=Date.now();var q=c('PageTransitionsRegistrar').getMostRecentURI().path;o=babelHelpers['extends']({},o,{path:q});j.fetch.call(this,n,o,p);};m.prototype.fetchHandler=function(n,o){'use strict';if(o.nullState){this.fetchingNullState=false;this.nullStateData=n.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});return;}if(o.singleState){this.nullStateDataWithProfile.data=n.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform('respond',{results:this.nullStateDataWithProfile.data,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var p=n.getPayload(),q=babelHelpers['extends']({fetch_end:Date.now()},o),r=q.value?c('Arbiter').BEHAVIOR_EVENT:c('Arbiter').BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:n});if(o.bootstrap)this._bootstrapError=false;if(n.getRequest().uri.path===this.bootstrapEndpoint&&this._useBootstrapCache)c('SearchBootstrapCache').set(n,o,this.bootstrapEndpoint);if(o.type=='lean'){this._leanPayload=p;this._processLean();}else{if(p.coeff2_ts)q.coeff2_ts=p.coeff2_ts;j.fetchHandler.call(this,n,o);if(o.bootstrap&&!n.getRequest().getData().no_cache)q.browserCacheHit=p.timestamp<this._genTime;if(o.bootstrap&&!p.no_data&&this._bootstrapRequestsPending>0){o.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(p.no_data||p.stale||p.token!==this._token){var s=babelHelpers['extends']({},n.getRequest().getData());if(s.lazy){delete s.lazy;s.token=this._token;this._fetchOnUse(s,o);}}}this.inform('endpointStats',{info:q,response:n},r);if(o&&!!o.value)this.inform('completeFetch',{response:n,stats:q});};m.prototype.respond=function(n,o,p){'use strict';this.inform('respondValidUids',o);this.inform('reorderResults',o);var q=this.buildData(o,n);q.forEach(function(r,s){r.origIndex=s;r.fromCache=!p;});this.inform('respond',{value:n,results:q,isAsync:!!p});return q;};m.prototype.buildData=function(n,o){'use strict';if(!n||n.length===0)return [];var p=n.map(this.getEntry,this);p.length=Math.min(p.length,this._maxResults);return p;};m.prototype.fetchLean=function(){'use strict';this._fetchLean();};m.prototype._isQueryTooShort=function(n){'use strict';return n.length<this._minQueryLength&&!this._performShortQuery&&!c('UnicodeCJK').hasIdeoOrSyll(n);};m.prototype.shouldFetchMoreResults=function(n){'use strict';return n.length<this._maxResults;};m.prototype._bootstrapPostProcess=function(){'use strict';var n=0;for(var o in this._data)if(this._data.hasOwnProperty(o))n++;this.inform('bootstrapped',{time:Date.now(),size:n},c('Arbiter').BEHAVIOR_PERSISTENT);this._processLean();};m.prototype._processLean=function(){'use strict';if(this._leanPayload){var n,o=this._leanPayload.entries;for(var p in o){n=this.getEntry(p);if(n)n.index=o[p];}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};m.prototype._updateMaxResults=function(){'use strict';var n=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(n-370)/56))));};m.prototype._bootstrapFetch=function(n,o){'use strict';var p=babelHelpers['extends']({},o,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)p.lazy=1;var q={bootstrap:true,type:n};this._fetchBootstrapMaybeCache(p,q);++this._bootstrapRequestsPending;};m.prototype._fetchBootstrapMaybeCache=function(n,o){'use strict';if(this._useBootstrapCache){c('SearchBootstrapCache').get(n,o,this.bootstrapEndpoint,this.fetchHandler.bind(this),this.fetch.bind(this));}else this.fetch(this.bootstrapEndpoint,n,o);};m.prototype._fetchOnUse=function(n,o){'use strict';for(var p in this.bootstrapData)!n.hasOwnProperty(p)&&(n[p]=this.bootstrapData[p]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:n,ctx:o});}else this._fetchBootstrapMaybeCache(n,o);};m.prototype._fetchLean=function(){'use strict';var n={no_cache:1};n.options=c('createArrayFromMixed')(n.options);n.options.push('lean');this._fetchOnUse(n,{type:'lean'});};m.prototype.bootstrap=function(n){'use strict';if(!n){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var o={filter:['event'],no_cache:1};this._fetchOnUse(o,{type:'event'});var p=['app','page','group','friendlist'];p=p.concat(this._extraTypes||[]);var q=[];if(this._hasKeywordBootstrap)q.push(c('FacebarJSConstants').keywordType);if(this._noMultiFetch){p.push('user');p=p.concat(q);this._bootstrapFetch('user',{filter:p});}else{this._bootstrapFetch('other',{filter:p});if(this._buckets){for(var r=0;r<this._buckets.length;++r){var s={filter:['user'],buckets:this._buckets[r]};this._bootstrapFetch('user',s);}}else this._bootstrapFetch('user',{filter:['user']});if(q.length>0)this._bootstrapFetch('keyword',{filter:q});}this._fetchLean();this._bootstrapped=true;};m.prototype.getBootstrapError=function(){'use strict';return this._bootstrapError;};m.prototype._flushFetchOnUseRequests=function(){'use strict';var n=this._fetchOnUseRequests.length;for(var o=0;o<n;++o){var p=this._fetchOnUseRequests[o];this._fetchBootstrapMaybeCache(p.args,p.ctx);}if(n>0)this.inform('extra_bootstrap',{time:Date.now()},c('Arbiter').BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};m.prototype.onLoad=function(n,o){'use strict';this.inform('onload',{time:Date.now()},c('Arbiter').BEHAVIOR_PERSISTENT);if(n)setTimeout(this.bootstrap.bind(this,o),0);};m.prototype.mergeUids=function(n,o,p,q){'use strict';var r=this.getDynamicHashtagResult(q);if(q&&r&&o.indexOf(r)<=0)o.unshift(r);var s=p[0]?this.getEntry(p[0]):null,t=o[0]?this.getEntry(o[0]):null,u=s&&s.replace_results?s:null;u=!u&&t&&t.replace_results?t:u;var v=j.mergeUids.call(this,n,o,p,q);if(u){this.inform('backend_topreplace',{});return this.deduplicateByKey([u.uid].concat(v));}return v;};m.prototype.getTextToIndexFromFields=function(n,o){'use strict';var p=[],q=n.tokenVersion==="v2";for(var r=0;r<o.length;++r){if(q&&(o[r]==="text"||o[r]==="alias"))continue;var s=n[o[r]];if(s){s=s.join?s.join(' '):s;p.push(s);if(o[r]=='text'&&this._addJoinedTermsMatching){s=s.toLowerCase();s=s.replace(/ /g,'');p.push(s);}}}return p.join(' ');};m.prototype.getDynamicHashtagResult=function(n){'use strict';if(!n||!this._enabledHashtag)return;var o=c('HashtagSearchResultUtils').getHashtagFromQuery(n);if(!o)return;var p='hashtag:'+o,q=this.getEntry(p);if(!q)this.processEntries([c('HashtagSearchResultUtils').makeTypeaheadResult(o)],n);return p;};f.exports=m;},null);
__d('legacy:SearchDataSource',['SearchDataSource'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.SearchDataSource=c('SearchDataSource');},3);
__d('SearchTypeaheadCore',['Arbiter','DOM','Event','Input','Keys','Parent','ScriptPath','TypeaheadCore'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('TypeaheadCore'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);}j.prototype.init=function(k,l,m){'use strict';i.init.call(this,k,l,m);var n=c('Parent').byTag(m,'form'),o=this.reset.bind(this);c('Arbiter').subscribe('pre_page_transition',function(event,q){var r=/^\/search/,s=r.test(q.from.path),t=r.test(q.to.path);if(s&&!t)setTimeout(o,0);});if(n){var p=c('DOM').find(n,'input.search_sid_input');c('Event').listen(n,'submit',function(){if(this.data&&this.data.queryData)p.value=this.data.queryData.sid;setTimeout(o,0);}.bind(this),c('Event').Priority.URGENT);}};j.prototype.select=function(){'use strict';this.reset();this.element.focus();setTimeout(function(){this.element.blur();}.bind(this),0);c('ScriptPath').setClickPointInfo({click:'Search'});};j.prototype.handleTab=function(event){'use strict';var k=this.view.getQuerySuggestion(this.value);if(k){c('Input').setValue(this.element,k);this.checkValue();event.kill();}else i.handleTab.call(this,event);};j.prototype.getSearchType=function(){'use strict';return 'regular';};j.prototype.focus=function(){'use strict';i.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};j.prototype.keyup=function(event){'use strict';if(this.getValue().length===0&&c('Event').getKeyCode(event)===c('Keys').ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};f.exports=j;},null);
__d('legacy:SearchTypeaheadCore',['SearchTypeaheadCore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadCore=c('SearchTypeaheadCore');},3);
__d('SearchPeopleFriendsOf',['fbt','TokenizeUtil','URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){'use strict';this.friendsOfUri=j;this.placementStrategy=k.placement_strategy;this.placementParams=k.placement_params;this.triggerStrategy=k.trigger_strategy;this.triggerParams=k.trigger_params;}i.prototype.injectInto=function(j,k){'use strict';if(!j||j.length===0||!this.$SearchPeopleFriendsOf1(j,k))return;if(j[0].type!=="user")return;var l=this.createFindAllFriendsOf(j[0].text,j[0].uid);this.$SearchPeopleFriendsOf2(l,j);};i.prototype.$SearchPeopleFriendsOf2=function(j,k){'use strict';var l=this.$SearchPeopleFriendsOf3(k);if(l==='last'){var m=k.filter(function(n){return n.type==='user';}).length;l=m;}k.splice(l,0,j);};i.prototype.$SearchPeopleFriendsOf1=function(j,k){'use strict';var l=this.$SearchPeopleFriendsOf4(this.triggerStrategy);return l(j,this.triggerParams,k);};i.prototype.$SearchPeopleFriendsOf3=function(j){'use strict';var k=this.$SearchPeopleFriendsOf4(this.placementStrategy);return k(j,this.placementParams);};i.prototype.$SearchPeopleFriendsOf4=function(j){'use strict';return this["$SearchPeopleFriendsOf_"+j];};i.prototype.$SearchPeopleFriendsOf5=function(j,k,l){'use strict';return false;};i.prototype.$SearchPeopleFriendsOf6=function(j,k,l){'use strict';return true;};i.prototype.$SearchPeopleFriendsOf7=function(j,k,l){'use strict';var m=parseInt(k,10),n=0;for(var o=0;o<j.length;o++){var p=j[o];if(p.type==='user'&&p.index_rank==-1)n++;if(n>m)return false;}return true;};i.prototype.$SearchPeopleFriendsOf8=function(j,k,l){'use strict';var m=parseInt(k,10),n=c('TokenizeUtil').tokenize(l);n=n.map(function(v){return v.toLowerCase();});var o=0;for(var p=0;p<j.length;p++){var q=j[p];if(q.type!=='user'||q.index_rank!=-1)continue;var r=c('TokenizeUtil').tokenize(q.text);r=r.map(function(v){return v.toLowerCase();});if(r.length<n.length)continue;var s=true;for(var t=0;t<n.length-1;t++)if(n[t]!==r[t]){s=false;break;}var u=n.length-1;if(s&&r[u].startsWith(n[u])){o++;if(o>=m)return false;}}return true;};i.prototype.$SearchPeopleFriendsOf9=function(j,k){'use strict';return "last";};i.prototype.$SearchPeopleFriendsOf10=function(j,k){'use strict';return 1;};i.prototype.createFindAllFriendsOf=function(j,k){'use strict';var l=h._("{name}'s Friends",[h.param('name',j)]),m=new (c('URI'))(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:k}).toString();return {uid:'people_search',type:'user',text:l,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:m};};f.exports=i;},null);
__d('SearchPeopleSeeMore',['fbt','invariant','TokenizeUtil','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){var m=l.placement,n=l.strategy,o=l.min_users,p=l.query_to_show;'use strict';this.seeMoreUri=k;this.placement=m;this.strategy=n;this.min_users=o;this.query_to_show=p;}j.prototype.injectInto=function(k,l){'use strict';if(!k||k.length===0)return;var m=this.$SearchPeopleSeeMore1(k,l);if(!m)return;var n=this.createFindAllPeopleResult(m);this.$SearchPeopleSeeMore2(n,k);};j.prototype.$SearchPeopleSeeMore1=function(k,l){'use strict';if(this.strategy==='disabled')return null;if(k[0].type!=='user')return null;var m=k.filter(function(q){return q.type==='user';});if(m.length<this.min_users){return null;}else if(m.length>this.min_users)m=m.slice(0,this.min_users);var n,o=m[0];switch(this.strategy){case 'all_identical':var p=m.every(function(q){return this.$SearchPeopleSeeMore3(o.text,q.text);}.bind(this));n=p?o.text:null;break;case 'top_results_prefix':n=m.reduce(function(q,r){return this.$SearchPeopleSeeMore4(q,r.text);}.bind(this),o.text);break;default:i(0);}if(!n)return null;return this.query_to_show==='common'?n:l;};j.prototype.$SearchPeopleSeeMore2=function(k,l){'use strict';if(this.placement==='last'){var m=l.filter(function(o){return o.type==='user';}).length;l.splice(m,0,k);}else{var n=parseInt(this.placement,10);l.splice(n,0,k);}};j.prototype.createFindAllPeopleResult=function(k){'use strict';var l=h._("Find all people named \"{query}\"",[h.param('query',k.toLowerCase())]),m=new (c('URI'))(this.seeMoreUri).addQueryData({q:k,init:'psm'}).toString();return {uid:'people_search',type:'user',text:l,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:m};};j.prototype.$SearchPeopleSeeMore3=function(k,l){'use strict';if(k===l)return true;var m=c('TokenizeUtil').tokenize(k),n=c('TokenizeUtil').tokenize(l);if(m.length!==n.length)return false;return m.every(function(o,p){return o===n[p];});};j.prototype.$SearchPeopleSeeMore4=function(k,l){'use strict';if(!k||!l)return;if(k===l)return k;var m=c('TokenizeUtil').tokenize(k),n=c('TokenizeUtil').tokenize(l),o=[];for(var p=0;p<m.length&&p<n.length;p++)if(m[p]===n[p]){o.push(m[p]);}else break;if(o.length===0)return null;return o.join(' ');};f.exports=j;},null);
__d('SearchTypeaheadView',['csx','cx','fbt','Arbiter','ContextualLayerUpdateOnScroll','ContextualTypeaheadView','DOM','FbtResult','SearchPeopleFriendsOf','SearchPeopleFriendsOfOptions','SearchPeopleSeeMore','SearchPeopleSeeMoreOptions','URI','goURI','isEmail'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,c('ContextualTypeaheadView'));l=k&&k.prototype;function m(o,p){'use strict';l.constructor.call(this,o,p);this._peopleSeeMore=new (c('SearchPeopleSeeMore'))(this.getSeeMoreEndpoint('',true),c('SearchPeopleSeeMoreOptions'));this._peopleFriendsOf=new (c('SearchPeopleFriendsOf'))(this.getSeeMoreEndpoint('',true),c('SearchPeopleFriendsOfOptions'));}m.prototype.initializeLayer=function(){'use strict';l.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(c('ContextualLayerUpdateOnScroll'));};m.prototype.ignoreClick=function(event){'use strict';event.prevent();};m.prototype.render=function(o,p,q){'use strict';if(!p)return;if(this._bucketize)p=n(p);if(this.showPeopleSeeMore&&o)this._peopleSeeMore.injectInto(p,o);if(this.showPeopleFriendsOf&&o)this._peopleFriendsOf.injectInto(p,o);var r={results:p,value:o};this.inform('finalResultsReordering',r);return l.render.call(this,o,r.results,q);};m.prototype.disableBucketization=function(){'use strict';this._bucketize=false;};m.prototype.buildBuckets=function(o,p){'use strict';var q=p.length,r=0,s;for(s=0;s<q;++s)if(p[s].type=='user')r++;this._redirectToUsersResultsPage=this.showFilterResults&&r===q;this.setWebSuggLoggingParams(o,p);if(!o&&this.showFindPeople)p.unshift(this.buildFindPeople());if(this._bucketize)p=l.buildBuckets.call(this,o,p);if(o&&this._shouldShowSeeMore){p.push(this.buildSeeMore(o,q));if(c('isEmail')(o)&&r<1)p.push(this.buildInvite(o));}return p;};m.prototype.buildFindPeople=function(){'use strict';var o=j._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:o,type:'no_header'};};m.prototype.buildSeeMore=function(o,p){'use strict';var q=this.getSeeMoreText(o,p),r=this.getSeeMoreSubtext(p),s,t,u,v='',w='',x='';if(this.showseemorev2){t='seeMoreV2';u='calltoactionV2';x=c('DOM').create('span',{className:'simpleSearchSeeMoreRowRedesignIcon'});}else{t='seeMore';u='calltoaction';v=c('DOM').create('span',{className:'arrow'});w=c('DOM').create('span',{className:'subtext'},[r]);}s=c('DOM').create('li',{className:u},[x,c('DOM').create('a',{href:this.getSeeMoreEndpoint(o),rel:'ignore'},[c('DOM').create('span',{className:'text'},[c('DOM').create('span',{className:t},q),v,w])])]);if(q instanceof c('FbtResult')){s.setAttribute('aria-label',q.flattenToArray());}else s.setAttribute('aria-label',q);return {uid:'search',node:s,search:true};};m.prototype.getSeeMoreText=function(o,p){'use strict';if(this.showKeywordResultsPage)return j._("Search for {query}",[j.param('query',o)]);if(p<=0)return j._("See results for {query}",[j.param('query',o)]);if(this._redirectToUsersResultsPage)return j._("Filter results for {query}",[j.param('query',o)]);if(this.showseemorev2){var q=c('DOM').create('b',{},o);return j._("Find more results for {query}",[j.param('query',q)]);}else return j._(["See more results for {query}","44e6d113d67af68d7209174cf9420c3d"],[j.param('query',o)]);};m.prototype.getSeeMoreSubtext=function(o){'use strict';if(o===0)return j._("No results to display");if(o===1)return j._("Displaying top result");return j._({"*":"Displaying top {number} results"},[j.param('number',o,[0])]);};m.prototype.buildInvite=function(o){'use strict';var p=j._("Invite {query} to Facebook",[j.param('query',o)]),q=c('DOM').create('li',{className:'calltoaction'},[c('DOM').create('a',{href:this.getInviteEndpoint(o),rel:'ignore'},[c('DOM').create('span',{className:'text'},[c('DOM').create('span',{className:'invite'},[p])])])]);if(p instanceof c('FbtResult')){q.setAttribute('arial-label',p.flattenToArray());}else q.setAttribute('aria-label',p);return {uid:'invite',node:q,search:true};};m.prototype.searchPageQueryData=function(o){'use strict';return babelHelpers['extends']({q:o},this.queryData||{});};m.prototype.searchPageTypeData=function(o){'use strict';return this._redirectToUsersResultsPage||o?{type:"users"}:{};};m.prototype.select=function(o){'use strict';var p=this.index,q=this.results[p];if(!q||q.type=='header')return;var r=this.items[p],s=c('DOM').scry(r,'a')[0];l.select.call(this,o);if(s&&s.href)if(s.target=='_blank'){window.open(s.href);}else c('goURI')(s.href);};m.prototype.setSid=function(o){'use strict';this.queryData.tas=o;};m.prototype.getSeeMoreEndpoint=function(o,p){'use strict';return new (c('URI'))(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(o)).addQueryData(this.searchPageTypeData(p)).toString();};m.prototype.getInviteEndpoint=function(o){'use strict';return new (c('URI'))('/invite.php').addQueryData({email_list:o});};m.prototype.show=function(){'use strict';if(!this.isVisible()){c('Arbiter').inform('layer_shown',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||c('DOM').scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0])CSS.addClass(this.searchBtns[0],"btnSelected");l.show.call(this);}};m.prototype.hide=function(){'use strict';if(this.isVisible()){c('Arbiter').inform('layer_hidden',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||c('DOM').scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0]&&CSS.matchesSelector(this.searchBtns[0],".btnSelected"))CSS.removeClass(this.searchBtns[0],"btnSelected");l.hide.call(this);}};m.prototype.getQuerySuggestion=function(o){'use strict';var p=this.results[this.index],q=p&&p.type!='header'?p.text.toLowerCase():'';return q==o.toLowerCase()?'':q;};m.prototype.setWebSuggLoggingParams=function(o,p){'use strict';var q=0,r=0;for(var s=0;s<p.length;s++)if(p[s].type==='websuggestion'){if(r===0)r=s+1;var t='FR'+(s-q)+'AS'+q,u=s+1;p[s].path+='&wssk='+t+'&wssp='+u+'&wspq='+encodeURIComponent(o);p[s].path+='&wssrc='+p[s].websuggestion_source;q++;}var v='&wssc='+p.length+'-'+o.length+'&wsbp='+q+'-'+r;for(s=0;s<p.length;s++)if(p[s].type==='websuggestion')p[s].path+=v;};function n(o){var p,q,r,s,t=[],u={};q=o.length;for(p=0;p<q;p++){r=o[p];s=r.render_type||r.type;if(!u.hasOwnProperty(s)){u[s]=t.length;t.push([]);}t[u[s]].push(r);}var v=[];q=t.length;for(p=0;p<q;++p){r=t[p][0];s=r.render_type||r.type;v=v.concat(t[p]);}return v;}Object.assign(m.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});f.exports=m;},null);
__d('legacy:SearchTypeaheadView',['SearchTypeaheadView'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadView=c('SearchTypeaheadView');},3);
__d('SearchTypeaheadRecorder',['AsyncRequest','Banzai','BanzaiNectar','BanzaiScuba','CurrentUser','Event','FacebarGlobalOptions','Keys','TokenizeUtil','Vector','clickRefAction','mapObject','ge','throttle','whitelistObjectKeys'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={WAITING:'WAITING',SUCCESS:'SUCCESS',NO_RESULTS:'NO_RESULTS',ERROR:'ERROR'};function i(k){'use strict';this.init(k);this.initEvents(k);}i.prototype.init=function(k){'use strict';this.core=k.getCore();this.data=k.getData();this.view=k.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=false;this.allFromNullState=false;var l=c('ge')('search_first_focus');this.initStartTime=l&&l.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};i.prototype._reset=function(){'use strict';this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var k=Math.random().toString();this.data.setQueryData({sid:k});this.view.setSid(k);this.recordStat('sid',k);this.recordStat('keypressed',0);};i.prototype.initEvents=function(){'use strict';this.core.subscribe('focus',function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var k=new Date(),l=k.getTimezoneOffset(),m=Date.now()-l*60*1000;this.recordStat('session_start_time_user_timezone',m);}}.bind(this));this.core.subscribe('blur',function(event){var k=Date.now();for(var l in this._inflightRequests){var m=this._inflightRequests[l],n=k-m;this.recordAvgStat('search_endpoint_ms_from_js',n);}this.recordStat('session_end_time',k);this.submit();}.bind(this));this.view.subscribe('select',function(k,l){this.recordSelectInfo(l);}.bind(this));this.view.subscribe('render',function(k,l){this.recordRender(l);}.bind(this));this.data.subscribe('logPerformanceTiming',function(k,l){this.performanceTimings[l.field]=l.value;}.bind(this));this.data.subscribe('activity',function(k,l){this.recordStat('pending_request',l.activity);}.bind(this));this.data.subscribe('respondValidUids',function(k,l){this.validUids=l.slice(0);}.bind(this));this.data.subscribe('beforeQuery',function(k,l){if(!l.value){this.query='';this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=l.value;if(!this.queryStartTime)this.queryStartTime=[];this.queryStartTime[this.query]=Date.now();this.recordCountStat('num_queries');}.bind(this));this.data.subscribe('queryEndpoint',function(k,l){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',l.value.length);this._inflightRequests[l.value]=Date.now();}.bind(this));this.data.subscribe('onload',function(k,l){this._onloadTime=l.time;}.bind(this));this.data.subscribe('bootstrapped',function(k,l){this.bootstrapStats.endTime=l.time;this.bootstrapStats.bootstrapped=1;}.bind(this));this.core.subscribe('recordFunction',function(k,l){this._extraRecorder.push(l);}.bind(this));this.data.subscribe('endpointStats',function(k,l){var m=l.info,n=m.fetch_end-m.fetch_start;if(m.value){this.recordAvgStat('search_endpoint_ms_from_js',n);}else this.bootstrapStats[m.type]=n;if(m.coeff2_ts)this.bootstrapStats.coeff2_ts=m.coeff2_ts;if(typeof m.browserCacheHit!='undefined')this.recordCountStat(m.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[m.value])delete this._inflightRequests[m.value];}.bind(this));this.data.subscribe('fetchComplete',function(k,l){var m=l.entries,n=l.value;if(n&&this.backendQueriesStatus[n]){this._addDurationForBackendQuery(this.backendQueriesStatus[n]);this.backendQueriesStatus[n].status=m&&m.length>0?h.SUCCESS:h.NO_RESULTS;}}.bind(this));this.data.subscribe('fetchError',function(k,l){var m=l.fetch_context,n=m.value;if(m.bootstrap||!n)return;if(this.backendQueriesStatus[n]){this.backendQueriesStatus[n].status=h.ERROR;this._addDurationForBackendQuery(this.backendQueriesStatus[n]);}}.bind(this));this.data.subscribe('query',function(k,l){this.recordAvgStat('num_results_from_cache',l.results.length);}.bind(this));this.data.subscribe('backend_topreplace',function(k,l){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}.bind(this));this.data.subscribe('completeFetch',function(k,l){if(this.core.scubaInfo){var m=l.response,n={recv:l.stats.fetch_end-l.stats.fetch_start,render:Date.now()-l.stats.fetch_start,payload_size:JSON.stringify(m).length};if(!m.payload.entities)m.payload.entities=this.buildResults();this.logToScuba(m,n,this.core.scubaInfo,this.query,this.type);}}.bind(this));this.data.subscribe('completeCacheFetch',c('throttle')(function(k,l){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}.bind(this),500));c('Event').listen(this.element,'keydown',function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(c('Event').getKeyCode(event)==c('Keys').BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}.bind(this));this.data.subscribe('beforeFetch',function(k,l){var m=l.request.data.value;if(!m)return;this.backendQueries.push(m);this.backendQueriesStatus[m]={status:h.WAITING,start_time:Date.now()};}.bind(this));};i.prototype.recordStat=function(k,l){'use strict';this.stats[k]=l;};i.prototype.recordCountStat=function(k){'use strict';var l=this.stats[k];this.stats[k]=l?l+1:1;};i.prototype.recordAvgStat=function(k,l){'use strict';if(this.avgStats[k]){this.avgStats[k][0]+=l;++this.avgStats[k][1];}else this.avgStats[k]=[l,1];};i.prototype.recordAppendStat=function(k,l){'use strict';if(!this.appendStats.hasOwnProperty(k))this.appendStats[k]=[];this.appendStats[k].push(l);};i.prototype.recordRender=function(k){'use strict';this.results=k.filter(function(u){return u.uid!='search'&&u.type!='disabled_result'&&u.type!='header';}).map(function(u){return babelHelpers['extends']({},u);});var l=null;if(this.queryStartTime)l=this.queryStartTime[this.query];var m=this.results.every(function(u){return u.fromCache||u.isSeeMore;}),n=this.results.every(function(u){return u.isFromGSEF||u.fromCache||u.isSeeMore;})&&this.results.some(function(u){return u.isFromGSEF;}),o=this.results.every(function(u){return u.isNullState;}),p=this.results.every(function(u){return u.isSingleState;}),q=this.results.every(function(u){return u.exactMatchKeyword||u.isSeeMore;});this.allFromSingleState=p;this.allFromNullState=o;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&o){this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&p){this.recordStat('time_render_single_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);}else if(l){var r=Date.now()-l;if(q){this.recordAppendStat('times_render_gs_echo',r);}else this.recordAppendStat(m?'times_render_local':'times_render_remote',r);if(!m&&n)this.recordAppendStat('time_render_gs_early_fetch',r);}this.data.lastNullOrSingleStateFetchStartTime=null;var s=c('Vector').getViewportDimensions();this.recordStat('window_size_width',s.x);this.recordStat('window_size_height',s.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());var t='typed';if(this.allFromNullState){t='nullstate';}else if(this.allFromSingleState)t='singlestate';this.recordStat('last_state',t);};i.prototype.recordSelectInfo=function(k){'use strict';var l=k.selected,m=k.index;if(l.groupIndex!==undefined)m=k.index-l.groupIndex-1;var n={href:l.path},o=l.dataGT?{gt:JSON.parse(l.dataGT)}:{};c('clickRefAction')('click',n,null,null,o);if(l.uid=='search'||l.uid=='people_search'){this.recordStat('selected_search',1);}else if(l.uid=='invite'){this.recordStat('selected_invite',1);}else{var p=l.log_type||l.rankType||l.render_type||l.type,q=p=='friend'?'user':p;this.recordStat('selected_'+q,1);this.recordStat('selected_position',m);this.recordStat('selected_type',p);this.recordStat('selected_name_length',l.text.length);this.recordStat('selected_id',l.uid);this.recordStat('selected_degree',l.bootstrapped?1:2);this.recordStat('selected_recent_search',l.recent_search);var r=c('TokenizeUtil').parse(this.data.getTextToIndex(l)).tokens,s=j(r,this.query);if(s)this.recordStat('matched_terms',s);}var t={};this._extraRecorder.forEach(function(u){u(k,this.results,t);}.bind(this));this.recordStat('extra_select_info',JSON.stringify(t));this.recordStat('selected_with_mouse',k.clicked?1:0);};i.prototype._addDurationForBackendQuery=function(k){'use strict';if(k.start_time){k.duration=Date.now()-k.start_time;delete k.start_time;}};i.prototype._dataToSubmit=function(){'use strict';this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var k=this.data.getBootstrapError();if(k)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var l=c('whitelistObjectKeys')(this.backendQueriesStatus,this.backendQueries);c('mapObject')(l,this._addDurationForBackendQuery,this);this.recordStat('backend_queries_status',l);}if(c('FacebarGlobalOptions').taSessionLoggingSample){var m=[];this.results.forEach(function(r){m.push([r.text||'',r.category||'',r.subtext||'']);});this.recordStat('raw_suggestions_text',m);}var n=this.stats;for(var o in this.avgStats){var p=this.avgStats[o];n[o]=p[0]/p[1];}for(var q in this.appendStats)n[q]=JSON.stringify(this.appendStats[q]);return n;};i.prototype.buildResults=function(){'use strict';var k=(this.results||[]).map(function(l,m){var n=c('TokenizeUtil').parse(this.data.getTextToIndex(l)).tokens,o=l.rankType||l.render_type||l.type,p=l.bootstrapped?1:0,q=l.s_token||'',r=typeof l.index=='undefined'?100:l.index,s=j(n,this.query)||this.query,t=l.index_rank,u=l.match_type,v=l.l_type,w=l.vertical_type,x=l.prefix_match,y=l.prefix_length,z=l.text,aa=l.category,ba=l.subtext,ca=l.fromCache,da=l.isNullState,ea=l.isSingleState,fa=l.logInfo;if(typeof l.groupIndex=='number')return [l.groupIndex,l.indexInGroup,l.uid,o,p,q,s,t,u,x,y,l.origIndex,v,w,z,aa,ba,r,ca,da,ea,fa];return [0,m,l.uid,o,p,q,s,t,u,x,y,l.origIndex,v,w,z,aa,ba,r,ca,da,ea,fa];}.bind(this));return JSON.stringify(k);};i.prototype.submit=function(){'use strict';var k=this._dataToSubmit();switch(this.data.recordingRoute){case 'banzai_vital':c('Banzai').post(this._banzaiRoute,k,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(k);}this._reset();};i.prototype.addLatencyToSample=function(k,l,m,n){'use strict';k.addInteger(n+'query_start',m.queryStart);k.addInteger(n+'query_end',m.queryEnd);k.addInteger(n+'keypress_query_end',m.keyPressToQueryEnd);k.addInteger(n+'render',m.render);k.addInteger(n+'keypress_render',m.keyPressToRender);l[n+'query_start']=m.queryStart;l[n+'query_end']=m.queryEnd;l[n+'keypress_query_end']=m.keyPressToQueryEnd;l[n+'render']=m.render;l[n+'keypress_render']=m.keyPressToRender;};i.prototype.logToScuba=function(k,l,m,n,o){'use strict';var p={},q=new (c('BanzaiScuba'))('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});q.addInteger('sample_rate',m.sample_rate);p.sample_rate=m.sample_rate;q.addNormal('site',m.site);p.site=m.site;q.addDenorm('query',n);p.query=n;var r=k.payload||{};if(r.entities){q.addInteger('num_entities',r.entities.length);p.num_entities=r.entities.length;}Object.keys(this.performanceTimings).forEach(function(t){q.addInteger(t,this.performanceTimings[t]);p[t]=this.performanceTimings[t];}.bind(this),this);if(r.results||r.entries){var s=(r.results||r.entries).length;q.addInteger('num_results',s);p.num_results=s;}if(r.gzipped_payload_size!==undefined){q.addInteger('gzipped_payload_size',r.gzipped_payload_size);p.gzipped_payload_size=r.gzipped_payload_size;}if(l.recv&&l.render>l.recv){q.addInteger('time_render',l.render-l.recv);p.time_render=l.render-l.recv;q.addInteger('time_js_async',l.recv);p.time_js_async=l.recv;}if(l.payload_size){q.addInteger('payload_size',l.payload_size);p.payload_size=l.payload_size;}if(this.stats.time_render_null_state&&(!n||n.length===0)){q.addInteger('time_render_null_state',this.stats.time_render_null_state);p.time_render_null_state=this.stats.time_render_null_state;}q.addInteger('query_id',k.queryId);p.query_id=k.queryId;q.addDenorm('user_id',c('CurrentUser').getID());p.user_id=c('CurrentUser').getID();q.addDenorm('session_id',this.stats.sid);p.session_id=this.stats.sid;q.addNormal('typeahead_type',o);p.typeahead_type=o;if(l.remoteQueryLatencies){this.addLatencyToSample(q,p,l.remoteQueryLatencies,'remote_');q.addInteger('remote_keypress_query_dispatch',l.remoteQueryLatencies.keyPressToQueryDispatch);p.remote_keypress_query_dispatch=l.remoteQueryLatencies.keyPressToQueryDispatch;q.addInteger('remote_keypress_query_start',l.remoteQueryLatencies.keyPressToQueryStart);p.remote_keypress_query_start=l.remoteQueryLatencies.keyPressToQueryStart;q.addNormal('inflight_requests',l.remoteQueryLatencies.inflightRequests);q.addInteger('inflight_requests',l.remoteQueryLatencies.inflightRequests);p.inflight_requests=l.remoteQueryLatencies.inflightRequests;q.addNormal('waiting_queries',l.remoteQueryLatencies.waitingQueries);q.addInteger('waiting_queries',l.remoteQueryLatencies.waitingQueries);p.waiting_queries=l.remoteQueryLatencies.waitingQueries;}if(l.cacheQueryLatencies)this.addLatencyToSample(q,p,l.cacheQueryLatencies,'cache_');q.post();c('BanzaiNectar').log('search_facebar_js','typeahead',p);};i.prototype.submitThroughAsyncRequest=function(k){'use strict';if(Object.keys(k).length>0)new (c('AsyncRequest'))().setURI(this._endPoint).setMethod('POST').setData({stats:k}).setOption('handleErrorAfterUnload',true).setErrorHandler(function(l){k.retry=true;new (c('AsyncRequest'))().setURI(this._endPoint).setMethod('POST').setData({stats:k}).setOption('asynchronous_DEPRECATED',false).send();}.bind(this)).send();};var j=function(k,l){if(!k||!l)return;var m=c('TokenizeUtil').parse(l);if(m.flatValue[m.flatValue.length-1]===' ')return m.flatValue;var n=m.tokens[m.tokens.length-1],o={};k.forEach(function(t){o[t]=(o[t]||0)+1;});var p={},q=m.tokens.slice(0,m.tokens.length-1);q.forEach(function(t){p[t]=(p[t]||0)+1;});for(var r=0;r<k.length;++r){var s=k[r];if(s.indexOf(n)===0&&o[s]-(p[s]||0)>0){q.push(s);return q.join(' ');}}return undefined;};Object.assign(i.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});f.exports=i;},null);
__d('TypeaheadSearchRecorderBasic',['SearchTypeaheadRecorder','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';new (c('SearchTypeaheadRecorder'))(this._typeahead);};Object.assign(h.prototype,{disable:c('emptyFunction')});f.exports=h;},null);
__d('legacy:SearchRecorderBasicTypeaheadBehavior',['TypeaheadSearchRecorderBasic'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(c('TypeaheadSearchRecorderBasic'));};},3);
__d('SearchTypeaheadRenderer',['fbt','BadgeHelper','DOM','Locale','TokenizeUtil','TypeaheadFacepile','URI','UnicodeBidi','WWWBase'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=' \u00B7 ',j=false;function k(l,m){var n=[],o=l.photos||l.photo;if(o){if(o instanceof Array){o=c('TypeaheadFacepile').render(o);}else o=c('DOM').create('img',{alt:'',src:o});n.push(o);}var p;if(l.text){var q=l.alias,r=this.value,s=l.text,t=c('UnicodeBidi').isDirectionRTL(s.toString()),u=c('Locale').isRTL(),v=t&&!u?'rtl':!t&&u?'ltr':'';p=[s];if(q&&c('TokenizeUtil').isQueryMatch(r,q)&&!c('TokenizeUtil').isQueryMatch(r,s))p.push(c('DOM').create('span',{className:'alias'},[' \xB7 '+q]));if(l.is_verified){p.push(c('BadgeHelper').renderBadge('xsmall','verified'));}else if(l.is_work_user)p.push(c('BadgeHelper').renderBadge('xsmall','work'));if(l.badge){p.push(c('DOM').create('span',{className:''},' \xB7 '));var w=[l.badge];p.push(c('DOM').create('span',{className:'unSeenPosts'},w));}n.push(c('DOM').create('span',{className:'text',dir:v},p));}if(l.category){var x=[l.category];if(l.is_external)x.push(c('DOM').create('span',{className:'arrow'}));var y=l.message?'preCategory':'category';n.push(c('DOM').create('span',{className:y},x));}if(l.message)n.push(c('DOM').create('span',{className:'category'},[l.message]));var z=l.subtextOverride||l.subtext;if(z){var aa=[z];if(l.saved_context){var ba=c('DOM').create('span',{className:'saved'},[l.saved_context]);aa.unshift(ba,i);}n.push(c('DOM').create('span',{className:'subtext'},aa));}var ca=l.classNames||l.type||'',da=l.is_external?'_blank':'',ea=!l.song&&l.path||'';if(ea){if(!/^https?\:\/\//.test(ea))ea=c('WWWBase').uri+ea.substr(1);ea+=(ea.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var fa=c('DOM').create('a',{href:ea,rel:'ignore',target:da},n),ga=null;if(l.type==='header'){var ha=null,ia=null;if(l.uid==='recent'){ia=new (c('URI'))('/profile.php');ia.setQueryData({sk:'allactivity',log_filter:'search'});ha=h._("EDIT");}else if(l.uid==='pymk'){ia=new (c('URI'))('/find-friends/browser/');ha=h._("SEE ALL");}if(ia){ga=c('DOM').create('a',{href:ia,className:'typeaheadHeaderRightLink'},ha);fa.setAttribute('class','typeaheadHeaderLeftLink');ca+=' typeaheadHeader';}}var ja=c('DOM').create('li',{className:ca},[fa,ga]);if(l.text){ja.setAttribute('title',l.text);ja.setAttribute('aria-label',l.text);}if(this.showupadatedsuggestions&&!j){k.className+=' updatedSuggestionRows';j=true;}return ja;}k.className='search';f.exports=k;},null);
__d('legacy:SearchTypeaheadRenderer',['SearchTypeaheadRenderer'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.search=c('SearchTypeaheadRenderer');},3);
__d('TypeaheadShowLoadingIndicator',['CSS'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';this._subscription=this._typeahead.subscribe('loading',function(i,j){c('CSS').conditionClass(this._typeahead.getElement(),'typeaheadLoading',j.loading);c('CSS').conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',j.loading);}.bind(this));};h.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(h.prototype,{_subscription:null});f.exports=h;},null);
__d('legacy:ShowLoadingIndicatorTypeaheadBehavior',['TypeaheadShowLoadingIndicator'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.showLoadingIndicator=function(h){h.enableBehavior(c('TypeaheadShowLoadingIndicator'));};},3);
__d('legacy:Typeahead',['Typeahead'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.Typeahead=c('Typeahead');},3);
void 0;
__d("XSearchFacebarSurveyController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true},on_session_start:{type:"Exists",defaultValue:false},result_selected:{type:"Exists",defaultValue:false}});},null);
__d('AbandonedSessionSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.core=i.getCore();this.data=i.getData();this.view=i.getView();this.tryToSubmitSurvey=this.tryToSubmitSurvey.bind(this);this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}h.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',function(){this.searchBoxFocused=true;this.resultSelected=false;}.bind(this)),this.data.subscribe('beforeQuery',function(i,j){this.query=j.value||'';}.bind(this)),this.view.subscribe('select',function(){this.resultSelected=true;this.tryToSubmitSurvey();}.bind(this)),this.core.subscribe('blur',this.tryToSubmitSurvey));};h.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};h.prototype.tryToSubmitSurvey=function(){'use strict';if(this.searchBoxFocused){this.openSurvey();this.resultSelected=false;this.searchBoxFocused=false;}};h.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var i=this.core.element;if(i==null)i=this.core.getElement();var j=this.normalizeValue(this.query),k=c('XSearchFacebarSurveyController').getURIBuilder().setString('id',c('getOrCreateDOMID')(i)).setString('query',j!=null?j:'').setString('session_id',this.data.queryData.sid).setExists('result_selected',this.resultSelected);this.request=new (c('AsyncRequest'))().setMethod('post').setAllowCrossPageTransition(true).setURI(k.getURI());this.request.send();};h.prototype.normalizeValue=function(i){'use strict';return String(i).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'').toLowerCase();};f.exports=h;},null);
__d('TypeaheadSearchFilter',['Arbiter'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=this._typeahead,j=i.getView().seeMoreEndpoint;this._subscriptions=[c('Arbiter').subscribe('search/typeahead/updateFilter',function(k,l){if(l.filter_type=='web')i.getView().queryData.form='FBKBFR';i.getView().queryData.type=l.filter_type;}),c('Arbiter').subscribe('search/typeahead/updateSeeMoreEndpoint',function(k,l){i.getView().seeMoreEndpoint=l;}),c('Arbiter').subscribe('page_transition',function(k,l){if(i.getView().queryData.form)delete i.getView().queryData.form;delete i.getView().queryData.type;i.getView().seeMoreEndpoint=j;},c('Arbiter').SUBSCRIBE_NEW)];};h.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(i){i.unsubscribe();});this._subscriptions=null;};Object.assign(h.prototype,{_subscription:null});f.exports=h;},null);
__d('legacy:SearchFilterTypeaheadBehavior',['TypeaheadSearchFilter'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(c('TypeaheadSearchFilter'));};},3);
__d('SessionStartSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.core=i.getCore();this.data=i.getData();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}h.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.data.subscribe('query',function(){this.openSurvey();}.bind(this)));};h.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};h.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var i=c('XSearchFacebarSurveyController').getURIBuilder().setString('id',c('getOrCreateDOMID')(this.core.element)).setExists('on_session_start',true).setString('session_id',this.data.queryData.sid);this.request=new (c('AsyncRequest'))().setMethod('post').setURI(i.getURI());this.request.send();};f.exports=h;},null);
__d('TypeaheadDetectQueryLocale',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;this._data=i.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}h.prototype.enable=function(){'use strict';this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',function(i,j){var k=j.value;if(k===''){this._swapQueryCache('');return;}var l=null,m=k.charCodeAt(k.length-1);if(12352<=m&&m<=12543){l='ja_JP';}else if(12544<=m&&m<=12735)l='zh_TW';this._swapQueryCache(l);}.bind(this));};h.prototype.disable=function(){'use strict';this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};h.prototype._swapQueryCache=function(i){'use strict';if(i===null||i===this._previousLocale)return;this._data.queryCache=this._queryCache[i];this._data.setQueryData({query_locale:i});this._previousLocale=i;};f.exports=h;},null);
__d('TypeaheadExcludeBootstrapFromQueryCache',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._data=i.getData();}h.prototype.enable=function(){'use strict';this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(i,j){if(this._buildingQueryCache)j.local_uids.splice(0,j.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};h.prototype.disable=function(){'use strict';this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};f.exports=h;},null);
__d('TypeaheadPostSearchRedirect',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.view=i.getView();}h.prototype.enable=function(){'use strict';this.view.queryData.ref='ss_see_more_link';};h.prototype.disable=function(){'use strict';delete this.view.queryData.ref;};f.exports=h;},null);
__d('TypeaheadRecentSearchUpdater',['Arbiter'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.view=i.getView();}h.prototype.enable=function(){'use strict';this.updaterSubscription=this.view.subscribe('select',function(){c('Arbiter').inform('search/refreshRecentSearchesNullstate',{},c('Arbiter').BEHAVIOR_STATE);});};h.prototype.disable=function(){'use strict';this.view.unsubscribe(this.updaterSubscription);};f.exports=h;},null);
__d('TypeaheadRegulateMemorializedUsers',['TokenizeUtil'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype._filter=function(i,j){'use strict';if(i.type!=='user'||!i.memorialized)return true;var k=c('TokenizeUtil').parse(i.text).tokens;if(k.length===1&&c('TokenizeUtil').isExactMatch(j,i.text))return true;var l=this._typeahead.getData().getTextToIndex(i),m=c('TokenizeUtil').parse(j).tokens;return m.length>1&&c('TokenizeUtil').isQueryMatch(j,l);};h.prototype.enable=function(){'use strict';this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};h.prototype.disable=function(){'use strict';this._filterRegistry.remove();this._filterRegistry=null;};Object.assign(h.prototype,{_filterRegistry:null});f.exports=h;},null);
__d('legacy:RegulateMemorializedUsersTypeaheadBehavior',['TypeaheadRegulateMemorializedUsers'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.regulateMemorializedUsers=function(h){h.enableBehavior(c('TypeaheadRegulateMemorializedUsers'));};},3);