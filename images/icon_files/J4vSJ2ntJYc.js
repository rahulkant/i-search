/*!CK:1947015072!*//*1459132544,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["7coLQ"]); }

__d('StickerContextualDialog.react',['cx','ContextualLayerAutoFlipHorizontal','MercuryConfig','ReactAbstractContextualDialog','ReactLayer'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=7,j=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal')],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:i,length:16}}}));j.WIDTH={NORMAL:312,WIDE:400};f.exports=j;},null);
__d('ChatStickerButton.react',['cx','fbt','BootloadedComponent.react','JSResource','Link.react','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','StickerActions','StickerContextualDialog.react','StickerStateStore','StoreAndPropBasedStateMixin','XUISpinner.react','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=278,l=c('React').createClass({displayName:'ChatStickerButton',_clickGuard:false,mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactLayeredComponentMixin'),c('StoreAndPropBasedStateMixin')(c('StickerStateStore'))],propTypes:{className:j.string,ContextualDialogClass:j.func.isRequired,disabled:j.bool,flyoutClassName:j.string,flyoutWidth:j.number,getInput:j.func,onLoad:j.func,onStickerSelect:j.func.isRequired,onEmoticonSelect:j.func.isRequired,onFlyoutShown:j.func,onFlyoutHidden:j.func,threadID:j.string},statics:{calculateState:function(m){var n=c('StickerStateStore').getState();return {shown:n.showTray&&m.threadID===n.threadID};}},getDefaultProps:function(){return {ContextualDialogClass:c('StickerContextualDialog.react'),disabled:false,flyoutWidth:k,onStickerSelect:c('emptyFunction'),onEmoticonSelect:c('emptyFunction')};},componentDidMount:function(){this.props.onLoad&&this.props.onLoad(this);},componentWillUnmount:function(){if(this.state.shown)this._hideFlyout();},render:function(){return (c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,this.state.shown?"open":''),href:'#',onClick:this.showFlyout,onMouseDown:this._prepareForClick,role:'button',title:i._("Choose a sticker or emoticon"),ref:'link'}));},renderLayers:function(){if(!this.state.shown)return {contextualDialog:null};var m=this.props.ContextualDialogClass;return {contextualDialog:c('React').createElement(m,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this._handleBeforeHide,onBlur:this._hideFlyout,position:'above',shown:this.state.shown,width:this.props.flyoutWidth},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('XUISpinner.react'),{size:'large'})),bootloadLoader:c('JSResource')('StickersFlyout.react'),className:this.props.flyoutClassName,onShown:function(){if(this.props.onFlyoutShown)this.props.onFlyoutShown();}.bind(this),onHidden:function(){if(this.props.onFlyoutHidden)this.props.onFlyoutHidden();}.bind(this),onEscKeyDown:this._hideFlyout,onStickerSelect:this._handleStickerSelected,onEmoticonSelect:this._handleEmoticonSelected,shown:this.state.shown}))};},_prepareForClick:function(){this._clickGuard=this.state.shown;},showFlyout:function(m){m&&m.stopPropagation();if(this._clickGuard||this.props.disabled){this._clickGuard=false;return;}c('StickerActions').showStickerTray(this.props.threadID);},_handleBeforeHide:function(){if(this.state.shown){this._hideFlyout();return false;}},_hideFlyout:function(){var m=this.props.getInput&&this.props.getInput();m&&m.focus&&m.focus();c('StickerActions').hideStickerTray();},_handleStickerSelected:function(m){this.props.onStickerSelect(m);},_handleEmoticonSelected:function(m){this._hideFlyout();this.props.onEmoticonSelect(m);}});f.exports=l;},null);