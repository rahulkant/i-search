/*!CK:3442774505!*//*1458859701,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["sR2Ui"]); }

__d('NewStoriesPillView',['cx','fbt','Animation','BanzaiScuba','CurrentUser','DOMScroll','Ease','Event','Keys','React','ReactDOM','ReactRenderer','Vector','getScrollPosition'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=300;function l(o){new (c('BanzaiScuba'))('feed_newstoriescard').addNormal('user_id',c('CurrentUser').getID()).addNormal('event',o).addInteger('time',Math.round(Date.now()/1000)).addInteger('bar_at_top',1).post();}var m=c('React').createClass({displayName:'NewStoriesPillComponent',propTypes:{onClick:j.func.isRequired},componentDidMount:function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this)).from('top',-50).to('top',42).ease(c('Ease').makePowerOut(3)).duration(400).show().go();},componentWillUnmount:function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this)).from('top',42).to('top',-50).ease(c('Ease').sineOut()).duration(250).hide().go();},render:function(){return (c('React').createElement('div',{className:"_2c44 hidden_elem"},c('React').createElement('div',{className:"_2f6b",onClick:this.props.onClick,onKeyDown:function(event){if(event.keyCode===c('Keys').RETURN)this.props.onClick(event);}.bind(this),role:'button',tabIndex:'0'},c('React').createElement('span',{className:"_489y"}),c('React').createElement('span',{className:"_2f6g"},i._("New Stories")))));}}),n=Object.assign({_root:null,_isAtTop:false,_scrollSubscription:null,setAtTop:function(){this._isAtTop=true;},renderInto:function(o){if(this._root)return;this._root=o;c('ReactRenderer').constructAndRenderComponent(m,{onClick:function(event){this._onClick();event.stopPropagation();event.preventDefault();}.bind(this)},o);if(this._isAtTop)l('render');},hideWhenScrollAbove:function(o){if(this._scrollSubscription)this._scrollSubscription.remove();this._scrollSubscription=c('Event').listen(window,'scroll',function(){if(c('getScrollPosition')(window).y<o)this.unmount();}.bind(this));},unmount:function(){if(this._root){c('ReactDOM').unmountComponentAtNode(this._root);this._root=null;}this._isAtTop=false;if(this._scrollSubscription){this._scrollSubscription.remove();this._scrollSubscription=null;}},_onClick:function(){if(this._isAtTop)l('click');this.unmount();var o=new (c('Vector'))(c('Vector').getScrollPosition().x,0,'document');c('DOMScroll').scrollTo(o,k,false,false,0,function(){c('DOMScroll').scrollTo(o,0);});}});f.exports=n;},null);